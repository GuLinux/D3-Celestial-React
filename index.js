!function(t,n){for(var e in n)t[e]=n[e]}(exports,function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=3)}([function(t,n){t.exports=require("react")},function(t,n,e){var r,a;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){function o(t){return t&&(t.ownerDocument||t.document||t).documentElement}function u(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function s(t,n){return n>t?-1:t>n?1:t>=n?0:NaN}function c(t){return null===t?NaN:+t}function l(t){return!isNaN(t)}function h(t){return{left:function(n,e,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);a>r;){var i=r+a>>>1;t(n[i],e)<0?r=i+1:a=i}return r},right:function(n,e,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);a>r;){var i=r+a>>>1;t(n[i],e)>0?a=i:r=i+1}return r}}}function f(t){return t.length}function p(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function d(){this._=Object.create(null)}function g(t){return(t+="")===Mi||t[0]===mi?mi+t:t}function v(t){return(t+="")[0]===mi?t.slice(1):t}function M(t){return g(t)in this._}function m(t){return(t=g(t))in this._&&delete this._[t]}function y(){var t=[];for(var n in this._)t.push(v(n));return t}function b(){var t=0;for(var n in this._)++t;return t}function x(){for(var t in this._)return!1;return!0}function w(){this._=Object.create(null)}function k(t){return t}function S(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function _(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=yi.length;r>e;++e){var a=yi[e]+n;if(a in t)return a}}function q(){}function z(){}function E(t){function n(){for(var n,r=e,a=-1,i=r.length;++a<i;)(n=r[a].on)&&n.apply(this,arguments);return t}var e=[],r=new d;return n.on=function(n,a){var i,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(n)),a&&e.push(r.set(n,{on:a})),t)},n}function T(){oi.event.preventDefault()}function N(){for(var t,n=oi.event;t=n.sourceEvent;)n=t;return n}function A(t){for(var n=new z,e=0,r=arguments.length;++e<r;)n[arguments[e]]=E(n);return n.of=function(e,r){return function(a){try{var i=a.sourceEvent=oi.event;a.target=t,oi.event=a,n[a.type].apply(e,r)}finally{oi.event=i}}},n}function P(t){return xi(t,_i),t}function C(t){return"function"==typeof t?t:function(){return wi(t,this)}}function j(t){return"function"==typeof t?t:function(){return ki(t,this)}}function I(t,n){return t=oi.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function L(t){return t.trim().replace(/\s+/g," ")}function D(t){return new RegExp("(?:^|\\s+)"+oi.requote(t)+"(?:\\s+|$)","g")}function R(t){return(t+"").trim().split(/^|\s+/)}function O(t,n){var e=(t=R(t).map(F)).length;return"function"==typeof n?function(){for(var r=-1,a=n.apply(this,arguments);++r<e;)t[r](this,a)}:function(){for(var r=-1;++r<e;)t[r](this,n)}}function F(t){var n=D(t);return function(e,r){if(a=e.classList)return r?a.add(t):a.remove(t);var a=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(a)||e.setAttribute("class",L(a+" "+t))):e.setAttribute("class",L(a.replace(n," ")))}}function U(t,n,e){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}:function(){this.style.setProperty(t,n,e)}}function H(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function Q(t){return"function"==typeof t?t:(t=oi.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var n=this.ownerDocument,e=this.namespaceURI;return e===qi&&n.documentElement.namespaceURI===qi?n.createElement(t):n.createElementNS(e,t)}}function Y(){var t=this.parentNode;t&&t.removeChild(this)}function V(t){return{__data__:t}}function B(t){return function(){return Si(this,t)}}function W(t){return arguments.length||(t=s),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function G(t,n){for(var e=0,r=t.length;r>e;e++)for(var a,i=t[e],o=0,u=i.length;u>o;o++)(a=i[o])&&n(a,o,e);return t}function Z(t){return xi(t,Ei),t}function $(t,n,e){function r(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}var a="__on"+t,i=t.indexOf("."),o=X;i>0&&(t=t.slice(0,i));var u=Ti.get(t);return u&&(t=u,o=J),i?n?function(){var i=o(n,si(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=e),i._=n}:r:n?q:function(){var n,e=new RegExp("^__on([^.]+)"+oi.requote(t)+"$");for(var r in this)if(n=r.match(e)){var a=this[r];this.removeEventListener(n[1],a,a.$),delete this[r]}}}function X(t,n){return function(e){var r=oi.event;oi.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{oi.event=r}}}function J(t,n){var e=X(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function K(t){var n=".dragsuppress-"+ ++Ai,e="click"+n,r=oi.select(u(t)).on("touchmove"+n,T).on("dragstart"+n,T).on("selectstart"+n,T);if(null==Ni&&(Ni=!("onselectstart"in t)&&_(t.style,"userSelect")),Ni){var a=o(t).style,i=a[Ni];a[Ni]="none"}return function(t){if(r.on(n,null),Ni&&(a[Ni]=i),t){var o=function(){r.on(e,null)};r.on(e,function(){T(),o()},!0),setTimeout(o,0)}}}function tt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>Pi){var a=u(t);if(a.scrollX||a.scrollY){var i=(e=oi.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Pi=!(i.f||i.e),e.remove()}}return Pi?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var o=t.getBoundingClientRect();return[n.clientX-o.left-t.clientLeft,n.clientY-o.top-t.clientTop]}function nt(){return oi.event.changedTouches[0].identifier}function et(t){return t>0?1:0>t?-1:0}function rt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function at(t){return t>1?0:-1>t?Ii:Math.acos(t)}function it(t){return t>1?Ri:-1>t?-Ri:Math.asin(t)}function ot(t){return((t=Math.exp(t))+1/t)/2}function ut(t){return(t=Math.sin(t/2))*t}function st(){}function ct(t,n,e){return this instanceof ct?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof ct?new ct(t.h,t.s,t.l):kt(""+t,St,ct):new ct(t,n,e)}function lt(t,n,e){function r(t){return Math.round(255*function(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(i-a)*t/60:180>t?i:240>t?a+(i-a)*(240-t)/60:a}(t))}var a,i;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:0>n?0:n>1?1:n,a=2*(e=0>e?0:e>1?1:e)-(i=.5>=e?e*(1+n):e+n-e*n),new yt(r(t+120),r(t),r(t-120))}function ht(t,n,e){return this instanceof ht?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof ht?new ht(t.h,t.c,t.l):gt(t instanceof pt?t.l:(t=_t((t=oi.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ht(t,n,e)}function ft(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new pt(e,Math.cos(t*=Oi)*n,Math.sin(t)*n)}function pt(t,n,e){return this instanceof pt?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof pt?new pt(t.l,t.a,t.b):t instanceof ht?ft(t.h,t.c,t.l):_t((t=yt(t)).r,t.g,t.b):new pt(t,n,e)}function dt(t,n,e){var r=(t+16)/116,a=r+n/500,i=r-e/200;return new yt(mt(3.2404542*(a=vt(a)*Gi)-1.5371385*(r=vt(r)*Zi)-.4985314*(i=vt(i)*$i)),mt(-.969266*a+1.8760108*r+.041556*i),mt(.0556434*a-.2040259*r+1.0572252*i))}function gt(t,n,e){return t>0?new ht(Math.atan2(e,n)*Fi,Math.sqrt(n*n+e*e),t):new ht(NaN,NaN,t)}function vt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function Mt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function mt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function yt(t,n,e){return this instanceof yt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof yt?new yt(t.r,t.g,t.b):kt(""+t,yt,lt):new yt(t,n,e)}function bt(t){return new yt(t>>16,t>>8&255,255&t)}function xt(t){return bt(t)+""}function wt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function kt(t,n,e){var r,a,i,o=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return e(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return n(zt(a[0]),zt(a[1]),zt(a[2]))}return(i=Ki.get(t))?n(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&i)>>4,o|=o>>4,u=240&i,u|=u>>4,s=15&i,s|=s<<4):7===t.length&&(o=(16711680&i)>>16,u=(65280&i)>>8,s=255&i)),n(o,u,s))}function St(t,n,e){var r,a,i=Math.min(t/=255,n/=255,e/=255),o=Math.max(t,n,e),u=o-i,s=(o+i)/2;return u?(a=.5>s?u/(o+i):u/(2-o-i),r=t==o?(n-e)/u+(e>n?6:0):n==o?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,a=s>0&&1>s?0:r),new ct(r,a,s)}function _t(t,n,e){var r=Mt((.4124564*(t=qt(t))+.3575761*(n=qt(n))+.1804375*(e=qt(e)))/Gi),a=Mt((.2126729*t+.7151522*n+.072175*e)/Zi);return pt(116*a-16,500*(r-a),200*(a-Mt((.0193339*t+.119192*n+.9503041*e)/$i)))}function qt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Et(t){return"function"==typeof t?t:function(){return t}}function Tt(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Nt(n,e,t,r)}}function Nt(t,n,e,r){function a(){var t,n=s.status;if(!n&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(s)||n>=200&&300>n||304===n){try{t=e.call(i,s)}catch(t){return void o.error.call(i,t)}o.load.call(i,t)}else o.error.call(i,s)}var i={},o=oi.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=a:s.onreadystatechange=function(){s.readyState>3&&a()},s.onprogress=function(t){var n=oi.event;oi.event=t;try{o.progress.call(i,s)}finally{oi.event=n}},i.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",i)},i.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",i):n},i.responseType=function(t){return arguments.length?(c=t,i):c},i.response=function(t){return e=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(si(arguments)))}}),i.send=function(e,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),s.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),s.setRequestHeader)for(var l in u)s.setRequestHeader(l,u[l]);return null!=n&&s.overrideMimeType&&s.overrideMimeType(n),null!=c&&(s.responseType=c),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),o.beforesend.call(i,s),s.send(null==r?null:r),i},i.abort=function(){return s.abort(),i},oi.rebind(i,o,"on"),null==r?i:i.get(function(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}(r))}function At(t,n,e){var r=arguments.length;2>r&&(n=0),3>r&&(e=Date.now());var a={c:t,t:e+n,n:null};return no?no.n=a:to=a,no=a,eo||(ro=clearTimeout(ro),eo=1,ao(Pt)),a}function Pt(){var t=Ct(),n=jt()-t;n>24?(isFinite(n)&&(clearTimeout(ro),ro=setTimeout(Pt,n)),eo=0):(eo=1,ao(Pt))}function Ct(){for(var t=Date.now(),n=to;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function jt(){for(var t,n=to,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:to=n.n;return no=t,e}function It(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Lt(t){var n=t.decimal,e=t.thousands,r=t.grouping,a=t.currency,i=r&&e?function(t,n){for(var a=t.length,i=[],o=0,u=r[0],s=0;a>0&&u>0&&(s+u+1>n&&(u=Math.max(1,n-s)),i.push(t.substring(a-=u,a+u)),!((s+=u+1)>n));)u=r[o=(o+1)%r.length];return i.reverse().join(e)}:k;return function(t){var e=oo.exec(t),r=e[1]||" ",o=e[2]||">",u=e[3]||"-",s=e[4]||"",c=e[5],l=+e[6],h=e[7],f=e[8],p=e[9],d=1,g="",v="",M=!1,m=!0;switch(f&&(f=+f.substring(1)),(c||"0"===r&&"="===o)&&(c=r="0",o="="),p){case"n":h=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===s&&(g="0"+p.toLowerCase());case"c":m=!1;case"d":M=!0,f=0;break;case"s":d=-1,p="r"}"$"===s&&(g=a[0],v=a[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=uo.get(p)||Dt;var y=c&&h;return function(t){var e=v;if(M&&t%1)return"";var a=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>d){var s=oi.formatPrefix(t,f);t=s.scale(t),e=s.symbol+v}else t*=d;var b,x,w=(t=p(t,f)).lastIndexOf(".");if(0>w){var k=m?t.lastIndexOf("e"):-1;0>k?(b=t,x=""):(b=t.substring(0,k),x=t.substring(k))}else b=t.substring(0,w),x=n+t.substring(w+1);!c&&h&&(b=i(b,1/0));var S=g.length+b.length+x.length+(y?0:a.length),_=l>S?new Array(S=l-S+1).join(r):"";return y&&(b=i(_+b,_.length?l-x.length:1/0)),a+=g,t=b+x,("<"===o?a+t+_:">"===o?_+a+t:"^"===o?_.substring(0,S>>=1)+a+t+_.substring(S):a+(y?t:_+t))+e}}}function Dt(t){return t+""}function Rt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ot(t,n,e){function r(n){var e=t(n),r=i(e,1);return r-n>n-e?e:r}function a(e){return n(e=t(new co(e-1)),1),e}function i(t,e){return n(t=new co(+t),e),t}function o(t,r,i){var o=a(t),u=[];if(i>1)for(;r>o;)e(o)%i||u.push(new Date(+o)),n(o,1);else for(;r>o;)u.push(new Date(+o)),n(o,1);return u}t.floor=t,t.round=r,t.ceil=a,t.offset=i,t.range=o;var u=t.utc=Ft(t);return u.floor=u,u.round=Ft(r),u.ceil=Ft(a),u.offset=Ft(i),u.range=function(t,n,e){try{co=Rt;var r=new Rt;return r._=t,o(r,n,e)}finally{co=Date}},t}function Ft(t){return function(n,e){try{co=Rt;var r=new Rt;return r._=n,t(r,e)._}finally{co=Date}}}function Ut(t){function n(t){function n(n){for(var e,a,i,o=[],u=-1,s=0;++u<r;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(a=ho[e=t.charAt(++u)])&&(e=t.charAt(++u)),(i=b[e])&&(e=i(n,null==a?"e"===e?" ":"0":a)),o.push(e),s=u+1);return o.push(t.slice(s,u)),o.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(r,t,n,0)!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&co!==Rt,i=new(a?Rt:co);return"j"in r?i.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),i.setFullYear(r.y,0,1),i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(i.getDay()+5)%7:r.w+7*r.U-(i.getDay()+6)%7)):i.setFullYear(r.y,r.m,r.d),i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?i._:i},n.toString=function(){return t},n}function e(t,n,e,r){for(var a,i,o,u=0,s=n.length,c=e.length;s>u;){if(r>=c)return-1;if(37===(a=n.charCodeAt(u++))){if(o=n.charAt(u++),!(i=x[o in ho?n.charAt(u++):o])||(r=i(t,e,r))<0)return-1}else if(a!=e.charCodeAt(r++))return-1}return r}var r=t.dateTime,a=t.date,i=t.time,o=t.periods,u=t.days,s=t.shortDays,c=t.months,l=t.shortMonths;n.utc=function(t){function e(t){try{var n=new(co=Rt);return n._=t,r(n)}finally{co=Date}}var r=n(t);return e.parse=function(t){try{co=Rt;var n=r.parse(t);return n&&n._}finally{co=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=un;var h=oi.map(),f=Qt(u),p=Yt(u),d=Qt(s),g=Yt(s),v=Qt(c),M=Yt(c),m=Qt(l),y=Yt(l);o.forEach(function(t,n){h.set(t.toLowerCase(),n)});var b={a:function(t){return s[t.getDay()]},A:function(t){return u[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:n(r),d:function(t,n){return Ht(t.getDate(),n,2)},e:function(t,n){return Ht(t.getDate(),n,2)},H:function(t,n){return Ht(t.getHours(),n,2)},I:function(t,n){return Ht(t.getHours()%12||12,n,2)},j:function(t,n){return Ht(1+so.dayOfYear(t),n,3)},L:function(t,n){return Ht(t.getMilliseconds(),n,3)},m:function(t,n){return Ht(t.getMonth()+1,n,2)},M:function(t,n){return Ht(t.getMinutes(),n,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,n){return Ht(t.getSeconds(),n,2)},U:function(t,n){return Ht(so.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Ht(so.mondayOfYear(t),n,2)},x:n(a),X:n(i),y:function(t,n){return Ht(t.getFullYear()%100,n,2)},Y:function(t,n){return Ht(t.getFullYear()%1e4,n,4)},Z:an,"%":function(){return"%"}},x={a:function(t,n,e){d.lastIndex=0;var r=d.exec(n.slice(e));return r?(t.w=g.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){f.lastIndex=0;var r=f.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){m.lastIndex=0;var r=m.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){v.lastIndex=0;var r=v.exec(n.slice(e));return r?(t.m=M.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,n,r){return e(t,b.c.toString(),n,r)},d:Jt,e:Jt,H:tn,I:tn,j:Kt,L:rn,m:Xt,M:nn,p:function(t,n,e){var r=h.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)},S:en,U:Bt,w:Vt,W:Wt,x:function(t,n,r){return e(t,b.x.toString(),n,r)},X:function(t,n,r){return e(t,b.X.toString(),n,r)},y:Zt,Y:Gt,Z:$t,"%":on};return n}function Ht(t,n,e){var r=0>t?"-":"",a=(r?-t:t)+"",i=a.length;return r+(e>i?new Array(e-i+1).join(n)+a:a)}function Qt(t){return new RegExp("^(?:"+t.map(oi.requote).join("|")+")","i")}function Yt(t){for(var n=new d,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Vt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Bt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Wt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Gt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Zt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+2));return r?(t.y=function(t){return t+(t>68?1900:2e3)}(+r[0]),e+r[0].length):-1}function $t(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Xt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Jt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Kt(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function tn(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function nn(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function en(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function rn(t,n,e){fo.lastIndex=0;var r=fo.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function an(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=vi(n)/60|0,a=vi(n)%60;return e+Ht(r,"0",2)+Ht(a,"0",2)}function on(t,n,e){po.lastIndex=0;var r=po.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function un(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function sn(){}function cn(t,n,e){var r=e.s=t+n,a=r-t,i=r-a;e.t=t-i+(n-a)}function ln(t,n){t&&mo.hasOwnProperty(t.type)&&mo[t.type](t,n)}function hn(t,n,e){var r,a=-1,i=t.length-e;for(n.lineStart();++a<i;)r=t[a],n.point(r[0],r[1],r[2]);n.lineEnd()}function fn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)hn(t[e],n,1);n.polygonEnd()}function pn(){function t(t,n){n=n*Oi/2+Ii/4;var e=(t*=Oi)-r,o=e>=0?1:-1,u=o*e,s=Math.cos(n),c=Math.sin(n),l=i*c,h=a*s+l*Math.cos(u),f=l*o*Math.sin(u);bo.add(Math.atan2(f,h)),r=t,a=s,i=c}var n,e,r,a,i;xo.point=function(o,u){xo.point=t,r=(n=o)*Oi,a=Math.cos(u=(e=u)*Oi/2+Ii/4),i=Math.sin(u)},xo.lineEnd=function(){t(n,e)}}function dn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function gn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function vn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Mn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function mn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function yn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function bn(t){return[Math.atan2(t[1],t[0]),it(t[2])]}function xn(t,n){return vi(t[0]-n[0])<Ci&&vi(t[1]-n[1])<Ci}function wn(t,n){t*=Oi;var e=Math.cos(n*=Oi);kn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function kn(t,n,e){So+=(t-So)/++wo,_o+=(n-_o)/wo,qo+=(e-qo)/wo}function Sn(){function t(t,a){t*=Oi;var i=Math.cos(a*=Oi),o=i*Math.cos(t),u=i*Math.sin(t),s=Math.sin(a),c=Math.atan2(Math.sqrt((c=e*s-r*u)*c+(c=r*o-n*s)*c+(c=n*u-e*o)*c),n*o+e*u+r*s);ko+=c,zo+=c*(n+(n=o)),Eo+=c*(e+(e=u)),To+=c*(r+(r=s)),kn(n,e,r)}var n,e,r;Co.point=function(a,i){a*=Oi;var o=Math.cos(i*=Oi);n=o*Math.cos(a),e=o*Math.sin(a),r=Math.sin(i),Co.point=t,kn(n,e,r)}}function _n(){Co.point=wn}function qn(){function t(t,n){t*=Oi;var e=Math.cos(n*=Oi),o=e*Math.cos(t),u=e*Math.sin(t),s=Math.sin(n),c=a*s-i*u,l=i*o-r*s,h=r*u-a*o,f=Math.sqrt(c*c+l*l+h*h),p=r*o+a*u+i*s,d=f&&-at(p)/f,g=Math.atan2(f,p);No+=d*c,Ao+=d*l,Po+=d*h,ko+=g,zo+=g*(r+(r=o)),Eo+=g*(a+(a=u)),To+=g*(i+(i=s)),kn(r,a,i)}var n,e,r,a,i;Co.point=function(o,u){n=o,e=u,Co.point=t,o*=Oi;var s=Math.cos(u*=Oi);r=s*Math.cos(o),a=s*Math.sin(o),i=Math.sin(u),kn(r,a,i)},Co.lineEnd=function(){t(n,e),Co.lineEnd=_n,Co.point=wn}}function zn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function En(){return!0}function Tn(t,n,e,r,a){var i=[],o=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(xn(e,r)){a.lineStart();for(var u=0;n>u;++u)a.point((e=t[u])[0],e[1]);return void a.lineEnd()}var s=new An(e,t,null,!0),c=new An(e,null,s,!1);s.o=c,i.push(s),o.push(c),s=new An(r,t,null,!1),c=new An(r,null,s,!0),s.o=c,i.push(s),o.push(c)}}),o.sort(n),Nn(i),Nn(o),i.length){for(var u=0,s=e,c=o.length;c>u;++u)o[u].e=s=!s;for(var l,h,f=i[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;l=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(u=0,c=l.length;c>u;++u)a.point((h=l[u])[0],h[1]);else r(p.x,p.n.x,1,a);p=p.n}else{if(d)for(u=(l=p.p.z).length-1;u>=0;--u)a.point((h=l[u])[0],h[1]);else r(p.x,p.p.x,-1,a);p=p.p}l=(p=p.o).z,d=!d}while(!p.v);a.lineEnd()}}}function Nn(t){if(n=t.length){for(var n,e,r=0,a=t[0];++r<n;)a.n=e=t[r],e.p=a,a=e;a.n=e=t[0],e.p=a}}function An(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Pn(t,n,e,r){return function(a,i){function o(n,e){var r=a(n,e);t(n=r[0],e=r[1])&&i.point(n,e)}function u(t,n){var e=a(t,n);v.point(e[0],e[1])}function s(){m.point=u,v.lineStart()}function c(){m.point=o,v.lineEnd()}function l(t,n){g.push([t,n]);var e=a(t,n);b.point(e[0],e[1])}function h(){b.lineStart(),g=[]}function f(){l(g[0][0],g[0][1]),b.lineEnd();var t,n=b.clean(),e=y.buffer(),r=e.length;if(g.pop(),d.push(g),g=null,r)if(1&n){var a,o=-1;if((r=(t=e[0]).length-1)>0){for(x||(i.polygonStart(),x=!0),i.lineStart();++o<r;)i.point((a=t[o])[0],a[1]);i.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Cn))}var p,d,g,v=n(i),M=a.invert(r[0],r[1]),m={point:o,lineStart:s,lineEnd:c,polygonStart:function(){m.point=l,m.lineStart=h,m.lineEnd=f,p=[],d=[]},polygonEnd:function(){m.point=o,m.lineStart=s,m.lineEnd=c,p=oi.merge(p);var t=function(t,n){var e=t[0],r=t[1],a=[Math.sin(e),-Math.cos(e),0],i=0,o=0;bo.reset();for(var u=0,s=n.length;s>u;++u){var c=n[u],l=c.length;if(l)for(var h=c[0],f=h[0],p=h[1]/2+Ii/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===l&&(v=0);var M=(t=c[v])[0],m=t[1]/2+Ii/4,y=Math.sin(m),b=Math.cos(m),x=M-f,w=x>=0?1:-1,k=w*x,S=k>Ii,_=d*y;if(bo.add(Math.atan2(_*w*Math.sin(k),g*b+_*Math.cos(k))),i+=S?x+w*Li:x,S^f>=e^M>=e){var q=vn(dn(h),dn(t));yn(q);var z=vn(a,q);yn(z);var E=(S^x>=0?-1:1)*it(z[2]);(r>E||r===E&&(q[0]||q[1]))&&(o+=S^x>=0?1:-1)}if(!v++)break;f=M,d=y,g=b,h=t}}return(-Ci>i||Ci>i&&-Ci>bo)^1&o}(M,d);p.length?(x||(i.polygonStart(),x=!0),Tn(p,In,t,e,i)):t&&(x||(i.polygonStart(),x=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),x&&(i.polygonEnd(),x=!1),p=d=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},y=jn(),b=n(y),x=!1;return m}}function Cn(t){return t.length>1}function jn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:q,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function In(t,n){return((t=t.x)[0]<0?t[1]-Ri-Ci:Ri-t[1])-((n=n.x)[0]<0?n[1]-Ri-Ci:Ri-n[1])}function Ln(t,n,e,r){return function(a){var i,o=a.a,u=a.b,s=o.x,c=o.y,l=0,h=1,f=u.x-s,p=u.y-c;if(i=t-s,f||!(i>0)){if(i/=f,0>f){if(l>i)return;h>i&&(h=i)}else if(f>0){if(i>h)return;i>l&&(l=i)}if(i=e-s,f||!(0>i)){if(i/=f,0>f){if(i>h)return;i>l&&(l=i)}else if(f>0){if(l>i)return;h>i&&(h=i)}if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(l>i)return;h>i&&(h=i)}else if(p>0){if(i>h)return;i>l&&(l=i)}if(i=r-c,p||!(0>i)){if(i/=p,0>p){if(i>h)return;i>l&&(l=i)}else if(p>0){if(l>i)return;h>i&&(h=i)}return l>0&&(a.a={x:s+l*f,y:c+l*p}),1>h&&(a.b={x:s+h*f,y:c+h*p}),a}}}}}}function Dn(t,n,e,r){function a(r,a){return vi(r[0]-t)<Ci?a>0?0:3:vi(r[0]-e)<Ci?a>0?2:1:vi(r[1]-n)<Ci?a>0?1:0:a>0?3:2}function i(t,n){return o(t.x,n.x)}function o(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function s(i,u,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(u,s))||o(i,u)<0^s>0)do{c.point(0===l||3===l?t:e,l>1?r:n)}while((l=(l+s+4)%4)!==h);else c.point(u[0],u[1])}function c(a,i){return a>=t&&e>=a&&i>=n&&r>=i}function l(t,n){c(t,n)&&u.point(t,n)}function h(t,n){var e=c(t=Math.max(-Io,Math.min(Io,t)),n=Math.max(-Io,Math.min(Io,n)));if(p&&d.push([t,n]),x)g=t,v=n,M=e,x=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&b)u.point(t,n);else{var r={a:{x:m,y:y},b:{x:t,y:n}};_(r)?(b||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),w=!1):e&&(u.lineStart(),u.point(t,n),w=!1)}m=t,y=n,b=e}var f,p,d,g,v,M,m,y,b,x,w,k=u,S=jn(),_=Ln(t,n,e,r),q={point:l,lineStart:function(){q.point=h,p&&p.push(d=[]),x=!0,b=!1,m=y=NaN},lineEnd:function(){f&&(h(g,v),M&&b&&S.rejoin(),f.push(S.buffer())),q.point=l,b&&u.lineEnd()},polygonStart:function(){u=S,f=[],p=[],w=!0},polygonEnd:function(){u=k,f=oi.merge(f);var n=function(t){for(var n=0,e=p.length,r=t[1],a=0;e>a;++a)for(var i,o=1,u=p[a],s=u.length,c=u[0];s>o;++o)i=u[o],c[1]<=r?i[1]>r&&rt(c,i,t)>0&&++n:i[1]<=r&&rt(c,i,t)<0&&--n,c=i;return 0!==n}([t,r]),e=w&&n,a=f.length;(e||a)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),a&&Tn(f,i,n,s,u),u.polygonEnd()),f=p=d=null}};return q}}function Rn(t){var n=0,e=Ii/3,r=Jn(t),a=r(n,e);return a.parallels=function(t){return arguments.length?r(n=t[0]*Ii/180,e=t[1]*Ii/180):[n/Ii*180,e/Ii*180]},a}function On(t,n){function e(t,n){var e=Math.sqrt(i-2*a*Math.sin(n))/a;return[e*Math.sin(t*=a),o-e*Math.cos(t)]}var r=Math.sin(t),a=(r+Math.sin(n))/2,i=1+r*(2*a-r),o=Math.sqrt(i)/a;return e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/a,it((i-(t*t+e*e)*a*a)/(2*a))]},e}function Fn(){function t(t,n){Do+=a*t-r*n,r=t,a=n}var n,e,r,a;Ho.point=function(i,o){Ho.point=t,n=r=i,e=a=o},Ho.lineEnd=function(){t(n,e)}}function Un(){function t(t,n){o.push("M",t,",",n,i)}function n(t,n){o.push("M",t,",",n),u.point=e}function e(t,n){o.push("L",t,",",n)}function r(){u.point=t}function a(){o.push("Z")}var i=Hn(4.5),o=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return i=Hn(t),u},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return u}function Hn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Qn(t,n){So+=t,_o+=n,++qo}function Yn(){function t(t,r){var a=t-n,i=r-e,o=Math.sqrt(a*a+i*i);zo+=o*(n+t)/2,Eo+=o*(e+r)/2,To+=o,Qn(n=t,e=r)}var n,e;Yo.point=function(r,a){Yo.point=t,Qn(n=r,e=a)}}function Vn(){Yo.point=Qn}function Bn(){function t(t,n){var e=t-r,i=n-a,o=Math.sqrt(e*e+i*i);zo+=o*(r+t)/2,Eo+=o*(a+n)/2,To+=o,No+=(o=a*t-r*n)*(r+t),Ao+=o*(a+n),Po+=3*o,Qn(r=t,a=n)}var n,e,r,a;Yo.point=function(i,o){Yo.point=t,Qn(n=r=i,e=a=o)},Yo.lineEnd=function(){t(n,e)}}function Wn(t){function n(n,e){t.moveTo(n+o,e),t.arc(n,e,o,0,Li)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function a(){u.point=n}function i(){t.closePath()}var o=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:a,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=a,u.point=n},pointRadius:function(t){return o=t,u},result:q};return u}function Gn(t){function n(t){return(u?r:e)(t)}function e(n){return $n(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){m=NaN,k.point=i,n.lineStart()}function i(e,r){var i=dn([e,r]),o=t(e,r);a(m,y,M,b,x,w,m=o[0],y=o[1],M=e,b=i[0],x=i[1],w=i[2],u,n),n.point(m,y)}function o(){k.point=e,n.lineEnd()}function s(){r(),k.point=c,k.lineEnd=l}function c(t,n){i(h=t,n),f=m,p=y,d=b,g=x,v=w,k.point=i}function l(){a(m,y,M,b,x,w,f,p,h,d,g,v,u,n),k.lineEnd=o,o()}var h,f,p,d,g,v,M,m,y,b,x,w,k={point:e,lineStart:r,lineEnd:o,polygonStart:function(){n.polygonStart(),k.lineStart=s},polygonEnd:function(){n.polygonEnd(),k.lineStart=r}};return k}function a(n,e,r,u,s,c,l,h,f,p,d,g,v,M){var m=l-n,y=h-e,b=m*m+y*y;if(b>4*i&&v--){var x=u+p,w=s+d,k=c+g,S=Math.sqrt(x*x+w*w+k*k),_=Math.asin(k/=S),q=vi(vi(k)-1)<Ci||vi(r-f)<Ci?(r+f)/2:Math.atan2(w,x),z=t(q,_),E=z[0],T=z[1],N=E-n,A=T-e,P=y*N-m*A;(P*P/b>i||vi((m*N+y*A)/b-.5)>.3||o>u*p+s*d+c*g)&&(a(n,e,r,u,s,c,E,T,q,x/=S,w/=S,k,v,M),M.point(E,T),a(E,T,q,x,w,k,l,h,f,p,d,g,v,M))}}var i=.5,o=Math.cos(30*Oi),u=16;return n.precision=function(t){return arguments.length?(u=(i=t*t)>0&&16,n):Math.sqrt(i)},n}function Zn(t){this.stream=t}function $n(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Xn(t){return Jn(function(){return t})()}function Jn(t){function n(t){return[(t=u(t[0]*Oi,t[1]*Oi))[0]*f+s,c-t[1]*f]}function e(t){return(t=u.invert((t[0]-s)/f,(c-t[1])/f))&&[t[0]*Fi,t[1]*Fi]}function r(){u=zn(o=ee(M,m,y),i);var t=i(g,v);return s=p-t[0]*f,c=d+t[1]*f,a()}function a(){return l&&(l.valid=!1,l=null),n}var i,o,u,s,c,l,h=Gn(function(t,n){return[(t=i(t,n))[0]*f+s,c-t[1]*f]}),f=150,p=480,d=250,g=0,v=0,M=0,m=0,y=0,b=jo,x=k,w=null,S=null;return n.stream=function(t){return l&&(l.valid=!1),(l=Kn(b(o,h(x(t))))).valid=!0,l},n.clipAngle=function(t){return arguments.length?(b=null==t?(w=t,jo):function(t){function n(t,n){return Math.cos(t)*Math.cos(n)>a}function e(t,n,e){var r=[1,0,0],i=vn(dn(t),dn(n)),o=gn(i,i),u=i[0],s=o-u*u;if(!s)return!e&&t;var c=a*o/s,l=-a*u/s,h=vn(r,i),f=mn(r,c);Mn(f,mn(i,l));var p=h,d=gn(f,p),g=gn(p,p),v=d*d-g*(gn(f,f)-1);if(!(0>v)){var M=Math.sqrt(v),m=mn(p,(-d-M)/g);if(Mn(m,f),m=bn(m),!e)return m;var y,b=t[0],x=n[0],w=t[1],k=n[1];b>x&&(y=b,b=x,x=y);var S=x-b,_=vi(S-Ii)<Ci;if(!_&&w>k&&(y=w,w=k,k=y),_||Ci>S?_?w+k>0^m[1]<(vi(m[0]-b)<Ci?w:k):w<=m[1]&&m[1]<=k:S>Ii^(b<=m[0]&&m[0]<=x)){var q=mn(p,(-d+M)/g);return Mn(q,f),[m,bn(q)]}}}function r(n,e){var r=i?t:Ii-t,a=0;return-r>n?a|=1:n>r&&(a|=2),-r>e?a|=4:e>r&&(a|=8),a}var a=Math.cos(t),i=a>0,o=vi(a)>Ci;return Pn(n,function(t){var a,u,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(h,f){var p,d=[h,f],g=n(h,f),v=i?g?0:r(h,f):g?r(h+(0>h?Ii:-Ii),f):0;if(!a&&(c=s=g)&&t.lineStart(),g!==s&&(p=e(a,d),(xn(a,p)||xn(d,p))&&(d[0]+=Ci,d[1]+=Ci,g=n(d[0],d[1]))),g!==s)l=0,g?(t.lineStart(),p=e(d,a),t.point(p[0],p[1])):(p=e(a,d),t.point(p[0],p[1]),t.lineEnd()),a=p;else if(o&&a&&i^g){var M;v&u||!(M=e(d,a,!0))||(l=0,i?(t.lineStart(),t.point(M[0][0],M[0][1]),t.point(M[1][0],M[1][1]),t.lineEnd()):(t.point(M[1][0],M[1][1]),t.lineEnd(),t.lineStart(),t.point(M[0][0],M[0][1])))}!g||a&&xn(a,d)||t.point(d[0],d[1]),a=d,s=g,u=v},lineEnd:function(){s&&t.lineEnd(),a=null},clean:function(){return l|(c&&s)<<1}}},oe(t,6*Oi),i?[0,-t]:[-Ii,t-Ii])}((w=+t)*Oi),a()):w},n.clipExtent=function(t){return arguments.length?(S=t,x=t?Dn(t[0][0],t[0][1],t[1][0],t[1][1]):k,a()):S},n.scale=function(t){return arguments.length?(f=+t,r()):f},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(g=t[0]%360*Oi,v=t[1]%360*Oi,r()):[g*Fi,v*Fi]},n.rotate=function(t){return arguments.length?(M=t[0]%360*Oi,m=t[1]%360*Oi,y=t.length>2?t[2]%360*Oi:0,r()):[M*Fi,m*Fi,y*Fi]},oi.rebind(n,h,"precision"),function(){return i=t.apply(this,arguments),n.invert=i.invert&&e,r()}}function Kn(t){return $n(t,function(n,e){t.point(n*Oi,e*Oi)})}function te(t,n){return[t,n]}function ne(t,n){return[t>Ii?t-Li:-Ii>t?t+Li:t,n]}function ee(t,n,e){return t?n||e?zn(ae(t),ie(n,e)):ae(t):n||e?ie(n,e):ne}function re(t){return function(n,e){return[(n+=t)>Ii?n-Li:-Ii>n?n+Li:n,e]}}function ae(t){var n=re(t);return n.invert=re(-t),n}function ie(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,s=Math.sin(t)*e,c=Math.sin(n),l=c*r+u*a;return[Math.atan2(s*i-l*o,u*r-c*a),it(l*i+s*o)]}var r=Math.cos(t),a=Math.sin(t),i=Math.cos(n),o=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,s=Math.sin(t)*e,c=Math.sin(n),l=c*i-s*o;return[Math.atan2(s*i+c*o,u*r+l*a),it(l*r-u*a)]},e}function oe(t,n){var e=Math.cos(t),r=Math.sin(t);return function(a,i,o,u){var s=o*n;null!=a?(a=ue(e,a),i=ue(e,i),(o>0?i>a:a>i)&&(a+=o*Li)):(a=t+o*Li,i=t-.5*s);for(var c,l=a;o>0?l>i:i>l;l-=s)u.point((c=bn([e,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function ue(t,n){var e=dn(n);e[0]-=t,yn(e);var r=at(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ci)%(2*Math.PI)}function se(t,n,e){var r=oi.range(t,n-Ci,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function ce(t,n,e){var r=oi.range(t,n-Ci,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function le(t){return t.source}function he(t){return t.target}function fe(t,n){function e(n,e){var r=Math.cos(n),a=Math.cos(e),i=t(r*a);return[i*a*Math.sin(n),i*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),a=n(r),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(t*i,r*o),Math.asin(r&&e*i/r)]},e}function pe(t,n){function e(t,n){o>0?-Ri+Ci>n&&(n=-Ri+Ci):n>Ri-Ci&&(n=Ri-Ci);var e=o/Math.pow(a(n),i);return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),a=function(t){return Math.tan(Ii/4+t/2)},i=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(a(n)/a(t)),o=r*Math.pow(a(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=et(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ri]},e):ge}function de(t,n){function e(t,n){var e=i-n;return[e*Math.sin(a*t),i-e*Math.cos(a*t)]}var r=Math.cos(t),a=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),i=r/a+t;return vi(a)<Ci?te:(e.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/a,i-et(a)*Math.sqrt(t*t+e*e)]},e)}function ge(t,n){return[t,Math.log(Math.tan(Ii/4+n/2))]}function ve(t){var n,e=Xn(t),r=e.scale,a=e.translate,i=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=a.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var o=i.apply(e,arguments);if(o===e){if(n=null==t){var u=Ii*r(),s=a();i([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else n&&(o=null);return o},e.clipExtent(null)}function Me(t,n){return[Math.log(Math.tan(Ii/4+n/2)),-t]}function me(t){return t[0]}function ye(t){return t[1]}function be(t){for(var n=t.length,e=[0,1],r=2,a=2;n>a;a++){for(;r>1&&rt(t[e[r-2]],t[e[r-1]],t[a])<=0;)--r;e[r++]=a}return e.slice(0,r)}function xe(t,n){return t[0]-n[0]||t[1]-n[1]}function we(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function ke(t,n,e,r){var a=t[0],i=e[0],o=n[0]-a,u=r[0]-i,s=t[1],c=e[1],l=n[1]-s,h=r[1]-c,f=(u*(s-c)-h*(a-i))/(h*o-u*l);return[a+f*o,s+f*l]}function Se(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function _e(){Ye(this),this.edge=this.site=this.circle=null}function qe(t){var n=au.pop()||new _e;return n.site=t,n}function ze(t){Le(t),nu.remove(t),au.push(t),Ye(t)}function Ee(t){var n=t.circle,e=n.x,r=n.cy,a={x:e,y:r},i=t.P,o=t.N,u=[t];ze(t);for(var s=i;s.circle&&vi(e-s.circle.x)<Ci&&vi(r-s.circle.cy)<Ci;)i=s.P,u.unshift(s),ze(s),s=i;u.unshift(s),Le(s);for(var c=o;c.circle&&vi(e-c.circle.x)<Ci&&vi(r-c.circle.cy)<Ci;)o=c.N,u.push(c),ze(c),c=o;u.push(c),Le(c);var l,h=u.length;for(l=1;h>l;++l)c=u[l],s=u[l-1],Ue(c.edge,s.site,c.site,a);s=u[0],(c=u[h-1]).edge=Oe(s.site,c.site,null,a),Ie(s),Ie(c)}function Te(t){for(var n,e,r,a,i=t.x,o=t.y,u=nu._;u;)if((r=Ne(u,o)-i)>Ci)u=u.L;else{if(!((a=i-Ae(u,o))>Ci)){r>-Ci?(n=u.P,e=u):a>-Ci?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var s=qe(t);if(nu.insert(n,s),n||e){if(n===e)return Le(n),e=qe(n.site),nu.insert(s,e),s.edge=e.edge=Oe(n.site,s.site),Ie(n),void Ie(e);if(!e)return void(s.edge=Oe(n.site,s.site));Le(n),Le(e);var c=n.site,l=c.x,h=c.y,f=t.x-l,p=t.y-h,d=e.site,g=d.x-l,v=d.y-h,M=2*(f*v-p*g),m=f*f+p*p,y=g*g+v*v,b={x:(v*m-p*y)/M+l,y:(f*y-g*m)/M+h};Ue(e.edge,c,d,b),s.edge=Oe(c,t,null,b),e.edge=Oe(t,d,null,b),Ie(n),Ie(e)}}function Ne(t,n){var e=t.site,r=e.x,a=e.y,i=a-n;if(!i)return r;var o=t.P;if(!o)return-1/0;var u=(e=o.site).x,s=e.y,c=s-n;if(!c)return u;var l=u-r,h=1/i-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-s+c/2+a-i/2)))/h+r:(r+u)/2}function Ae(t,n){var e=t.N;if(e)return Ne(e,n);var r=t.site;return r.y===n?r.x:1/0}function Pe(t){this.site=t,this.edges=[]}function Ce(t,n){return n.angle-t.angle}function je(){Ye(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ie(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,a=t.site,i=e.site;if(r!==i){var o=a.x,u=a.y,s=r.x-o,c=r.y-u,l=i.x-o,h=2*(s*(v=i.y-u)-c*l);if(!(h>=-ji)){var f=s*s+c*c,p=l*l+v*v,d=(v*f-c*p)/h,g=(s*p-l*f)/h,v=g+u,M=iu.pop()||new je;M.arc=t,M.site=a,M.x=d+o,M.y=v+Math.sqrt(d*d+g*g),M.cy=v,t.circle=M;for(var m=null,y=ru._;y;)if(M.y<y.y||M.y===y.y&&M.x<=y.x){if(!y.L){m=y.P;break}y=y.L}else{if(!y.R){m=y;break}y=y.R}ru.insert(m,M),m||(eu=M)}}}}function Le(t){var n=t.circle;n&&(n.P||(eu=n.N),ru.remove(n),iu.push(n),Ye(n),t.circle=null)}function De(t,n){var e=t.b;if(e)return!0;var r,a,i=t.a,o=n[0][0],u=n[1][0],s=n[0][1],c=n[1][1],l=t.l,h=t.r,f=l.x,p=l.y,d=h.x,g=h.y,v=(f+d)/2,M=(p+g)/2;if(g===p){if(o>v||v>=u)return;if(f>d){if(i){if(i.y>=c)return}else i={x:v,y:s};e={x:v,y:c}}else{if(i){if(i.y<s)return}else i={x:v,y:c};e={x:v,y:s}}}else if(a=M-(r=(f-d)/(g-p))*v,-1>r||r>1)if(f>d){if(i){if(i.y>=c)return}else i={x:(s-a)/r,y:s};e={x:(c-a)/r,y:c}}else{if(i){if(i.y<s)return}else i={x:(c-a)/r,y:c};e={x:(s-a)/r,y:s}}else if(g>p){if(i){if(i.x>=u)return}else i={x:o,y:r*o+a};e={x:u,y:r*u+a}}else{if(i){if(i.x<o)return}else i={x:u,y:r*u+a};e={x:o,y:r*o+a}}return t.a=i,t.b=e,!0}function Re(t,n){this.l=t,this.r=n,this.a=this.b=null}function Oe(t,n,e,r){var a=new Re(t,n);return Ko.push(a),e&&Ue(a,t,n,e),r&&Ue(a,n,t,r),tu[t.i].edges.push(new He(a,t,n)),tu[n.i].edges.push(new He(a,n,t)),a}function Fe(t,n,e){var r=new Re(t,null);return r.a=n,r.b=e,Ko.push(r),r}function Ue(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function He(t,n,e){var r=t.a,a=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function Qe(){this._=null}function Ye(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ve(t,n){var e=n,r=n.R,a=e.U;a?a.L===e?a.L=r:a.R=r:t._=r,r.U=a,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Be(t,n){var e=n,r=n.L,a=e.U;a?a.L===e?a.L=r:a.R=r:t._=r,r.U=a,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function We(t){for(;t.L;)t=t.L;return t}function Ge(t,n){var e,r,a,i=t.sort(Ze).pop();for(Ko=[],tu=new Array(t.length),nu=new Qe,ru=new Qe;;)if(a=eu,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===e&&i.y===r||(tu[i.i]=new Pe(i),Te(i),e=i.x,r=i.y),i=t.pop();else{if(!a)break;Ee(a.arc)}n&&(function(t){for(var n,e=Ko,r=Ln(t[0][0],t[0][1],t[1][0],t[1][1]),a=e.length;a--;)(!De(n=e[a],t)||!r(n)||vi(n.a.x-n.b.x)<Ci&&vi(n.a.y-n.b.y)<Ci)&&(n.a=n.b=null,e.splice(a,1))}(n),function(t){for(var n,e,r,a,i,o,u,s,c,l,h=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],g=tu,v=g.length;v--;)if((i=g[v])&&i.prepare())for(s=(u=i.edges).length,o=0;s>o;)r=(l=u[o].end()).x,a=l.y,n=(c=u[++o%s].start()).x,e=c.y,(vi(r-n)>Ci||vi(a-e)>Ci)&&(u.splice(o,0,new He(Fe(i.site,l,vi(r-h)<Ci&&d-a>Ci?{x:h,y:vi(n-h)<Ci?e:d}:vi(a-d)<Ci&&f-r>Ci?{x:vi(e-d)<Ci?n:f,y:d}:vi(r-f)<Ci&&a-p>Ci?{x:f,y:vi(n-f)<Ci?e:p}:vi(a-p)<Ci&&r-h>Ci?{x:vi(e-p)<Ci?n:h,y:p}:null),i.site,null)),++s)}(n));var o={cells:tu,edges:Ko};return nu=ru=Ko=tu=null,o}function Ze(t,n){return n.y-t.y||n.x-t.x}function $e(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function Xe(t){return t.x}function Je(t){return t.y}function Ke(t,n){t=oi.rgb(t),n=oi.rgb(n);var e=t.r,r=t.g,a=t.b,i=n.r-e,o=n.g-r,u=n.b-a;return function(t){return"#"+wt(Math.round(e+i*t))+wt(Math.round(r+o*t))+wt(Math.round(a+u*t))}}function tr(t,n){var e,r={},a={};for(e in t)e in n?r[e]=rr(t[e],n[e]):a[e]=t[e];for(e in n)e in t||(a[e]=n[e]);return function(t){for(e in r)a[e]=r[e](t);return a}}function nr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function er(t,n){var e,r,a,i=uu.lastIndex=su.lastIndex=0,o=-1,u=[],s=[];for(t+="",n+="";(e=uu.exec(t))&&(r=su.exec(n));)(a=r.index)>i&&(a=n.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(e=e[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:nr(e,r)})),i=su.lastIndex;return i<n.length&&(a=n.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?(n=s[0].x,function(t){return n(t)+""}):function(){return n}:(n=s.length,function(t){for(var e,r=0;n>r;++r)u[(e=s[r]).i]=e.x(t);return u.join("")})}function rr(t,n){for(var e,r=oi.interpolators.length;--r>=0&&!(e=oi.interpolators[r](t,n)););return e}function ar(t,n){var e,r=[],a=[],i=t.length,o=n.length,u=Math.min(t.length,n.length);for(e=0;u>e;++e)r.push(rr(t[e],n[e]));for(;i>e;++e)a[e]=t[e];for(;o>e;++e)a[e]=n[e];return function(t){for(e=0;u>e;++e)a[e]=r[e](t);return a}}function ir(t){return function(n){return 1-t(1-n)}}function or(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function ur(t){return t*t}function sr(t){return t*t*t}function cr(t){if(0>=t)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(.5>t?e:3*(t-n)+e-.75)}function lr(t){return 1-Math.cos(t*Ri)}function hr(t){return Math.pow(2,10*(t-1))}function fr(t){return 1-Math.sqrt(1-t*t)}function pr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function dr(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function gr(t){var n=[t.a,t.b],e=[t.c,t.d],r=Mr(n),a=vr(n,e),i=Mr(function(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}(e,n,-a))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Fi,this.translate=[t.e,t.f],this.scale=[r,i],this.skew=i?Math.atan2(a,i)*Fi:0}function vr(t,n){return t[0]*n[0]+t[1]*n[1]}function Mr(t){var n=Math.sqrt(vr(t,t));return n&&(t[0]/=n,t[1]/=n),n}function mr(t){return t.length?t.pop()+",":""}function yr(t,n){var e=[],r=[];return t=oi.transform(t),n=oi.transform(n),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var a=e.push("translate(",null,",",null,")");r.push({i:a-4,x:nr(t[0],n[0])},{i:a-2,x:nr(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}(t.translate,n.translate,e,r),function(t,n,e,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:e.push(mr(e)+"rotate(",null,")")-2,x:nr(t,n)})):n&&e.push(mr(e)+"rotate("+n+")")}(t.rotate,n.rotate,e,r),function(t,n,e,r){t!==n?r.push({i:e.push(mr(e)+"skewX(",null,")")-2,x:nr(t,n)}):n&&e.push(mr(e)+"skewX("+n+")")}(t.skew,n.skew,e,r),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var a=e.push(mr(e)+"scale(",null,",",null,")");r.push({i:a-4,x:nr(t[0],n[0])},{i:a-2,x:nr(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(mr(e)+"scale("+n+")")}(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,a=-1,i=r.length;++a<i;)e[(n=r[a]).i]=n.x(t);return e.join("")}}function br(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function xr(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function wr(t){for(var n=t.source,e=t.target,r=function(t,n){if(t===n)return t;for(var e=kr(t),r=kr(n),a=e.pop(),i=r.pop(),o=null;a===i;)o=a,a=e.pop(),i=r.pop();return o}(n,e),a=[n];n!==r;)n=n.parent,a.push(n);for(var i=a.length;e!==r;)a.splice(i,0,e),e=e.parent;return a}function kr(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function Sr(t){t.fixed|=2}function _r(t){t.fixed&=-7}function qr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function zr(t){t.fixed&=-5}function Er(t,n){return oi.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=jr,t}function Tr(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(a=t.children)&&(r=a.length))for(var r,a;--r>=0;)e.push(a[r])}function Nr(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(i=t.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)e.push(i[o]);for(;null!=(t=r.pop());)n(t)}function Ar(t){return t.children}function Pr(t){return t.value}function Cr(t,n){return n.value-t.value}function jr(t){return oi.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function Ir(t){return t.x}function Lr(t){return t.y}function Dr(t,n,e){t.y0=n,t.y=e}function Rr(t){return oi.range(t.length)}function Or(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function Fr(t){for(var n,e=1,r=0,a=t[0][1],i=t.length;i>e;++e)(n=t[e][1])>a&&(r=e,a=n);return r}function Ur(t){return t.reduce(Hr,0)}function Hr(t,n){return t+n[1]}function Qr(t,n){return Yr(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function Yr(t,n){for(var e=-1,r=+t[0],a=(t[1]-r)/n,i=[];++e<=n;)i[e]=a*e+r;return i}function Vr(t){return[oi.min(t),oi.max(t)]}function Br(t,n){return t.value-n.value}function Wr(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function Gr(t,n){t._pack_next=n,n._pack_prev=t}function Zr(t,n){var e=n.x-t.x,r=n.y-t.y,a=t.r+n.r;return.999*a*a>e*e+r*r}function $r(t){function n(t){l=Math.min(t.x-t.r,l),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(c=e.length)){var e,r,a,i,o,u,s,c,l=1/0,h=-1/0,f=1/0,p=-1/0;if(e.forEach(Xr),(r=e[0]).x=-r.r,r.y=0,n(r),c>1&&((a=e[1]).x=a.r,a.y=0,n(a),c>2))for(Kr(r,a,i=e[2]),n(i),Wr(r,i),r._pack_prev=i,Wr(i,a),a=r._pack_next,o=3;c>o;o++){Kr(r,a,i=e[o]);var d=0,g=1,v=1;for(u=a._pack_next;u!==a;u=u._pack_next,g++)if(Zr(u,i)){d=1;break}if(1==d)for(s=r._pack_prev;s!==u._pack_prev&&!Zr(s,i);s=s._pack_prev,v++);d?(v>g||g==v&&a.r<r.r?Gr(r,a=u):Gr(r=s,a),o--):(Wr(r,i),a=i,n(i))}var M=(l+h)/2,m=(f+p)/2,y=0;for(o=0;c>o;o++)(i=e[o]).x-=M,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(Jr)}}function Xr(t){t._pack_next=t._pack_prev=t}function Jr(t){delete t._pack_next,delete t._pack_prev}function Kr(t,n,e){var r=t.r+e.r,a=n.x-t.x,i=n.y-t.y;if(r&&(a||i)){var o=n.r+e.r,u=a*a+i*i,s=.5+((r*=r)-(o*=o))/(2*u),c=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);e.x=t.x+s*a+c*i,e.y=t.y+s*i-c*a}else e.x=t.x+r,e.y=t.y}function ta(t,n){return t.parent==n.parent?1:2}function na(t){var n=t.children;return n.length?n[0]:t.t}function ea(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function ra(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function aa(t,n,e){return t.a.parent===n.parent?t.a:e}function ia(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function oa(t,n){var e=t.x+n[3],r=t.y+n[0],a=t.dx-n[1]-n[3],i=t.dy-n[0]-n[2];return 0>a&&(e+=a/2,a=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:a,dy:i}}function ua(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function sa(t){return t.rangeExtent?t.rangeExtent():ua(t.range())}function ca(t,n,e,r){var a=e(t[0],t[1]),i=r(n[0],n[1]);return function(t){return i(a(t))}}function la(t,n){var e,r=0,a=t.length-1,i=t[r],o=t[a];return i>o&&(e=r,r=a,a=e,e=i,i=o,o=e),t[r]=n.floor(i),t[a]=n.ceil(o),t}function ha(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:yu}function fa(t,n,e,r){var a=[],i=[],o=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<=u;)a.push(e(t[o-1],t[o])),i.push(r(n[o-1],n[o]));return function(n){var e=oi.bisect(t,n,1,u)-1;return i[e](a[e](n))}}function pa(t,n){return oi.rebind(t,n,"range","rangeRound","interpolate","clamp")}function da(t,n){return la(t,ha(ga(t,n)[2])),la(t,ha(ga(t,n)[2])),t}function ga(t,n){null==n&&(n=10);var e=ua(t),r=e[1]-e[0],a=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),i=n/r*a;return.15>=i?a*=10:.35>=i?a*=5:.75>=i&&(a*=2),e[0]=Math.ceil(e[0]/a)*a,e[1]=Math.floor(e[1]/a)*a+.5*a,e[2]=a,e}function va(t,n){return oi.range.apply(oi,ga(t,n))}function Ma(t,n,e){var r=ga(t,n);if(e){var a=oo.exec(e);if(a.shift(),"s"===a[8]){var i=oi.formatPrefix(Math.max(vi(r[0]),vi(r[1])));return a[7]||(a[7]="."+ma(i.scale(r[2]))),a[8]="f",e=oi.format(a.join("")),function(t){return e(i.scale(t))+i.symbol}}a[7]||(a[7]="."+function(t,n){var e=ma(n[2]);return t in bu?Math.abs(e-ma(Math.max(vi(n[0]),vi(n[1]))))+ +("e"!==t):e-2*("%"===t)}(a[8],r)),e=a.join("")}else e=",."+ma(r[2])+"f";return oi.format(e)}function ma(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ya(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function ba(){return 0}function xa(t){return t.innerRadius}function wa(t){return t.outerRadius}function ka(t){return t.startAngle}function Sa(t){return t.endAngle}function _a(t){return t&&t.padAngle}function qa(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function za(t,n,e,r,a){var i=t[0]-n[0],o=t[1]-n[1],u=(a?r:-r)/Math.sqrt(i*i+o*o),s=u*o,c=-u*i,l=t[0]+s,h=t[1]+c,f=n[0]+s,p=n[1]+c,d=(l+f)/2,g=(h+p)/2,v=f-l,M=p-h,m=v*v+M*M,y=e-r,b=l*p-f*h,x=(0>M?-1:1)*Math.sqrt(Math.max(0,y*y*m-b*b)),w=(b*M-v*x)/m,k=(-b*v-M*x)/m,S=(b*M+v*x)/m,_=(-b*v+M*x)/m,q=w-d,z=k-g,E=S-d,T=_-g;return q*q+z*z>E*E+T*T&&(w=S,k=_),[[w-s,k-c],[w*e/y,k*e/y]]}function Ea(t){function n(n){function o(){c.push("M",i(t(l),u))}for(var s,c=[],l=[],h=-1,f=n.length,p=Et(e),d=Et(r);++h<f;)a.call(this,s=n[h],h)?l.push([+p.call(this,s,h),+d.call(this,s,h)]):l.length&&(o(),l=[]);return l.length&&o(),c.length?c.join(""):null}var e=me,r=ye,a=En,i=Ta,o=i.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=Eu.get(t)||Ta).key,n):o},n.tension=function(t){return arguments.length?(u=t,n):u},n}function Ta(t){return t.length>1?t.join("L"):t+"Z"}function Na(t){return t.join("L")+"Z"}function Aa(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("V",(r=t[n])[1],"H",r[0]);return a.join("")}function Pa(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("H",(r=t[n])[0],"V",r[1]);return a.join("")}function Ca(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Ta(t);var e=t.length!=n.length,r="",a=t[0],i=t[1],o=n[0],u=o,s=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=t[1],s=2),n.length>1){u=n[1],i=t[s],s++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1];for(var c=2;c<n.length;c++,s++)i=t[s],u=n[c],r+="S"+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1]}if(e){var l=t[s];r+="Q"+(i[0]+2*u[0]/3)+","+(i[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function ja(t,n){for(var e,r=[],a=(1-n)/2,i=t[0],o=t[1],u=1,s=t.length;++u<s;)e=i,i=o,o=t[u],r.push([a*(o[0]-e[0]),a*(o[1]-e[1])]);return r}function Ia(t){if(t.length<3)return Ta(t);var n=1,e=t.length,r=t[0],a=r[0],i=r[1],o=[a,a,a,(r=t[1])[0]],u=[i,i,i,r[1]],s=[a,",",i,"L",La(Au,o),",",La(Au,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Da(s,o,u);return t.pop(),s.push("L",r),s.join("")}function La(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Da(t,n,e){t.push("C",La(Tu,n),",",La(Tu,e),",",La(Nu,n),",",La(Nu,e),",",La(Au,n),",",La(Au,e))}function Ra(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Oa(t){for(var n,e,r,a,i=[],o=function(t){for(var n=0,e=t.length-1,r=[],a=t[0],i=t[1],o=r[0]=Ra(a,i);++n<e;)r[n]=(o+(o=Ra(a=i,i=t[n+1])))/2;return r[n]=o,r}(t),u=-1,s=t.length-1;++u<s;)n=Ra(t[u],t[u+1]),vi(n)<Ci?o[u]=o[u+1]=0:(a=(e=o[u]/n)*e+(r=o[u+1]/n)*r)>9&&(a=3*n/Math.sqrt(a),o[u]=a*e,o[u+1]=a*r);for(u=-1;++u<=s;)a=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),i.push([a||0,o[u]*a||0]);return i}function Fa(t){for(var n,e,r,a=-1,i=t.length;++a<i;)e=(n=t[a])[0],r=n[1]-Ri,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Ua(t){function n(n){function s(){g.push("M",u(t(M),h),l,c(t(v.reverse()),h),"Z")}for(var f,p,d,g=[],v=[],M=[],m=-1,y=n.length,b=Et(e),x=Et(a),w=e===r?function(){return p}:Et(r),k=a===i?function(){return d}:Et(i);++m<y;)o.call(this,f=n[m],m)?(v.push([p=+b.call(this,f,m),d=+x.call(this,f,m)]),M.push([+w.call(this,f,m),+k.call(this,f,m)])):v.length&&(s(),v=[],M=[]);return v.length&&s(),g.length?g.join(""):null}var e=me,r=me,a=0,i=ye,o=En,u=Ta,s=u.key,c=u,l="L",h=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(a=i=t,n):i},n.y0=function(t){return arguments.length?(a=t,n):a},n.y1=function(t){return arguments.length?(i=t,n):i},n.defined=function(t){return arguments.length?(o=t,n):o},n.interpolate=function(t){return arguments.length?(s="function"==typeof t?u=t:(u=Eu.get(t)||Ta).key,c=u.reverse||u,l=u.closed?"M":"L",n):s},n.tension=function(t){return arguments.length?(h=t,n):h},n}function Ha(t){return t.radius}function Qa(t){return[t.x,t.y]}function Ya(){return 64}function Va(){return"circle"}function Ba(t){var n=Math.sqrt(t/Ii);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Wa(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ga(t,n,e){return xi(t,Ru),t.namespace=n,t.id=e,t}function Za(t,n,e,r){var a=t.id,i=t.namespace;return G(t,"function"==typeof e?function(t,o,u){t[i][a].tween.set(n,r(e.call(t,t.__data__,o,u)))}:(e=r(e),function(t){t[i][a].tween.set(n,e)}))}function $a(t){return null==t&&(t=""),function(){this.textContent=t}}function Xa(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ja(t,n,e,r,a){function i(e){var a=f.active,i=f[a];for(var d in i&&(i.timer.c=null,i.timer.t=NaN,--f.count,delete f[a],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),f)if(r>+d){var g=f[d];g.timer.c=null,g.timer.t=NaN,--f.count,delete f[d]}s.c=o,At(function(){return s.c&&o(e||1)&&(s.c=null,s.t=NaN),1},0,u),f.active=r,p.event&&p.event.start.call(t,t.__data__,n),h=[],p.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&h.push(r)}),l=p.ease,c=p.duration}function o(a){for(var i=a/c,o=l(i),u=h.length;u>0;)h[--u].call(t,o);return i>=1?(p.event&&p.event.end.call(t,t.__data__,n),--f.count?delete f[r]:delete t[e],1):void 0}var u,s,c,l,h,f=t[e]||(t[e]={active:0,count:0}),p=f[r];p||(u=a.time,s=At(function(t){var n=p.delay;return s.t=n+u,t>=n?i(t-n):void(s.c=i)},0,u),p=f[r]={tween:new d,time:u,timer:s,delay:a.delay,duration:a.duration,ease:a.ease,index:n},a=null,++f.count)}function Ka(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function ti(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function ni(t){return t.toISOString()}function ei(t,n,e){function r(n){return t(n)}function a(t,e){var r=(t[1]-t[0])/e,a=oi.bisect(Wu,r);return a==Wu.length?[n.year,ga(t.map(function(t){return t/31536e6}),e)[2]]:a?n[r/Wu[a-1]<Wu[a]/r?a-1:a]:[$u,ga(t,e)[2]]}return r.invert=function(n){return ri(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(ri)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,ri(+e+1),n).length}var i=r.domain(),o=ua(i),u=null==t?a(o,10):"number"==typeof t&&a(o,t);return u&&(t=u[0],n=u[1]),r.domain(la(i,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=ri(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=ri(+n+1);return n}}:t))},r.ticks=function(t,n){var e=ua(r.domain()),i=null==t?a(e,10):"number"==typeof t?a(e,t):!t.range&&[{range:t},n];return i&&(t=i[0],n=i[1]),t.range(e[0],ri(+e[1]+1),1>n?1:n)},r.tickFormat=function(){return e},r.copy=function(){return ei(t.copy(),n,e)},pa(r,t)}function ri(t){return new Date(t)}function ai(t){return JSON.parse(t.responseText)}function ii(t){var n=ci.createRange();return n.selectNode(ci.body),n.createContextualFragment(t.responseText)}var oi={version:"3.5.17"},ui=[].slice,si=function(t){return ui.call(t)},ci=this.document;if(ci)try{si(ci.documentElement.childNodes)[0].nodeType}catch(t){si=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),ci)try{ci.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var li=this.Element.prototype,hi=li.setAttribute,fi=li.setAttributeNS,pi=this.CSSStyleDeclaration.prototype,di=pi.setProperty;li.setAttribute=function(t,n){hi.call(this,t,n+"")},li.setAttributeNS=function(t,n,e){fi.call(this,t,n,e+"")},pi.setProperty=function(t,n,e){di.call(this,t,n+"",e)}}oi.ascending=s,oi.descending=function(t,n){return t>n?-1:n>t?1:n>=t?0:NaN},oi.min=function(t,n){var e,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=t[a])&&r>=r){e=r;break}for(;++a<i;)null!=(r=t[a])&&e>r&&(e=r)}else{for(;++a<i;)if(null!=(r=n.call(t,t[a],a))&&r>=r){e=r;break}for(;++a<i;)null!=(r=n.call(t,t[a],a))&&e>r&&(e=r)}return e},oi.max=function(t,n){var e,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=t[a])&&r>=r){e=r;break}for(;++a<i;)null!=(r=t[a])&&r>e&&(e=r)}else{for(;++a<i;)if(null!=(r=n.call(t,t[a],a))&&r>=r){e=r;break}for(;++a<i;)null!=(r=n.call(t,t[a],a))&&r>e&&(e=r)}return e},oi.extent=function(t,n){var e,r,a,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=a=r;break}for(;++i<o;)null!=(r=t[i])&&(e>r&&(e=r),r>a&&(a=r))}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=a=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&(e>r&&(e=r),r>a&&(a=r))}return[e,a]},oi.sum=function(t,n){var e,r=0,a=t.length,i=-1;if(1===arguments.length)for(;++i<a;)l(e=+t[i])&&(r+=e);else for(;++i<a;)l(e=+n.call(t,t[i],i))&&(r+=e);return r},oi.mean=function(t,n){var e,r=0,a=t.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)l(e=c(t[i]))?r+=e:--o;else for(;++i<a;)l(e=c(n.call(t,t[i],i)))?r+=e:--o;return o?r/o:void 0},oi.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),a=+t[r-1],i=e-r;return i?a+i*(t[r]-a):a},oi.median=function(t,n){var e,r=[],a=t.length,i=-1;if(1===arguments.length)for(;++i<a;)l(e=c(t[i]))&&r.push(e);else for(;++i<a;)l(e=c(n.call(t,t[i],i)))&&r.push(e);return r.length?oi.quantile(r.sort(s),.5):void 0},oi.variance=function(t,n){var e,r,a=t.length,i=0,o=0,u=-1,s=0;if(1===arguments.length)for(;++u<a;)l(e=c(t[u]))&&(o+=(r=e-i)*(e-(i+=r/++s)));else for(;++u<a;)l(e=c(n.call(t,t[u],u)))&&(o+=(r=e-i)*(e-(i+=r/++s)));return s>1?o/(s-1):void 0},oi.deviation=function(){var t=oi.variance.apply(this,arguments);return t?Math.sqrt(t):t};var gi=h(s);oi.bisectLeft=gi.left,oi.bisect=oi.bisectRight=gi.right,oi.bisector=function(t){return h(1===t.length?function(n,e){return s(t(n),e)}:t)},oi.shuffle=function(t,n,e){(i=arguments.length)<3&&(e=t.length,2>i&&(n=0));for(var r,a,i=e-n;i;)a=Math.random()*i--|0,r=t[i+n],t[i+n]=t[a+n],t[a+n]=r;return t},oi.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},oi.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],a=new Array(0>e?0:e);e>n;)a[n]=[r,r=t[++n]];return a},oi.transpose=function(t){if(!(a=t.length))return[];for(var n=-1,e=oi.min(t,f),r=new Array(e);++n<e;)for(var a,i=-1,o=r[n]=new Array(a);++i<a;)o[i]=t[i][n];return r},oi.zip=function(){return oi.transpose(arguments)},oi.keys=function(t){var n=[];for(var e in t)n.push(e);return n},oi.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},oi.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},oi.merge=function(t){for(var n,e,r,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(e=new Array(o);--a>=0;)for(n=(r=t[a]).length;--n>=0;)e[--o]=r[n];return e};var vi=Math.abs;oi.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,a=[],i=function(t){for(var n=1;t*n%1;)n*=10;return n}(vi(e)),o=-1;if(t*=i,n*=i,0>(e*=i))for(;(r=t+e*++o)>n;)a.push(r/i);else for(;(r=t+e*++o)<n;)a.push(r/i);return a},oi.map=function(t,n){var e=new d;if(t instanceof d)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,a=-1,i=t.length;if(1===arguments.length)for(;++a<i;)e.set(a,t[a]);else for(;++a<i;)e.set(n.call(t,r=t[a],a),r)}else for(var o in t)e.set(o,t[o]);return e};var Mi="__proto__",mi="\0";p(d,{has:M,get:function(t){return this._[g(t)]},set:function(t,n){return this._[g(t)]=n},remove:m,keys:y,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:v(n),value:this._[n]});return t},size:b,empty:x,forEach:function(t){for(var n in this._)t.call(this,v(n),this._[n])}}),oi.nest=function(){function t(i,o,u){if(u>=a.length)return e?e.call(r,o):n?o.sort(n):o;for(var s,c,l,h,f=-1,p=o.length,g=a[u++],v=new d;++f<p;)(h=v.get(s=g(c=o[f])))?h.push(c):v.set(s,[c]);return i?(c=i(),l=function(n,e){c.set(n,t(i,e,u))}):(c={},l=function(n,e){c[n]=t(i,e,u)}),v.forEach(l),c}var n,e,r={},a=[],i=[];return r.map=function(n,e){return t(e,n,0)},r.entries=function(n){return function t(n,e){if(e>=a.length)return n;var r=[],o=i[e++];return n.forEach(function(n,a){r.push({key:n,values:t(a,e)})}),o?r.sort(function(t,n){return o(t.key,n.key)}):r}(t(oi.map,n,0),0)},r.key=function(t){return a.push(t),r},r.sortKeys=function(t){return i[a.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return e=t,r},r},oi.set=function(t){var n=new w;if(t)for(var e=0,r=t.length;r>e;++e)n.add(t[e]);return n},p(w,{has:M,add:function(t){return this._[g(t+="")]=!0,t},remove:m,values:y,size:b,empty:x,forEach:function(t){for(var n in this._)t.call(this,v(n))}}),oi.behavior={},oi.rebind=function(t,n){for(var e,r=1,a=arguments.length;++r<a;)t[e=arguments[r]]=S(t,n,n[e]);return t};var yi=["webkit","ms","moz","Moz","o","O"];oi.dispatch=function(){for(var t=new z,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=E(t);return t},z.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},oi.event=null,oi.requote=function(t){return t.replace(bi,"\\$&")};var bi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xi={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},wi=function(t,n){return n.querySelector(t)},ki=function(t,n){return n.querySelectorAll(t)},Si=function(t,n){var e=t.matches||t[_(t,"matchesSelector")];return(Si=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(wi=function(t,n){return Sizzle(t,n)[0]||null},ki=Sizzle,Si=Sizzle.matchesSelector),oi.selection=function(){return oi.select(ci.documentElement)};var _i=oi.selection.prototype=[];_i.select=function(t){var n,e,r,a,i=[];t=C(t);for(var o=-1,u=this.length;++o<u;){i.push(n=[]),n.parentNode=(r=this[o]).parentNode;for(var s=-1,c=r.length;++s<c;)(a=r[s])?(n.push(e=t.call(a,a.__data__,s,o)),e&&"__data__"in a&&(e.__data__=a.__data__)):n.push(null)}return P(i)},_i.selectAll=function(t){var n,e,r=[];t=j(t);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],u=-1,s=o.length;++u<s;)(e=o[u])&&(r.push(n=si(t.call(e,e.__data__,u,a))),n.parentNode=e);return P(r)};var qi="http://www.w3.org/1999/xhtml",zi={svg:"http://www.w3.org/2000/svg",xhtml:qi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oi.ns={prefix:zi,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),zi.hasOwnProperty(e)?{space:zi[e],local:t}:t}},_i.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return(t=oi.ns.qualify(t)).local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(I(n,t[n]));return this}return this.each(I(t,n))},_i.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=R(t)).length,a=-1;if(n=e.classList){for(;++a<r;)if(!n.contains(t[a]))return!1}else for(n=e.getAttribute("class");++a<r;)if(!D(t[a]).test(n))return!1;return!0}for(n in t)this.each(O(n,t[n]));return this}return this.each(O(t,n))},_i.style=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){for(e in 2>r&&(n=""),t)this.each(U(e,t[e],n));return this}if(2>r){var a=this.node();return u(a).getComputedStyle(a,null).getPropertyValue(t)}e=""}return this.each(U(t,n,e))},_i.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(H(n,t[n]));return this}return this.each(H(t,n))},_i.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},_i.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},_i.append=function(t){return t=Q(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},_i.insert=function(t,n){return t=Q(t),n=C(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},_i.remove=function(){return this.each(Y)},_i.data=function(t,n){function e(t,e){var r,a,i,o=t.length,l=e.length,h=Math.min(o,l),f=new Array(l),p=new Array(l),g=new Array(o);if(n){var v,M=new d,m=new Array(o);for(r=-1;++r<o;)(a=t[r])&&(M.has(v=n.call(a,a.__data__,r))?g[r]=a:M.set(v,a),m[r]=v);for(r=-1;++r<l;)(a=M.get(v=n.call(e,i=e[r],r)))?!0!==a&&(f[r]=a,a.__data__=i):p[r]=V(i),M.set(v,!0);for(r=-1;++r<o;)r in m&&!0!==M.get(m[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)a=t[r],i=e[r],a?(a.__data__=i,f[r]=a):p[r]=V(i);for(;l>r;++r)p[r]=V(e[r]);for(;o>r;++r)g[r]=t[r]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,u.push(p),s.push(f),c.push(g)}var r,a,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++i<o;)(a=r[i])&&(t[i]=a.__data__);return t}var u=Z([]),s=P([]),c=P([]);if("function"==typeof t)for(;++i<o;)e(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],t);return s.enter=function(){return u},s.exit=function(){return c},s},_i.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},_i.filter=function(t){var n,e,r,a=[];"function"!=typeof t&&(t=B(t));for(var i=0,o=this.length;o>i;i++){a.push(n=[]),n.parentNode=(e=this[i]).parentNode;for(var u=0,s=e.length;s>u;u++)(r=e[u])&&t.call(r,r.__data__,u,i)&&n.push(r)}return P(a)},_i.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],a=r.length-1,i=r[a];--a>=0;)(e=r[a])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},_i.sort=function(t){t=W.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},_i.each=function(t){return G(this,function(n,e,r){t.call(n,n.__data__,e,r)})},_i.call=function(t){var n=si(arguments);return t.apply(n[0]=this,n),this},_i.empty=function(){return!this.node()},_i.node=function(){for(var t=0,n=this.length;n>t;t++)for(var e=this[t],r=0,a=e.length;a>r;r++){var i=e[r];if(i)return i}return null},_i.size=function(){var t=0;return G(this,function(){++t}),t};var Ei=[];oi.selection.enter=Z,oi.selection.enter.prototype=Ei,Ei.append=_i.append,Ei.empty=_i.empty,Ei.node=_i.node,Ei.call=_i.call,Ei.size=_i.size,Ei.select=function(t){for(var n,e,r,a,i,o=[],u=-1,s=this.length;++u<s;){r=(a=this[u]).update,o.push(n=[]),n.parentNode=a.parentNode;for(var c=-1,l=a.length;++c<l;)(i=a[c])?(n.push(r[c]=e=t.call(a.parentNode,i.__data__,c,u)),e.__data__=i.__data__):n.push(null)}return P(o)},Ei.insert=function(t,n){return arguments.length<2&&(n=function(t){var n,e;return function(r,a,i){var o,u=t[i].update,s=u.length;for(i!=e&&(e=i,n=0),a>=n&&(n=a+1);!(o=u[n])&&++n<s;);return o}}(this)),_i.insert.call(this,t,n)},oi.select=function(t){var n;return"string"==typeof t?(n=[wi(t,ci)]).parentNode=ci.documentElement:(n=[t]).parentNode=o(t),P([n])},oi.selectAll=function(t){var n;return"string"==typeof t?(n=si(ki(t,ci))).parentNode=ci.documentElement:(n=si(t)).parentNode=null,P([n])},_i.on=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){for(e in 2>r&&(n=!1),t)this.each($(e,t[e],n));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each($(t,n,e))};var Ti=oi.map({mouseenter:"mouseover",mouseleave:"mouseout"});ci&&Ti.forEach(function(t){"on"+t in ci&&Ti.remove(t)});var Ni,Ai=0;oi.mouse=function(t){return tt(t,N())};var Pi=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;oi.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=N().changedTouches),n)for(var r,a=0,i=n.length;i>a;++a)if((r=n[a]).identifier===e)return tt(t,r)},oi.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",i)}function n(t,n,a,i,o){return function(){var u,s=this,c=oi.event.target.correspondingElement||oi.event.target,l=s.parentNode,h=e.of(s,arguments),f=0,p=t(),d=".drag"+(null==p?"":"-"+p),g=oi.select(a(c)).on(i+d,function(){var t,e,r=n(l,p);r&&(t=r[0]-M[0],e=r[1]-M[1],f|=t|e,M=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:t,dy:e}))}).on(o+d,function(){n(l,p)&&(g.on(i+d,null).on(o+d,null),v(f),h({type:"dragend"}))}),v=K(c),M=n(l,p);r?u=[(u=r.apply(s,arguments)).x-M[0],u.y-M[1]]:u=[0,0],h({type:"dragstart"})}}var e=A(t,"drag","dragstart","dragend"),r=null,a=n(q,oi.mouse,u,"mousemove","mouseup"),i=n(nt,oi.touch,k,"touchmove","touchend");return t.origin=function(n){return arguments.length?(r=n,t):r},oi.rebind(t,e,"on")},oi.touches=function(t,n){return arguments.length<2&&(n=N().touches),n?si(n).map(function(n){var e=tt(t,n);return e.identifier=n.identifier,e}):[]};var Ci=1e-6,ji=Ci*Ci,Ii=Math.PI,Li=2*Ii,Di=Li-Ci,Ri=Ii/2,Oi=Ii/180,Fi=180/Ii,Ui=Math.SQRT2;oi.interpolateZoom=function(t,n){var e,r,a=t[0],i=t[1],o=t[2],u=n[0],s=n[1],c=n[2],l=u-a,h=s-i,f=l*l+h*h;if(ji>f)r=Math.log(c/o)/Ui,e=function(t){return[a+t*l,i+t*h,o*Math.exp(Ui*t*r)]};else{var p=Math.sqrt(f),d=(c*c-o*o+4*f)/(2*o*2*p),g=(c*c-o*o-4*f)/(2*c*2*p),v=Math.log(Math.sqrt(d*d+1)-d),M=Math.log(Math.sqrt(g*g+1)-g);r=(M-v)/Ui,e=function(t){var n=t*r,e=ot(v),u=o/(2*p)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Ui*n+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[a+u*l,i+u*h,o*e/ot(Ui*n+v)]}}return e.duration=1e3*r,e},oi.behavior.zoom=function(){function t(t){t.on(E,l).on(Qi+".zoom",f).on("dblclick.zoom",p).on(C,h)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function e(t){k.k=Math.max(_[0],Math.min(_[1],t))}function r(t,n){n=function(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}(n),k.x+=t[0]-n[0],k.y+=t[1]-n[1]}function a(n,a,i,o){n.__chart__={x:k.x,y:k.y,k:k.k},e(Math.pow(2,o)),r(g=a,i),n=oi.select(n),q>0&&(n=n.transition().duration(q)),n.call(t.event)}function i(){b&&b.domain(y.range().map(function(t){return(t-k.x)/k.k}).map(y.invert)),w&&w.domain(x.range().map(function(t){return(t-k.y)/k.k}).map(x.invert))}function o(t){z++||t({type:"zoomstart"})}function s(t){i(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function c(t){--z||(t({type:"zoomend"}),g=null)}function l(){var t=this,e=j.of(t,arguments),a=0,i=oi.select(u(t)).on(N,function(){a=1,r(oi.mouse(t),l),s(e)}).on(P,function(){i.on(N,null).on(P,null),h(a),c(e)}),l=n(oi.mouse(t)),h=K(t);Du.call(t),o(e)}function h(){function t(){var t=oi.touches(d);return p=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function i(){var n=oi.event.target;oi.select(n).on(b,u).on(x,f),w.push(n);for(var e=oi.event.changedTouches,r=0,i=e.length;i>r;++r)v[e[r].identifier]=null;var o=t(),s=Date.now();if(1===o.length){if(500>s-m){var c=o[0];a(d,c,v[c.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),T()}m=s}else if(o.length>1){c=o[0];var l=o[1],h=c[0]-l[0],p=c[1]-l[1];M=h*h+p*p}}function u(){var t,n,a,i,o=oi.touches(d);Du.call(d);for(var u=0,c=o.length;c>u;++u,i=null)if(a=o[u],i=v[a.identifier]){if(n)break;t=a,n=i}if(i){var l=(l=a[0]-t[0])*l+(l=a[1]-t[1])*l,h=M&&Math.sqrt(l/M);t=[(t[0]+a[0])/2,(t[1]+a[1])/2],n=[(n[0]+i[0])/2,(n[1]+i[1])/2],e(h*p)}m=null,r(t,n),s(g)}function f(){if(oi.event.touches.length){for(var n=oi.event.changedTouches,e=0,r=n.length;r>e;++e)delete v[n[e].identifier];for(var a in v)return void t()}oi.selectAll(w).on(y,null),S.on(E,l).on(C,h),_(),c(g)}var p,d=this,g=j.of(d,arguments),v={},M=0,y=".zoom-"+oi.event.changedTouches[0].identifier,b="touchmove"+y,x="touchend"+y,w=[],S=oi.select(d),_=K(d);i(),o(g),S.on(E,null).on(C,i)}function f(){var t=j.of(this,arguments);M?clearTimeout(M):(Du.call(this),d=n(g=v||oi.mouse(this)),o(t)),M=setTimeout(function(){M=null,c(t)},50),T(),e(Math.pow(2,.002*Hi())*k.k),r(g,d),s(t)}function p(){}var d,g,v,M,m,y,b,x,w,k={x:0,y:0,k:1},S=[960,500],_=Yi,q=250,z=0,E="mousedown.zoom",N="mousemove.zoom",P="mouseup.zoom",C="touchstart.zoom",j=A(t,"zoomstart","zoom","zoomend");return Qi||(Qi="onwheel"in ci?(Hi=function(){return-oi.event.deltaY*(oi.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ci?(Hi=function(){return oi.event.wheelDelta},"mousewheel"):(Hi=function(){return-oi.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=j.of(this,arguments),n=k;Iu?oi.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},o(t)}).tween("zoom:zoom",function(){var e=S[0],r=S[1],a=g?g[0]:e/2,i=g?g[1]:r/2,o=oi.interpolateZoom([(a-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(a-n.x)/n.k,(i-n.y)/n.k,e/n.k]);return function(n){var r=o(n),u=e/r[2];this.__chart__=k={x:a-r[0]*u,y:i-r[1]*u,k:u},s(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=k,o(t),s(t),c(t))})},t.translate=function(n){return arguments.length?(k={x:+n[0],y:+n[1],k:k.k},i(),t):[k.x,k.y]},t.scale=function(n){return arguments.length?(k={x:k.x,y:k.y,k:null},e(+n),i(),t):k.k},t.scaleExtent=function(n){return arguments.length?(_=null==n?Yi:[+n[0],+n[1]],t):_},t.center=function(n){return arguments.length?(v=n&&[+n[0],+n[1]],t):v},t.size=function(n){return arguments.length?(S=n&&[+n[0],+n[1]],t):S},t.duration=function(n){return arguments.length?(q=+n,t):q},t.x=function(n){return arguments.length?(b=n,y=n.copy(),k={x:0,y:0,k:1},t):b},t.y=function(n){return arguments.length?(w=n,x=n.copy(),k={x:0,y:0,k:1},t):w},oi.rebind(t,j,"on")};var Hi,Qi,Yi=[0,1/0];oi.color=st,st.prototype.toString=function(){return this.rgb()+""},oi.hsl=ct;var Vi=ct.prototype=new st;Vi.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ct(this.h,this.s,this.l/t)},Vi.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ct(this.h,this.s,t*this.l)},Vi.rgb=function(){return lt(this.h,this.s,this.l)},oi.hcl=ht;var Bi=ht.prototype=new st;Bi.brighter=function(t){return new ht(this.h,this.c,Math.min(100,this.l+Wi*(arguments.length?t:1)))},Bi.darker=function(t){return new ht(this.h,this.c,Math.max(0,this.l-Wi*(arguments.length?t:1)))},Bi.rgb=function(){return ft(this.h,this.c,this.l).rgb()},oi.lab=pt;var Wi=18,Gi=.95047,Zi=1,$i=1.08883,Xi=pt.prototype=new st;Xi.brighter=function(t){return new pt(Math.min(100,this.l+Wi*(arguments.length?t:1)),this.a,this.b)},Xi.darker=function(t){return new pt(Math.max(0,this.l-Wi*(arguments.length?t:1)),this.a,this.b)},Xi.rgb=function(){return dt(this.l,this.a,this.b)},oi.rgb=yt;var Ji=yt.prototype=new st;Ji.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,a=30;return n||e||r?(n&&a>n&&(n=a),e&&a>e&&(e=a),r&&a>r&&(r=a),new yt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new yt(a,a,a)},Ji.darker=function(t){return new yt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},Ji.hsl=function(){return St(this.r,this.g,this.b)},Ji.toString=function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)};var Ki=oi.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ki.forEach(function(t,n){Ki.set(t,bt(n))}),oi.functor=Et,oi.xhr=Tt(k),oi.dsv=function(t,n){function e(t,e,i){arguments.length<3&&(i=e,e=null);var o=Nt(t,n,null==e?r:a(e),i);return o.row=function(t){return arguments.length?o.response(null==(e=t)?r:a(t)):e},o}function r(t){return e.parse(t.responseText)}function a(t){return function(n){return e.parse(n.responseText,t)}}function i(n){return n.map(o).join(t)}function o(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var a=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(a(t),e)}:a})},e.parseRows=function(t,n){function e(){if(l>=c)return o;if(a)return a=!1,i;var n=l;if(34===t.charCodeAt(n)){for(var e=n;e++<c;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}return l=e+2,13===(r=t.charCodeAt(e+1))?(a=!0,10===t.charCodeAt(e+2)&&++l):10===r&&(a=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;c>l;){var r,u=1;if(10===(r=t.charCodeAt(l++)))a=!0;else if(13===r)a=!0,10===t.charCodeAt(l)&&(++l,++u);else if(r!==s)continue;return t.slice(n,l-u)}return t.slice(n)}for(var r,a,i={},o={},u=[],c=t.length,l=0,h=0;(r=e())!==o;){for(var f=[];r!==i&&r!==o;)f.push(r),r=e();n&&null==(f=n(f,h++))||u.push(f)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new w,a=[];return n.forEach(function(t){for(var n in t)r.has(n)||a.push(r.add(n))}),[a.map(o).join(t)].concat(n.map(function(n){return a.map(function(t){return o(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(i).join("\n")},e},oi.csv=oi.dsv(",","text/csv"),oi.tsv=oi.dsv("\t","text/tab-separated-values");var to,no,eo,ro,ao=this[_(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};oi.timer=function(){At.apply(this,arguments)},oi.timer.flush=function(){Ct(),jt()},oi.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var io=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,n){var e=Math.pow(10,3*vi(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}});oi.formatPrefix=function(t,n){var e=0;return(t=+t)&&(0>t&&(t*=-1),n&&(t=oi.round(t,It(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),io[8+e/3]};var oo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,uo=oi.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=oi.round(t,It(t,n))).toFixed(Math.max(0,Math.min(20,It(t*(1+1e-15),n))))}}),so=oi.time={},co=Date;Rt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lo.setUTCDate.apply(this._,arguments)},setDay:function(){lo.setUTCDay.apply(this._,arguments)},setFullYear:function(){lo.setUTCFullYear.apply(this._,arguments)},setHours:function(){lo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){lo.setUTCSeconds.apply(this._,arguments)},setTime:function(){lo.setTime.apply(this._,arguments)}};var lo=Date.prototype;so.year=Ot(function(t){return(t=so.day(t)).setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),so.years=so.year.range,so.years.utc=so.year.utc.range,so.day=Ot(function(t){var n=new co(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),so.days=so.day.range,so.days.utc=so.day.utc.range,so.dayOfYear=function(t){var n=so.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=so[t]=Ot(function(t){return(t=so.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=so.year(t).getDay();return Math.floor((so.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});so[t+"s"]=e.range,so[t+"s"].utc=e.utc.range,so[t+"OfYear"]=function(t){var e=so.year(t).getDay();return Math.floor((so.dayOfYear(t)+(e+n)%7)/7)}}),so.week=so.sunday,so.weeks=so.sunday.range,so.weeks.utc=so.sunday.utc.range,so.weekOfYear=so.sundayOfYear;var ho={"-":"",_:" ",0:"0"},fo=/^\s*\d+/,po=/^%/;oi.locale=function(t){return{numberFormat:Lt(t),timeFormat:Ut(t)}};var go=oi.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});oi.format=go.numberFormat,oi.geo={},sn.prototype={s:0,t:0,add:function(t){cn(t,this.t,vo),cn(vo.s,this.s,this),this.s?this.t+=vo.t:this.s=vo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var vo=new sn;oi.geo.stream=function(t,n){t&&Mo.hasOwnProperty(t.type)?Mo[t.type](t,n):ln(t,n)};var Mo={Feature:function(t,n){ln(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,a=e.length;++r<a;)ln(e[r].geometry,n)}},mo={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){hn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)hn(e[r],n,0)},Polygon:function(t,n){fn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)fn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,a=e.length;++r<a;)ln(e[r],n)}};oi.geo.area=function(t){return yo=0,oi.geo.stream(t,xo),yo};var yo,bo=new sn,xo={sphere:function(){yo+=4*Ii},point:q,lineStart:q,lineEnd:q,polygonStart:function(){bo.reset(),xo.lineStart=pn},polygonEnd:function(){var t=2*bo;yo+=0>t?4*Ii+t:t,xo.lineStart=xo.lineEnd=xo.point=q}};oi.geo.bounds=function(){function t(t,n){y.push(b=[l=t,f=t]),h>n&&(h=n),n>p&&(p=n)}function n(n,e){var r=dn([n*Oi,e*Oi]);if(M){var a=vn(M,r),i=vn([a[1],-a[0],0],a);yn(i),i=bn(i);var o=n-d,s=o>0?1:-1,c=i[0]*Fi*s,g=vi(o)>180;if(g^(c>s*d&&s*n>c))(v=i[1]*Fi)>p&&(p=v);else if(g^((c=(c+360)%360-180)>s*d&&s*n>c)){var v=-i[1]*Fi;h>v&&(h=v)}else h>e&&(h=e),e>p&&(p=e);g?d>n?u(l,n)>u(l,f)&&(f=n):u(n,f)>u(l,f)&&(l=n):f>=l?(l>n&&(l=n),n>f&&(f=n)):n>d?u(l,n)>u(l,f)&&(f=n):u(n,f)>u(l,f)&&(l=n)}else t(n,e);M=r,d=n}function e(){x.point=n}function r(){b[0]=l,b[1]=f,x.point=t,M=null}function a(t,e){if(M){var r=t-d;m+=vi(r)>180?r+(r>0?360:-360):r}else g=t,v=e;xo.point(t,e),n(t,e)}function i(){xo.lineStart()}function o(){a(g,v),xo.lineEnd(),vi(m)>Ci&&(l=-(f=180)),b[0]=l,b[1]=f,M=null}function u(t,n){return(n-=t)<0?n+360:n}function s(t,n){return t[0]-n[0]}function c(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var l,h,f,p,d,g,v,M,m,y,b,x={point:t,lineStart:e,lineEnd:r,polygonStart:function(){x.point=a,x.lineStart=i,x.lineEnd=o,m=0,xo.polygonStart()},polygonEnd:function(){xo.polygonEnd(),x.point=t,x.lineStart=e,x.lineEnd=r,0>bo?(l=-(f=180),h=-(p=90)):m>Ci?p=90:-Ci>m&&(h=-90),b[0]=l,b[1]=f}};return function(t){if(p=f=-(l=h=1/0),y=[],oi.geo.stream(t,x),i=y.length){y.sort(s);for(var n=1,e=[d=y[0]];i>n;++n)c((a=y[n])[0],d)||c(a[1],d)?(u(d[0],a[1])>u(d[0],d[1])&&(d[1]=a[1]),u(a[0],d[1])>u(d[0],d[1])&&(d[0]=a[0])):e.push(d=a);for(var r,a,i,o=-1/0,d=(n=0,e[i=e.length-1]);i>=n;d=a,++n)a=e[n],(r=u(d[1],a[0]))>o&&(o=r,l=a[0],f=d[1])}return y=b=null,l===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,h],[f,p]]}}(),oi.geo.centroid=function(t){wo=ko=So=_o=qo=zo=Eo=To=No=Ao=Po=0,oi.geo.stream(t,Co);var n=No,e=Ao,r=Po,a=n*n+e*e+r*r;return ji>a&&(n=zo,e=Eo,r=To,Ci>ko&&(n=So,e=_o,r=qo),ji>(a=n*n+e*e+r*r))?[NaN,NaN]:[Math.atan2(e,n)*Fi,it(r/Math.sqrt(a))*Fi]};var wo,ko,So,_o,qo,zo,Eo,To,No,Ao,Po,Co={sphere:q,point:wn,lineStart:Sn,lineEnd:_n,polygonStart:function(){Co.lineStart=qn},polygonEnd:function(){Co.lineStart=Sn}},jo=Pn(En,function(t){var n,e=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(i,o){var u=i>0?Ii:-Ii,s=vi(i-e);vi(s-Ii)<Ci?(t.point(e,r=(r+o)/2>0?Ri:-Ri),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(i,r),n=0):a!==u&&s>=Ii&&(vi(e-a)<Ci&&(e-=a*Ci),vi(i-u)<Ci&&(i-=u*Ci),r=function(t,n,e,r){var a,i,o=Math.sin(t-e);return vi(o)>Ci?Math.atan((Math.sin(n)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(a=Math.cos(n))*Math.sin(t))/(a*i*o)):(n+r)/2}(e,r,i,o),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=i,r=o),a=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var a;if(null==t)a=e*Ri,r.point(-Ii,a),r.point(0,a),r.point(Ii,a),r.point(Ii,0),r.point(Ii,-a),r.point(0,-a),r.point(-Ii,-a),r.point(-Ii,0),r.point(-Ii,a);else if(vi(t[0]-n[0])>Ci){var i=t[0]<n[0]?Ii:-Ii;a=e*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(n[0],n[1])},[-Ii,-Ii/2]),Io=1e9;oi.geo.clipExtent=function(){var t,n,e,r,a,i,o={stream:function(t){return a&&(a.valid=!1),(a=i(t)).valid=!0,a},extent:function(u){return arguments.length?(i=Dn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),a&&(a.valid=!1,a=null),o):[[t,n],[e,r]]}};return o.extent([[0,0],[960,500]])},(oi.geo.conicEqualArea=function(){return Rn(On)}).raw=On,oi.geo.albers=function(){return oi.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oi.geo.albersUsa=function(){function t(t){var i=t[0],o=t[1];return n=null,e(i,o),n||(r(i,o),n)||a(i,o),n}var n,e,r,a,i=oi.geo.albers(),o=oi.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=oi.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=i.scale(),e=i.translate(),r=(t[0]-e[0])/n,a=(t[1]-e[1])/n;return(a>=.12&&.234>a&&r>=-.425&&-.214>r?o:a>=.166&&.234>a&&r>=-.214&&-.115>r?u:i).invert(t)},t.stream=function(t){var n=i.stream(t),e=o.stream(t),r=u.stream(t);return{point:function(t,a){n.point(t,a),e.point(t,a),r.point(t,a)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(i.precision(n),o.precision(n),u.precision(n),t):i.precision()},t.scale=function(n){return arguments.length?(i.scale(n),o.scale(.35*n),u.scale(n),t.translate(i.translate())):i.scale()},t.translate=function(n){if(!arguments.length)return i.translate();var c=i.scale(),l=+n[0],h=+n[1];return e=i.translate(n).clipExtent([[l-.455*c,h-.238*c],[l+.455*c,h+.238*c]]).stream(s).point,r=o.translate([l-.307*c,h+.201*c]).clipExtent([[l-.425*c+Ci,h+.12*c+Ci],[l-.214*c-Ci,h+.234*c-Ci]]).stream(s).point,a=u.translate([l-.205*c,h+.212*c]).clipExtent([[l-.214*c+Ci,h+.166*c+Ci],[l-.115*c-Ci,h+.234*c-Ci]]).stream(s).point,t},t.scale(1070)};var Lo,Do,Ro,Oo,Fo,Uo,Ho={point:q,lineStart:q,lineEnd:q,polygonStart:function(){Do=0,Ho.lineStart=Fn},polygonEnd:function(){Ho.lineStart=Ho.lineEnd=Ho.point=q,Lo+=vi(Do/2)}},Qo={point:function(t,n){Ro>t&&(Ro=t),t>Fo&&(Fo=t),Oo>n&&(Oo=n),n>Uo&&(Uo=n)},lineStart:q,lineEnd:q,polygonStart:q,polygonEnd:q},Yo={point:Qn,lineStart:Yn,lineEnd:Vn,polygonStart:function(){Yo.lineStart=Bn},polygonEnd:function(){Yo.point=Qn,Yo.lineStart=Yn,Yo.lineEnd=Vn}};oi.geo.path=function(){function t(t){return t&&("function"==typeof u&&i.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=a(i)),oi.geo.stream(t,o)),i.result()}function n(){return o=null,t}var e,r,a,i,o,u=4.5;return t.area=function(t){return Lo=0,oi.geo.stream(t,a(Ho)),Lo},t.centroid=function(t){return So=_o=qo=zo=Eo=To=No=Ao=Po=0,oi.geo.stream(t,a(Yo)),Po?[No/Po,Ao/Po]:To?[zo/To,Eo/To]:qo?[So/qo,_o/qo]:[NaN,NaN]},t.bounds=function(t){return Fo=Uo=-(Ro=Oo=1/0),oi.geo.stream(t,a(Qo)),[[Ro,Oo],[Fo,Uo]]},t.projection=function(t){return arguments.length?(a=(e=t)?t.stream||function(t){var n=Gn(function(n,e){return t([n*Fi,e*Fi])});return function(t){return Kn(n(t))}}(t):k,n()):e},t.context=function(t){return arguments.length?(i=null==(r=t)?new Un:new Wn(t),"function"!=typeof u&&i.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(i.pointRadius(+n),+n),t):u},t.projection(oi.geo.albersUsa()).context(null)},oi.geo.transform=function(t){return{stream:function(n){var e=new Zn(n);for(var r in t)e[r]=t[r];return e}}},Zn.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oi.geo.projection=Xn,oi.geo.projectionMutator=Jn,(oi.geo.equirectangular=function(){return Xn(te)}).raw=te.invert=te,oi.geo.rotation=function(t){function n(n){return(n=t(n[0]*Oi,n[1]*Oi))[0]*=Fi,n[1]*=Fi,n}return t=ee(t[0]%360*Oi,t[1]*Oi,t.length>2?t[2]*Oi:0),n.invert=function(n){return(n=t.invert(n[0]*Oi,n[1]*Oi))[0]*=Fi,n[1]*=Fi,n},n},ne.invert=te,oi.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=ee(-t[0]*Oi,-t[1]*Oi,0).invert,a=[];return e(null,null,1,{point:function(t,e){a.push(t=n(t,e)),t[0]*=Fi,t[1]*=Fi}}),{type:"Polygon",coordinates:[a]}}var n,e,r=[0,0],a=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=oe((n=+r)*Oi,a*Oi),t):n},t.precision=function(r){return arguments.length?(e=oe(n*Oi,(a=+r)*Oi),t):a},t.angle(90)},oi.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Oi,a=t[1]*Oi,i=n[1]*Oi,o=Math.sin(r),u=Math.cos(r),s=Math.sin(a),c=Math.cos(a),l=Math.sin(i),h=Math.cos(i);return Math.atan2(Math.sqrt((e=h*o)*e+(e=c*l-s*h*u)*e),s*l+c*h*u)},oi.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return oi.range(Math.ceil(i/v)*v,a,v).map(f).concat(oi.range(Math.ceil(c/M)*M,s,M).map(p)).concat(oi.range(Math.ceil(r/d)*d,e,d).filter(function(t){return vi(t%v)>Ci}).map(l)).concat(oi.range(Math.ceil(u/g)*g,o,g).filter(function(t){return vi(t%M)>Ci}).map(h))}var e,r,a,i,o,u,s,c,l,h,f,p,d=10,g=d,v=90,M=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(p(s).slice(1),f(a).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(i=+n[0][0],a=+n[1][0],c=+n[0][1],s=+n[1][1],i>a&&(n=i,i=a,a=n),c>s&&(n=c,c=s,s=n),t.precision(m)):[[i,c],[a,s]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],o=+n[1][1],r>e&&(n=r,r=e,e=n),u>o&&(n=u,u=o,o=n),t.precision(m)):[[r,u],[e,o]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],M=+n[1],t):[v,M]},t.minorStep=function(n){return arguments.length?(d=+n[0],g=+n[1],t):[d,g]},t.precision=function(n){return arguments.length?(m=+n,l=se(u,o,90),h=ce(r,e,m),f=se(c,s,90),p=ce(i,a,m),t):m},t.majorExtent([[-180,-90+Ci],[180,90-Ci]]).minorExtent([[-180,-80-Ci],[180,80+Ci]])},oi.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||a.apply(this,arguments)]}}var n,e,r=le,a=he;return t.distance=function(){return oi.geo.distance(n||r.apply(this,arguments),e||a.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(a=n,e="function"==typeof n?null:n,t):a},t.precision=function(){return arguments.length?t:0},t},oi.geo.interpolate=function(t,n){return function(t,n,e,r){var a=Math.cos(n),i=Math.sin(n),o=Math.cos(r),u=Math.sin(r),s=a*Math.cos(t),c=a*Math.sin(t),l=o*Math.cos(e),h=o*Math.sin(e),f=2*Math.asin(Math.sqrt(ut(r-n)+a*o*ut(e-t))),p=1/Math.sin(f),d=f?function(t){var n=Math.sin(t*=f)*p,e=Math.sin(f-t)*p,r=e*s+n*l,a=e*c+n*h,o=e*i+n*u;return[Math.atan2(a,r)*Fi,Math.atan2(o,Math.sqrt(r*r+a*a))*Fi]}:function(){return[t*Fi,n*Fi]};return d.distance=f,d}(t[0]*Oi,t[1]*Oi,n[0]*Oi,n[1]*Oi)},oi.geo.length=function(t){return Vo=0,oi.geo.stream(t,Bo),Vo};var Vo,Bo={sphere:q,point:q,lineStart:function(){function t(t,a){var i=Math.sin(a*=Oi),o=Math.cos(a),u=vi((t*=Oi)-n),s=Math.cos(u);Vo+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*i-e*o*s)*u),e*i+r*o*s),n=t,e=i,r=o}var n,e,r;Bo.point=function(a,i){n=a*Oi,e=Math.sin(i*=Oi),r=Math.cos(i),Bo.point=t},Bo.lineEnd=function(){Bo.point=Bo.lineEnd=q}},lineEnd:q,polygonStart:q,polygonEnd:q},Wo=fe(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(oi.geo.azimuthalEqualArea=function(){return Xn(Wo)}).raw=Wo;var Go=fe(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},k);(oi.geo.azimuthalEquidistant=function(){return Xn(Go)}).raw=Go,(oi.geo.conicConformal=function(){return Rn(pe)}).raw=pe,(oi.geo.conicEquidistant=function(){return Rn(de)}).raw=de;var Zo=fe(function(t){return 1/t},Math.atan);(oi.geo.gnomonic=function(){return Xn(Zo)}).raw=Zo,ge.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Ri]},(oi.geo.mercator=function(){return ve(ge)}).raw=ge;var $o=fe(function(){return 1},Math.asin);(oi.geo.orthographic=function(){return Xn($o)}).raw=$o;var Xo=fe(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(oi.geo.stereographic=function(){return Xn(Xo)}).raw=Xo,Me.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Ri]},(oi.geo.transverseMercator=function(){var t=ve(Me),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90])}).raw=Me,oi.geom={},oi.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,a=Et(e),i=Et(r),o=t.length,u=[],s=[];for(n=0;o>n;n++)u.push([+a.call(this,t[n],n),+i.call(this,t[n],n),n]);for(u.sort(xe),n=0;o>n;n++)s.push([u[n][0],-u[n][1]]);var c=be(u),l=be(s),h=l[0]===c[0],f=l[l.length-1]===c[c.length-1],p=[];for(n=c.length-1;n>=0;--n)p.push(t[u[c[n]][2]]);for(n=+h;n<l.length-f;++n)p.push(t[u[l[n]][2]]);return p}var e=me,r=ye;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},oi.geom.polygon=function(t){return xi(t,Jo),t};var Jo=oi.geom.polygon.prototype=[];Jo.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],a=0;++n<e;)t=r,r=this[n],a+=t[1]*r[0]-t[0]*r[1];return.5*a},Jo.centroid=function(t){var n,e,r=-1,a=this.length,i=0,o=0,u=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++r<a;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],i+=(n[0]+u[0])*e,o+=(n[1]+u[1])*e;return[i*t,o*t]},Jo.clip=function(t){for(var n,e,r,a,i,o,u=Se(t),s=-1,c=this.length-Se(this),l=this[c-1];++s<c;){for(n=t.slice(),t.length=0,a=this[s],i=n[(r=n.length-u)-1],e=-1;++e<r;)we(o=n[e],l,a)?(we(i,l,a)||t.push(ke(i,o,l,a)),t.push(o)):we(i,l,a)&&t.push(ke(i,o,l,a)),i=o;u&&t.push(t[0]),l=a}return t};var Ko,tu,nu,eu,ru,au=[],iu=[];Pe.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)(t=n[e].edge).b&&t.a||n.splice(e,1);return n.sort(Ce),n.length},He.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Qe.prototype={insert:function(t,n){var e,r,a;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=We(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(a=r.R)&&a.C?(e.C=a.C=!1,r.C=!0,t=r):(t===e.R&&(Ve(this,e),e=(t=e).U),e.C=!1,r.C=!0,Be(this,r)):(a=r.L)&&a.C?(e.C=a.C=!1,r.C=!0,t=r):(t===e.L&&(Be(this,e),e=(t=e).U),e.C=!1,r.C=!0,Ve(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,a=t.U,i=t.L,o=t.R;if(e=i?o?We(o):i:o,a?a.L===t?a.L=e:a.R=e:this._=e,i&&o?(r=e.C,e.C=t.C,e.L=i,i.U=e,e!==o?(a=e.U,e.U=t.U,t=e.R,a.L=t,e.R=o,o.U=e):(e.U=a,a=e,t=e.R)):(r=t.C,t=e),t&&(t.U=a),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===a.L){if((n=a.R).C&&(n.C=!1,a.C=!0,Ve(this,a),n=a.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,Be(this,n),n=a.R),n.C=a.C,a.C=n.R.C=!1,Ve(this,a),t=this._;break}}else if((n=a.L).C&&(n.C=!1,a.C=!0,Be(this,a),n=a.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,Ve(this,n),n=a.L),n.C=a.C,a.C=n.L.C=!1,Be(this,a),t=this._;break}n.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},oi.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],a=u[0][1],i=u[1][0],o=u[1][1];return Ge(e(t),u).cells.forEach(function(e,u){var s=e.edges,c=e.site;(n[u]=s.length?s.map(function(t){var n=t.start();return[n.x,n.y]}):c.x>=r&&c.x<=i&&c.y>=a&&c.y<=o?[[r,o],[i,o],[i,a],[r,a]]:[]).point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(i(t,n)/Ci)*Ci,y:Math.round(o(t,n)/Ci)*Ci,i:n}})}var r=me,a=ye,i=r,o=a,u=ou;return t?n(t):(n.links=function(t){return Ge(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return Ge(e(t)).cells.forEach(function(e,r){for(var a,i=e.site,o=e.edges.sort(Ce),u=-1,s=o.length,c=o[s-1].edge,l=c.l===i?c.r:c.l;++u<s;)c,a=l,l=(c=o[u].edge).l===i?c.r:c.l,r<a.i&&r<l.i&&$e(i,a,l)<0&&n.push([t[r],t[a.i],t[l.i]])}),n},n.x=function(t){return arguments.length?(i=Et(r=t),n):r},n.y=function(t){return arguments.length?(o=Et(a=t),n):a},n.clipExtent=function(t){return arguments.length?(u=null==t?ou:t,n):u===ou?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===ou?null:u&&u[1]},n)};var ou=[[-1e6,-1e6],[1e6,1e6]];oi.geom.delaunay=function(t){return oi.geom.voronoi().triangles(t)},oi.geom.quadtree=function(t,n,e,r,a){function i(t){function i(t,n,e,r,a,i,o,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var s=t.x,l=t.y;if(null!=s)if(vi(s-e)+vi(l-r)<.01)c(t,n,e,r,a,i,o,u);else{var h=t.point;t.x=t.y=t.point=null,c(t,h,s,l,a,i,o,u),c(t,n,e,r,a,i,o,u)}else t.x=e,t.y=r,t.point=n}else c(t,n,e,r,a,i,o,u)}function c(t,n,e,r,a,o,u,s){var c=.5*(a+u),l=.5*(o+s),h=e>=c,f=r>=l,p=f<<1|h;t.leaf=!1,h?a=c:u=c,f?o=l:s=l,i(t=t.nodes[p]||(t.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),n,e,r,a,o,u,s)}var l,h,f,p,d,g,v,M,m,y=Et(u),b=Et(s);if(null!=n)g=n,v=e,M=r,m=a;else if(M=m=-(g=v=1/0),h=[],f=[],d=t.length,o)for(p=0;d>p;++p)(l=t[p]).x<g&&(g=l.x),l.y<v&&(v=l.y),l.x>M&&(M=l.x),l.y>m&&(m=l.y),h.push(l.x),f.push(l.y);else for(p=0;d>p;++p){var x=+y(l=t[p],p),w=+b(l,p);g>x&&(g=x),v>w&&(v=w),x>M&&(M=x),w>m&&(m=w),h.push(x),f.push(w)}var k=M-g,S=m-v;k>S?m=v+k:M=g+S;var _={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){i(_,t,+y(t,++p),+b(t,p),g,v,M,m)}};if(_.visit=function(t){!function t(n,e,r,a,i,o){if(!n(e,r,a,i,o)){var u=.5*(r+i),s=.5*(a+o),c=e.nodes;c[0]&&t(n,c[0],r,a,u,s),c[1]&&t(n,c[1],u,a,i,s),c[2]&&t(n,c[2],r,s,u,o),c[3]&&t(n,c[3],u,s,i,o)}}(t,_,g,v,M,m)},_.find=function(t){return function(t,n,e,r,a,i,o){var u,s=1/0;return function t(c,l,h,f,p){if(!(l>i||h>o||r>f||a>p)){if(d=c.point){var d,g=n-c.x,v=e-c.y,M=g*g+v*v;if(s>M){var m=Math.sqrt(s=M);r=n-m,a=e-m,i=n+m,o=e+m,u=d}}for(var y=c.nodes,b=.5*(l+f),x=.5*(h+p),w=(e>=x)<<1|n>=b,k=w+4;k>w;++w)if(c=y[3&w])switch(3&w){case 0:t(c,l,h,b,x);break;case 1:t(c,b,h,f,x);break;case 2:t(c,l,x,b,p);break;case 3:t(c,b,x,f,p)}}}(t,r,a,i,o),u}(_,t[0],t[1],g,v,M,m)},p=-1,null==n){for(;++p<d;)i(_,t[p],h[p],f[p],g,v,M,m);--p}else t.forEach(_.add);return h=f=t=l=null,_}var o,u=me,s=ye;return(o=arguments.length)?(u=Xe,s=Je,3===o&&(a=e,r=n,e=n=0),i(t)):(i.x=function(t){return arguments.length?(u=t,i):u},i.y=function(t){return arguments.length?(s=t,i):s},i.extent=function(t){return arguments.length?(null==t?n=e=r=a=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],a=+t[1][1]),i):null==n?null:[[n,e],[r,a]]},i.size=function(t){return arguments.length?(null==t?n=e=r=a=null:(n=e=0,r=+t[0],a=+t[1]),i):null==n?null:[r-n,a-e]},i)},oi.interpolateRgb=Ke,oi.interpolateObject=tr,oi.interpolateNumber=nr,oi.interpolateString=er;var uu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,su=new RegExp(uu.source,"g");oi.interpolate=rr,oi.interpolators=[function(t,n){var e=i(n);return("string"===e?Ki.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?Ke:er:n instanceof st?Ke:Array.isArray(n)?ar:"object"===e&&isNaN(n)?tr:nr)(t,n)}],oi.interpolateArray=ar;var cu=function(){return k},lu=oi.map({linear:cu,poly:function(t){return function(n){return Math.pow(n,t)}},quad:function(){return ur},cubic:function(){return sr},sin:function(){return lr},exp:function(){return hr},circle:function(){return fr},elastic:function(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Li*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Li/n)}},back:function(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}},bounce:function(){return pr}}),hu=oi.map({in:k,out:ir,"in-out":or,"out-in":function(t){return or(ir(t))}});oi.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=lu.get(e)||cu,function(t){return function(n){return 0>=n?0:n>=1?1:t(n)}}((r=hu.get(r)||k)(e.apply(null,ui.call(arguments,1))))},oi.interpolateHcl=function(t,n){t=oi.hcl(t),n=oi.hcl(n);var e=t.h,r=t.c,a=t.l,i=n.h-e,o=n.c-r,u=n.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?n.c:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):i>180?i-=360:-180>i&&(i+=360),function(t){return ft(e+i*t,r+o*t,a+u*t)+""}},oi.interpolateHsl=function(t,n){t=oi.hsl(t),n=oi.hsl(n);var e=t.h,r=t.s,a=t.l,i=n.h-e,o=n.s-r,u=n.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?n.s:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):i>180?i-=360:-180>i&&(i+=360),function(t){return lt(e+i*t,r+o*t,a+u*t)+""}},oi.interpolateLab=function(t,n){t=oi.lab(t),n=oi.lab(n);var e=t.l,r=t.a,a=t.b,i=n.l-e,o=n.a-r,u=n.b-a;return function(t){return dt(e+i*t,r+o*t,a+u*t)+""}},oi.interpolateRound=dr,oi.transform=function(t){var n=ci.createElementNS(oi.ns.prefix.svg,"g");return(oi.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new gr(e?e.matrix:fu)})(t)},gr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fu={a:1,b:0,c:0,d:1,e:0,f:0};oi.interpolateTransform=yr,oi.layout={},oi.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(wr(t[e]));return n}},oi.layout.chord=function(){function t(){var t,c,h,f,p,d={},g=[],v=oi.range(i),M=[];for(e=[],r=[],t=0,f=-1;++f<i;){for(c=0,p=-1;++p<i;)c+=a[f][p];g.push(c),M.push(oi.range(i)),t+=c}for(o&&v.sort(function(t,n){return o(g[t],g[n])}),u&&M.forEach(function(t,n){t.sort(function(t,e){return u(a[n][t],a[n][e])})}),t=(Li-l*i)/t,c=0,f=-1;++f<i;){for(h=c,p=-1;++p<i;){var m=v[f],y=M[m][p],b=a[m][y],x=c,w=c+=b*t;d[m+"-"+y]={index:m,subindex:y,startAngle:x,endAngle:w,value:b}}r[m]={index:m,startAngle:h,endAngle:c,value:g[m]},c+=l}for(f=-1;++f<i;)for(p=f-1;++p<i;){var k=d[f+"-"+p],S=d[p+"-"+f];(k.value||S.value)&&e.push(k.value<S.value?{source:S,target:k}:{source:k,target:S})}s&&n()}function n(){e.sort(function(t,n){return s((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,a,i,o,u,s,c={},l=0;return c.matrix=function(t){return arguments.length?(i=(a=t)&&a.length,e=r=null,c):a},c.padding=function(t){return arguments.length?(l=t,e=r=null,c):l},c.sortGroups=function(t){return arguments.length?(o=t,e=r=null,c):o},c.sortSubgroups=function(t){return arguments.length?(u=t,e=null,c):u},c.sortChords=function(t){return arguments.length?(s=t,e&&n(),c):s},c.chords=function(){return e||t(),e},c.groups=function(){return r||t(),r},c},oi.layout.force=function(){function t(t){return function(n,e,r,a){if(n.point!==t){var i=n.cx-t.x,o=n.cy-t.y,u=a-e,s=i*i+o*o;if(s>u*u/M){if(g>s){var c=n.charge/s;t.px-=i*c,t.py-=o*c}return!0}if(n.point&&s&&g>s){c=n.pointCharge/s;t.px-=i*c,t.py-=o*c}}return!n.charge}}function n(t){t.px=oi.event.x,t.py=oi.event.y,s.resume()}var e,r,a,i,o,u,s={},c=oi.dispatch("start","tick","end"),l=[1,1],h=.9,f=pu,p=du,d=-30,g=gu,v=.1,M=.64,m=[],y=[];return s.tick=function(){if((a*=.99)<.005)return e=null,c.end({type:"end",alpha:a=0}),!0;var n,r,s,f,p,g,M,b,x,w=m.length,k=y.length;for(r=0;k>r;++r)f=(s=y[r]).source,(g=(b=(p=s.target).x-f.x)*b+(x=p.y-f.y)*x)&&(b*=g=a*o[r]*((g=Math.sqrt(g))-i[r])/g,x*=g,p.x-=b*(M=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=x*M,f.x+=b*(M=1-M),f.y+=x*M);if((M=a*v)&&(b=l[0]/2,x=l[1]/2,r=-1,M))for(;++r<w;)(s=m[r]).x+=(b-s.x)*M,s.y+=(x-s.y)*M;if(d)for(function t(n,e,r){var a=0,i=0;if(n.charge=0,!n.leaf)for(var o,u=n.nodes,s=u.length,c=-1;++c<s;)null!=(o=u[c])&&(t(o,e,r),n.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=e*r[n.point.index];n.charge+=n.pointCharge=l,a+=l*n.point.x,i+=l*n.point.y}n.cx=a/n.charge,n.cy=i/n.charge}(n=oi.geom.quadtree(m),a,u),r=-1;++r<w;)(s=m[r]).fixed||n.visit(t(s));for(r=-1;++r<w;)(s=m[r]).fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*h,s.y-=(s.py-(s.py=s.y))*h);c.tick({type:"tick",alpha:a})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.friction=function(t){return arguments.length?(h=+t,s):h},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.gravity=function(t){return arguments.length?(v=+t,s):v},s.theta=function(t){return arguments.length?(M=t*t,s):Math.sqrt(M)},s.alpha=function(t){return arguments.length?(t=+t,a?t>0?a=t:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:a=0})):t>0&&(c.start({type:"start",alpha:a=t}),e=At(s.tick)),s):a},s.start=function(){function t(t,r){if(!e){for(e=new Array(a),s=0;a>s;++s)e[s]=[];for(s=0;c>s;++s){var i=y[s];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var o,u=e[n],s=-1,l=u.length;++s<l;)if(!isNaN(o=u[s][t]))return o;return Math.random()*r}var n,e,r,a=m.length,c=y.length,h=l[0],g=l[1];for(n=0;a>n;++n)(r=m[n]).index=n,r.weight=0;for(n=0;c>n;++n)"number"==typeof(r=y[n]).source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;a>n;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",h)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof f)for(n=0;c>n;++n)i[n]=+f.call(this,y[n],n);else for(n=0;c>n;++n)i[n]=f;if(o=[],"function"==typeof p)for(n=0;c>n;++n)o[n]=+p.call(this,y[n],n);else for(n=0;c>n;++n)o[n]=p;if(u=[],"function"==typeof d)for(n=0;a>n;++n)u[n]=+d.call(this,m[n],n);else for(n=0;a>n;++n)u[n]=d;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return r||(r=oi.behavior.drag().origin(k).on("dragstart.force",Sr).on("drag.force",n).on("dragend.force",_r)),arguments.length?void this.on("mouseover.force",qr).on("mouseout.force",zr).call(r):r},oi.rebind(s,c,"on")};var pu=20,du=1,gu=1/0;oi.layout.hierarchy=function(){function t(a){var i,o=[a],u=[];for(a.depth=0;null!=(i=o.pop());)if(u.push(i),(c=e.call(t,i,i.depth))&&(s=c.length)){for(var s,c,l;--s>=0;)o.push(l=c[s]),l.parent=i,l.depth=i.depth+1;r&&(i.value=0),i.children=c}else r&&(i.value=+r.call(t,i,i.depth)||0),delete i.children;return Nr(a,function(t){var e,a;n&&(e=t.children)&&e.sort(n),r&&(a=t.parent)&&(a.value+=t.value)}),u}var n=Cr,e=Ar,r=Pr;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(Tr(n,function(t){t.children&&(t.value=0)}),Nr(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},oi.layout.partition=function(){function t(t,r){var a=n.call(this,t,r);return function t(n,e,r,a){var i=n.children;if(n.x=e,n.y=n.depth*a,n.dx=r,n.dy=a,i&&(o=i.length)){var o,u,s,c=-1;for(r=n.value?r/n.value:0;++c<o;)t(u=i[c],e,s=u.value*r,a),e+=s}}(a[0],0,e[0],e[1]/function t(n){var e=n.children,r=0;if(e&&(a=e.length))for(var a,i=-1;++i<a;)r=Math.max(r,t(e[i]));return 1+r}(a[0])),a}var n=oi.layout.hierarchy(),e=[1,1];return t.size=function(n){return arguments.length?(e=n,t):e},Er(t,n)},oi.layout.pie=function(){function t(o){var u,s=o.length,c=o.map(function(e,r){return+n.call(t,e,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof a?a.apply(this,arguments):a)-l,f=Math.min(Math.abs(h)/s,+("function"==typeof i?i.apply(this,arguments):i)),p=f*(0>h?-1:1),d=oi.sum(c),g=d?(h-s*p)/d:0,v=oi.range(s),M=[];return null!=e&&v.sort(e===vu?function(t,n){return c[n]-c[t]}:function(t,n){return e(o[t],o[n])}),v.forEach(function(t){M[t]={data:o[t],value:u=c[t],startAngle:l,endAngle:l+=u*g+p,padAngle:f}}),M}var n=Number,e=vu,r=0,a=Li,i=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(a=n,t):a},t.padAngle=function(n){return arguments.length?(i=n,t):i},t};var vu={};oi.layout.stack=function(){function t(u,s){if(!(f=u.length))return u;var c=u.map(function(e,r){return n.call(t,e,r)}),l=c.map(function(n){return n.map(function(n,e){return[i.call(t,n,e),o.call(t,n,e)]})}),h=e.call(t,l,s);c=oi.permute(c,h),l=oi.permute(l,h);var f,p,d,g,v=r.call(t,l,s),M=c[0].length;for(d=0;M>d;++d)for(a.call(t,c[0][d],g=v[d],l[0][d][1]),p=1;f>p;++p)a.call(t,c[p][d],g+=l[p-1][d][1],l[p][d][1]);return u}var n=k,e=Rr,r=Or,a=Dr,i=Ir,o=Lr;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:Mu.get(n)||Rr,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:mu.get(n)||Or,t):r},t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(a=n,t):a},t};var Mu=oi.map({"inside-out":function(t){var n,e,r=t.length,a=t.map(Fr),i=t.map(Ur),o=oi.range(r).sort(function(t,n){return a[t]-a[n]}),u=0,s=0,c=[],l=[];for(n=0;r>n;++n)e=o[n],s>u?(u+=i[e],c.push(e)):(s+=i[e],l.push(e));return l.reverse().concat(c)},reverse:function(t){return oi.range(t.length).reverse()},default:Rr}),mu=oi.map({silhouette:function(t){var n,e,r,a=t.length,i=t[0].length,o=[],u=0,s=[];for(e=0;i>e;++e){for(n=0,r=0;a>n;n++)r+=t[n][e][1];r>u&&(u=r),o.push(r)}for(e=0;i>e;++e)s[e]=(u-o[e])/2;return s},wiggle:function(t){var n,e,r,a,i,o,u,s,c,l=t.length,h=t[0],f=h.length,p=[];for(p[0]=s=c=0,e=1;f>e;++e){for(n=0,a=0;l>n;++n)a+=t[n][e][1];for(n=0,i=0,u=h[e][0]-h[e-1][0];l>n;++n){for(r=0,o=(t[n][e][1]-t[n][e-1][1])/(2*u);n>r;++r)o+=(t[r][e][1]-t[r][e-1][1])/u;i+=o*t[n][e][1]}p[e]=s-=a?i/a*u:0,c>s&&(c=s)}for(e=0;f>e;++e)p[e]-=c;return p},expand:function(t){var n,e,r,a=t.length,i=t[0].length,o=1/a,u=[];for(e=0;i>e;++e){for(n=0,r=0;a>n;n++)r+=t[n][e][1];if(r)for(n=0;a>n;n++)t[n][e][1]/=r;else for(n=0;a>n;n++)t[n][e][1]=o}for(e=0;i>e;++e)u[e]=0;return u},zero:Or});oi.layout.histogram=function(){function t(t,i){for(var o,u,s=[],c=t.map(e,this),l=r.call(this,c,i),h=a.call(this,l,c,i),f=(i=-1,c.length),p=h.length-1,d=n?1:1/f;++i<p;)(o=s[i]=[]).dx=h[i+1]-(o.x=h[i]),o.y=0;if(p>0)for(i=-1;++i<f;)(u=c[i])>=l[0]&&u<=l[1]&&((o=s[oi.bisect(h,u,1,p)-1]).y+=d,o.push(t[i]));return s}var n=!0,e=Number,r=Vr,a=Qr;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=Et(n),t):r},t.bins=function(n){return arguments.length?(a="number"==typeof n?function(t){return Yr(t,n)}:Et(n),t):a},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},oi.layout.pack=function(){function t(t,i){var o=e.call(this,t,i),u=o[0],s=a[0],c=a[1],l=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,Nr(u,function(t){t.r=+l(t.value)}),Nr(u,$r),r){var h=r*(n?1:Math.max(2*u.r/s,2*u.r/c))/2;Nr(u,function(t){t.r+=h}),Nr(u,$r),Nr(u,function(t){t.r-=h})}return function t(n,e,r,a){var i=n.children;if(n.x=e+=a*n.x,n.y=r+=a*n.y,n.r*=a,i)for(var o=-1,u=i.length;++o<u;)t(i[o],e,r,a)}(u,s/2,c/2,n?1:1/Math.max(2*u.r/s,2*u.r/c)),o}var n,e=oi.layout.hierarchy().sort(Br),r=0,a=[1,1];return t.size=function(n){return arguments.length?(a=n,t):a},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},Er(t,e)},oi.layout.tree=function(){function t(t,s){var c=a.call(this,t,s),l=c[0],h=function(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var a,i=n.children,o=0,u=i.length;u>o;++o)r.push((i[o]=a={_:i[o],parent:n,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return e.children[0]}(l);if(Nr(h,n),h.parent.m=-h.z,Tr(h,e),u)Tr(l,r);else{var f=l,p=l,d=l;Tr(l,function(t){t.x<f.x&&(f=t),t.x>p.x&&(p=t),t.depth>d.depth&&(d=t)});var g=i(f,p)/2-f.x,v=o[0]/(p.x+i(p,f)/2+g),M=o[1]/(d.depth||1);Tr(l,function(t){t.x=(t.x+g)*v,t.y=t.depth*M})}return c}function n(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){!function(t){for(var n,e=0,r=0,a=t.children,i=a.length;--i>=0;)(n=a[i]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+i(t._,r._),t.m=t.z-a):t.z=a}else r&&(t.z=r.z+i(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,a=t,o=t,u=n,s=a.parent.children[0],c=a.m,l=o.m,h=u.m,f=s.m;u=ea(u),a=na(a),u&&a;)s=na(s),(o=ea(o)).a=t,(r=u.z+h-a.z-c+i(u._,a._))>0&&(ra(aa(u,t,e),t,r),c+=r,l+=r),h+=u.m,c+=a.m,f+=s.m,l+=o.m;u&&!ea(o)&&(o.t=u,o.m+=h-l),a&&!na(s)&&(s.t=a,s.m+=c-f,e=t)}return e}(t,r,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=o[0],t.y=t.depth*o[1]}var a=oi.layout.hierarchy().sort(null).value(null),i=ta,o=[1,1],u=null;return t.separation=function(n){return arguments.length?(i=n,t):i},t.size=function(n){return arguments.length?(u=null==(o=n)?r:null,t):u?null:o},t.nodeSize=function(n){return arguments.length?(u=null==(o=n)?null:r,t):u?o:null},Er(t,a)},oi.layout.cluster=function(){function t(t,i){var o,u=n.call(this,t,i),s=u[0],c=0;Nr(s,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}(n),t.y=function(t){return 1+oi.max(t,function(t){return t.y})}(n)):(t.x=o?c+=e(t,o):0,t.y=0,o=t)});var l=function t(n){var e=n.children;return e&&e.length?t(e[0]):n}(s),h=function t(n){var e,r=n.children;return r&&(e=r.length)?t(r[e-1]):n}(s),f=l.x-e(l,h)/2,p=h.x+e(h,l)/2;return Nr(s,a?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),u}var n=oi.layout.hierarchy().sort(null).value(null),e=ta,r=[1,1],a=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(a=null==(r=n),t):a?null:r},t.nodeSize=function(n){return arguments.length?(a=null!=(r=n),t):a?r:null},Er(t,n)},oi.layout.treemap=function(){function t(t,n){for(var e,r,a=-1,i=t.length;++a<i;)r=(e=t[a]).value*(0>n?0:n),e.area=isNaN(r)||0>=r?0:r}function n(e){var i=e.children;if(i&&i.length){var o,u,s,c=f(e),l=[],h=i.slice(),p=1/0,g="slice"===d?c.dx:"dice"===d?c.dy:"slice-dice"===d?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(h,c.dx*c.dy/e.value),l.area=0;(s=h.length)>0;)l.push(o=h[s-1]),l.area+=o.area,"squarify"!==d||(u=r(l,g))<=p?(h.pop(),p=u):(l.area-=l.pop().area,a(l,g,c,!1),g=Math.min(c.dx,c.dy),l.length=l.area=0,p=1/0);l.length&&(a(l,g,c,!0),l.length=l.area=0),i.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var i,o=f(n),u=r.slice(),s=[];for(t(u,o.dx*o.dy/n.value),s.area=0;i=u.pop();)s.push(i),s.area+=i.area,null!=i.z&&(a(s,i.z?o.dx:o.dy,o,!u.length),s.length=s.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,a=0,i=1/0,o=-1,u=t.length;++o<u;)(e=t[o].area)&&(i>e&&(i=e),e>a&&(a=e));return n*=n,(r*=r)?Math.max(n*a*g/r,r/(n*i*g)):1/0}function a(t,n,e,r){var a,i=-1,o=t.length,u=e.x,s=e.y,l=n?c(t.area/n):0;if(n==e.dx){for((r||l>e.dy)&&(l=e.dy);++i<o;)(a=t[i]).x=u,a.y=s,a.dy=l,u+=a.dx=Math.min(e.x+e.dx-u,l?c(a.area/l):0);a.z=!0,a.dx+=e.x+e.dx-u,e.y+=l,e.dy-=l}else{for((r||l>e.dx)&&(l=e.dx);++i<o;)(a=t[i]).x=u,a.y=s,a.dx=l,s+=a.dy=Math.min(e.y+e.dy-s,l?c(a.area/l):0);a.z=!1,a.dy+=e.y+e.dy-s,e.x+=l,e.dx-=l}}function o(r){var a=u||s(r),i=a[0];return i.x=i.y=0,i.value?(i.dx=l[0],i.dy=l[1]):i.dx=i.dy=0,u&&s.revalue(i),t([i],i.dx*i.dy/i.value),(u?e:n)(i),p&&(u=a),a}var u,s=oi.layout.hierarchy(),c=Math.round,l=[1,1],h=null,f=ia,p=!1,d="squarify",g=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function n(n){return oa(n,t)}return arguments.length?(f=null==(h=t)?ia:"function"==(e=i(t))?function(n){var e=t.call(o,n,n.depth);return null==e?ia(n):oa(n,"number"==typeof e?[e,e,e,e]:e)}:"number"===e?(t=[t,t,t,t],n):n,o):h;var e},o.round=function(t){return arguments.length?(c=t?Math.round:Number,o):c!=Number},o.sticky=function(t){return arguments.length?(p=t,u=null,o):p},o.ratio=function(t){return arguments.length?(g=t,o):g},o.mode=function(t){return arguments.length?(d=t+"",o):d},Er(o,s)},oi.random={normal:function(t,n){var e=arguments.length;return 2>e&&(n=1),1>e&&(t=0),function(){var e,r,a;do{a=(e=2*Math.random()-1)*e+(r=2*Math.random()-1)*r}while(!a||a>1);return t+n*e*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=oi.random.normal.apply(oi,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=oi.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;t>e;e++)n+=Math.random();return n}}},oi.scale={};var yu={floor:k,ceil:k};oi.scale.linear=function(){return function t(n,e,r,a){function i(){var t=Math.min(n.length,e.length)>2?fa:ca,i=a?xr:br;return u=t(n,e,i,r),s=t(e,n,i,rr),o}function o(t){return u(t)}var u,s;return o.invert=function(t){return s(t)},o.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(dr)},o.clamp=function(t){return arguments.length?(a=t,i()):a},o.interpolate=function(t){return arguments.length?(r=t,i()):r},o.ticks=function(t){return va(n,t)},o.tickFormat=function(t,e){return Ma(n,t,e)},o.nice=function(t){return da(n,t),i()},o.copy=function(){return t(n,e,r,a)},i()}([0,1],[0,1],rr,!1)};var bu={s:1,g:1,p:1,r:1,e:1};oi.scale.log=function(){return function t(n,e,r,a){function i(t){return(r?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return r?Math.pow(e,t):-Math.pow(e,-t)}function u(t){return n(i(t))}return u.invert=function(t){return o(n.invert(t))},u.domain=function(t){return arguments.length?(r=t[0]>=0,n.domain((a=t.map(Number)).map(i)),u):a},u.base=function(t){return arguments.length?(e=+t,n.domain(a.map(i)),u):e},u.nice=function(){var t=la(a.map(i),r?Math:wu);return n.domain(t),a=t.map(o),u},u.ticks=function(){var t=ua(a),n=[],u=t[0],s=t[1],c=Math.floor(i(u)),l=Math.ceil(i(s)),h=e%1?2:e;if(isFinite(l-c)){if(r){for(;l>c;c++)for(var f=1;h>f;f++)n.push(o(c)*f);n.push(o(c))}else for(n.push(o(c));c++<l;)for(f=h-1;f>0;f--)n.push(o(c)*f);for(c=0;n[c]<u;c++);for(l=n.length;n[l-1]>s;l--);n=n.slice(c,l)}return n},u.tickFormat=function(t,n){if(!arguments.length)return xu;arguments.length<2?n=xu:"function"!=typeof n&&(n=oi.format(n));var r=Math.max(1,e*t/u.ticks().length);return function(t){var a=t/o(Math.round(i(t)));return e-.5>a*e&&(a*=e),r>=a?n(t):""}},u.copy=function(){return t(n.copy(),e,r,a)},pa(u,n)}(oi.scale.linear().domain([0,1]),10,!0,[1,10])};var xu=oi.format(".0e"),wu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};oi.scale.pow=function(){return function t(n,e,r){function a(t){return n(i(t))}var i=ya(e),o=ya(1/e);return a.invert=function(t){return o(n.invert(t))},a.domain=function(t){return arguments.length?(n.domain((r=t.map(Number)).map(i)),a):r},a.ticks=function(t){return va(r,t)},a.tickFormat=function(t,n){return Ma(r,t,n)},a.nice=function(t){return a.domain(da(r,t))},a.exponent=function(t){return arguments.length?(i=ya(e=t),o=ya(1/e),n.domain(r.map(i)),a):e},a.copy=function(){return t(n.copy(),e,r)},pa(a,n)}(oi.scale.linear(),1,[0,1])},oi.scale.sqrt=function(){return oi.scale.pow().exponent(.5)},oi.scale.ordinal=function(){return function t(n,e){function r(t){return o[((i.get(t)||("range"===e.t?i.set(t,n.push(t)):NaN))-1)%o.length]}function a(t,e){return oi.range(n.length).map(function(n){return t+e*n})}var i,o,u;return r.domain=function(t){if(!arguments.length)return n;n=[],i=new d;for(var a,o=-1,u=t.length;++o<u;)i.has(a=t[o])||i.set(a,n.push(a));return r[e.t].apply(r,e.a)},r.range=function(t){return arguments.length?(o=t,u=0,e={t:"range",a:arguments},r):o},r.rangePoints=function(t,i){arguments.length<2&&(i=0);var s=t[0],c=t[1],l=n.length<2?(s=(s+c)/2,0):(c-s)/(n.length-1+i);return o=a(s+l*i/2,l),u=0,e={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(t,i){arguments.length<2&&(i=0);var s=t[0],c=t[1],l=n.length<2?(s=c=Math.round((s+c)/2),0):(c-s)/(n.length-1+i)|0;return o=a(s+Math.round(l*i/2+(c-s-(n.length-1+i)*l)/2),l),u=0,e={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(t,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var c=t[1]<t[0],l=t[c-0],h=(t[1-c]-l)/(n.length-i+2*s);return o=a(l+h*s,h),c&&o.reverse(),u=h*(1-i),e={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(t,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var c=t[1]<t[0],l=t[c-0],h=t[1-c],f=Math.floor((h-l)/(n.length-i+2*s));return o=a(l+Math.round((h-l-(n.length-i)*f)/2),f),c&&o.reverse(),u=Math.round(f*(1-i)),e={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return u},r.rangeExtent=function(){return ua(e.a[0])},r.copy=function(){return t(n,e)},r.domain(n)}([],{t:"range",a:[[]]})},oi.scale.category10=function(){return oi.scale.ordinal().range(ku)},oi.scale.category20=function(){return oi.scale.ordinal().range(Su)},oi.scale.category20b=function(){return oi.scale.ordinal().range(_u)},oi.scale.category20c=function(){return oi.scale.ordinal().range(qu)};var ku=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xt),Su=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xt),_u=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xt),qu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xt);oi.scale.quantile=function(){return function t(n,e){function r(){var t=0,r=e.length;for(i=[];++t<r;)i[t-1]=oi.quantile(n,t/r);return a}function a(t){return isNaN(t=+t)?void 0:e[oi.bisect(i,t)]}var i;return a.domain=function(t){return arguments.length?(n=t.map(c).filter(l).sort(s),r()):n},a.range=function(t){return arguments.length?(e=t,r()):e},a.quantiles=function(){return i},a.invertExtent=function(t){return 0>(t=e.indexOf(t))?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.copy=function(){return t(n,e)},r()}([],[])},oi.scale.quantize=function(){return function t(n,e,r){function a(t){return r[Math.max(0,Math.min(u,Math.floor(o*(t-n))))]}function i(){return o=r.length/(e-n),u=r.length-1,a}var o,u;return a.domain=function(t){return arguments.length?(n=+t[0],e=+t[t.length-1],i()):[n,e]},a.range=function(t){return arguments.length?(r=t,i()):r},a.invertExtent=function(t){return[t=0>(t=r.indexOf(t))?NaN:t/o+n,t+1/o]},a.copy=function(){return t(n,e,r)},i()}(0,1,[0,1])},oi.scale.threshold=function(){return function t(n,e){function r(t){return t>=t?e[oi.bisect(n,t)]:void 0}return r.domain=function(t){return arguments.length?(n=t,r):n},r.range=function(t){return arguments.length?(e=t,r):e},r.invertExtent=function(t){return t=e.indexOf(t),[n[t-1],n[t]]},r.copy=function(){return t(n,e)},r}([.5],[0,1])},oi.scale.identity=function(){return function t(n){function e(t){return+t}return e.invert=e,e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return va(n,t)},e.tickFormat=function(t,e){return Ma(n,t,e)},e.copy=function(){return t(n)},e}([0,1])},oi.svg={},oi.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),l=o.apply(this,arguments)-Ri,h=u.apply(this,arguments)-Ri,f=Math.abs(h-l),p=l>h?0:1;if(t>c&&(d=c,c=t,t=d),f>=Di)return n(c,p)+(t?n(t,1-p):"")+"Z";var d,g,v,M,m,y,b,x,w,k,S,_,q=0,z=0,E=[];if((M=(+s.apply(this,arguments)||0)/2)&&(v=i===zu?Math.sqrt(t*t+c*c):+i.apply(this,arguments),p||(z*=-1),c&&(z=it(v/c*Math.sin(M))),t&&(q=it(v/t*Math.sin(M)))),c){m=c*Math.cos(l+z),y=c*Math.sin(l+z),b=c*Math.cos(h-z),x=c*Math.sin(h-z);var T=Math.abs(h-l-2*z)<=Ii?0:1;if(z&&qa(m,y,b,x)===p^T){var N=(l+h)/2;m=c*Math.cos(N),y=c*Math.sin(N),b=x=null}}else m=y=0;if(t){w=t*Math.cos(h-q),k=t*Math.sin(h-q),S=t*Math.cos(l+q),_=t*Math.sin(l+q);var A=Math.abs(l-h+2*q)<=Ii?0:1;if(q&&qa(w,k,S,_)===1-p^A){var P=(l+h)/2;w=t*Math.cos(P),k=t*Math.sin(P),S=_=null}}else w=k=0;if(f>Ci&&(d=Math.min(Math.abs(c-t)/2,+a.apply(this,arguments)))>.001){g=c>t^p?0:1;var C=d,j=d;if(Ii>f){var I=null==S?[w,k]:null==b?[m,y]:ke([m,y],[S,_],[b,x],[w,k]),L=m-I[0],D=y-I[1],R=b-I[0],O=x-I[1],F=1/Math.sin(Math.acos((L*R+D*O)/(Math.sqrt(L*L+D*D)*Math.sqrt(R*R+O*O)))/2),U=Math.sqrt(I[0]*I[0]+I[1]*I[1]);j=Math.min(d,(t-U)/(F-1)),C=Math.min(d,(c-U)/(F+1))}if(null!=b){var H=za(null==S?[w,k]:[S,_],[m,y],c,C,p),Q=za([b,x],[w,k],c,C,p);d===C?E.push("M",H[0],"A",C,",",C," 0 0,",g," ",H[1],"A",c,",",c," 0 ",1-p^qa(H[1][0],H[1][1],Q[1][0],Q[1][1]),",",p," ",Q[1],"A",C,",",C," 0 0,",g," ",Q[0]):E.push("M",H[0],"A",C,",",C," 0 1,",g," ",Q[0])}else E.push("M",m,",",y);if(null!=S){var Y=za([m,y],[S,_],t,-j,p),V=za([w,k],null==b?[m,y]:[b,x],t,-j,p);d===j?E.push("L",V[0],"A",j,",",j," 0 0,",g," ",V[1],"A",t,",",t," 0 ",p^qa(V[1][0],V[1][1],Y[1][0],Y[1][1]),",",1-p," ",Y[1],"A",j,",",j," 0 0,",g," ",Y[0]):E.push("L",V[0],"A",j,",",j," 0 0,",g," ",Y[0])}else E.push("L",w,",",k)}else E.push("M",m,",",y),null!=b&&E.push("A",c,",",c," 0 ",T,",",p," ",b,",",x),E.push("L",w,",",k),null!=S&&E.push("A",t,",",t," 0 ",A,",",1-p," ",S,",",_);return E.push("Z"),E.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=xa,r=wa,a=ba,i=zu,o=ka,u=Sa,s=_a;return t.innerRadius=function(n){return arguments.length?(e=Et(n),t):e},t.outerRadius=function(n){return arguments.length?(r=Et(n),t):r},t.cornerRadius=function(n){return arguments.length?(a=Et(n),t):a},t.padRadius=function(n){return arguments.length?(i=n==zu?zu:Et(n),t):i},t.startAngle=function(n){return arguments.length?(o=Et(n),t):o},t.endAngle=function(n){return arguments.length?(u=Et(n),t):u},t.padAngle=function(n){return arguments.length?(s=Et(n),t):s},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Ri;return[Math.cos(n)*t,Math.sin(n)*t]},t};var zu="auto";oi.svg.line=function(){return Ea(k)};var Eu=oi.map({linear:Ta,"linear-closed":Na,step:function(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&a.push("H",r[0]),a.join("")},"step-before":Aa,"step-after":Pa,basis:Ia,"basis-open":function(t){if(t.length<4)return Ta(t);for(var n,e=[],r=-1,a=t.length,i=[0],o=[0];++r<3;)n=t[r],i.push(n[0]),o.push(n[1]);for(e.push(La(Au,i)+","+La(Au,o)),--r;++r<a;)n=t[r],i.shift(),i.push(n[0]),o.shift(),o.push(n[1]),Da(e,i,o);return e.join("")},"basis-closed":function(t){for(var n,e,r=-1,a=t.length,i=a+4,o=[],u=[];++r<4;)e=t[r%a],o.push(e[0]),u.push(e[1]);for(n=[La(Au,o),",",La(Au,u)],--r;++r<i;)e=t[r%a],o.shift(),o.push(e[0]),u.shift(),u.push(e[1]),Da(n,o,u);return n.join("")},bundle:function(t,n){var e=t.length-1;if(e)for(var r,a,i=t[0][0],o=t[0][1],u=t[e][0]-i,s=t[e][1]-o,c=-1;++c<=e;)a=c/e,(r=t[c])[0]=n*r[0]+(1-n)*(i+a*u),r[1]=n*r[1]+(1-n)*(o+a*s);return Ia(t)},cardinal:function(t,n){return t.length<3?Ta(t):t[0]+Ca(t,ja(t,n))},"cardinal-open":function(t,n){return t.length<4?Ta(t):t[1]+Ca(t.slice(1,-1),ja(t,n))},"cardinal-closed":function(t,n){return t.length<3?Na(t):t[0]+Ca((t.push(t[0]),t),ja([t[t.length-2]].concat(t,[t[1]]),n))},monotone:function(t){return t.length<3?Ta(t):t[0]+Ca(t,Oa(t))}});Eu.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Tu=[0,2/3,1/3,0],Nu=[0,1/3,2/3,0],Au=[0,1/6,2/3,1/6];oi.svg.line.radial=function(){var t=Ea(Fa);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Aa.reverse=Pa,Pa.reverse=Aa,oi.svg.area=function(){return Ua(k)},oi.svg.area.radial=function(){var t=Ua(Fa);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},oi.svg.chord=function(){function t(t,o){var u=n(this,a,t,o),s=n(this,i,t,o);return"M"+u.p0+e(u.r,u.p1,u.a1-u.a0)+(function(t,n){return t.a0==n.a0&&t.a1==n.a1}(u,s)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,s.r,s.p0)+e(s.r,s.p1,s.a1-s.a0)+r(s.r,s.p1,u.r,u.p0))+"Z"}function n(t,n,e,r){var a=n.call(t,e,r),i=o.call(t,a,r),c=u.call(t,a,r)-Ri,l=s.call(t,a,r)-Ri;return{r:i,a0:c,a1:l,p0:[i*Math.cos(c),i*Math.sin(c)],p1:[i*Math.cos(l),i*Math.sin(l)]}}function e(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Ii)+",1 "+n}function r(t,n,e,r){return"Q 0,0 "+r}var a=le,i=he,o=Ha,u=ka,s=Sa;return t.radius=function(n){return arguments.length?(o=Et(n),t):o},t.source=function(n){return arguments.length?(a=Et(n),t):a},t.target=function(n){return arguments.length?(i=Et(n),t):i},t.startAngle=function(n){return arguments.length?(u=Et(n),t):u},t.endAngle=function(n){return arguments.length?(s=Et(n),t):s},t},oi.svg.diagonal=function(){function t(t,a){var i=n.call(this,t,a),o=e.call(this,t,a),u=(i.y+o.y)/2,s=[i,{x:i.x,y:u},{x:o.x,y:u},o];return"M"+(s=s.map(r))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var n=le,e=he,r=Qa;return t.source=function(e){return arguments.length?(n=Et(e),t):n},t.target=function(n){return arguments.length?(e=Et(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},oi.svg.diagonal.radial=function(){var t=oi.svg.diagonal(),n=Qa,e=t.projection;return t.projection=function(t){return arguments.length?e(function(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Ri;return[e*Math.cos(r),e*Math.sin(r)]}}(n=t)):n},t},oi.svg.symbol=function(){function t(t,r){return(Pu.get(n.call(this,t,r))||Ba)(e.call(this,t,r))}var n=Va,e=Ya;return t.type=function(e){return arguments.length?(n=Et(e),t):n},t.size=function(n){return arguments.length?(e=Et(n),t):e},t};var Pu=oi.map({circle:Ba,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*ju)),e=n*ju;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Cu),e=n*Cu/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Cu),e=n*Cu/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});oi.svg.symbolTypes=Pu.keys();var Cu=Math.sqrt(3),ju=Math.tan(30*Oi);_i.transition=function(t){for(var n,e,r=Iu||++Ou,a=Xa(t),i=[],o=Lu||{time:Date.now(),ease:cr,delay:0,duration:250},u=-1,s=this.length;++u<s;){i.push(n=[]);for(var c=this[u],l=-1,h=c.length;++l<h;)(e=c[l])&&Ja(e,l,a,r,o),n.push(e)}return Ga(i,a,r)},_i.interrupt=function(t){return this.each(null==t?Du:Wa(Xa(t)))};var Iu,Lu,Du=Wa(Xa()),Ru=[],Ou=0;Ru.call=_i.call,Ru.empty=_i.empty,Ru.node=_i.node,Ru.size=_i.size,oi.transition=function(t,n){return t&&t.transition?Iu?t.transition(n):t:oi.selection().transition(t)},oi.transition.prototype=Ru,Ru.select=function(t){var n,e,r,a=this.id,i=this.namespace,o=[];t=C(t);for(var u=-1,s=this.length;++u<s;){o.push(n=[]);for(var c=this[u],l=-1,h=c.length;++l<h;)(r=c[l])&&(e=t.call(r,r.__data__,l,u))?("__data__"in r&&(e.__data__=r.__data__),Ja(e,l,i,a,r[i][a]),n.push(e)):n.push(null)}return Ga(o,i,a)},Ru.selectAll=function(t){var n,e,r,a,i,o=this.id,u=this.namespace,s=[];t=j(t);for(var c=-1,l=this.length;++c<l;)for(var h=this[c],f=-1,p=h.length;++f<p;)if(r=h[f]){i=r[u][o],e=t.call(r,r.__data__,f,c),s.push(n=[]);for(var d=-1,g=e.length;++d<g;)(a=e[d])&&Ja(a,d,u,o,i),n.push(a)}return Ga(s,u,o)},Ru.filter=function(t){var n,e,r=[];"function"!=typeof t&&(t=B(t));for(var a=0,i=this.length;i>a;a++){r.push(n=[]);for(var o,u=0,s=(o=this[a]).length;s>u;u++)(e=o[u])&&t.call(e,e.__data__,u,a)&&n.push(e)}return Ga(r,this.namespace,this.id)},Ru.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):G(this,null==n?function(n){n[r][e].tween.remove(t)}:function(a){a[r][e].tween.set(t,n)})},Ru.attr=function(t,n){function e(){this.removeAttribute(i)}function r(){this.removeAttributeNS(i.space,i.local)}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var a="transform"==t?yr:rr,i=oi.ns.qualify(t);return Za(this,"attr."+t,n,i.local?function(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(i.space,i.local);return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(i.space,i.local,n(t))})})}:function(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(i);return e!==t&&(n=a(e,t),function(t){this.setAttribute(i,n(t))})})})},Ru.attrTween=function(t,n){var e=oi.ns.qualify(t);return this.tween("attr."+t,e.local?function(t,r){var a=n.call(this,t,r,this.getAttributeNS(e.space,e.local));return a&&function(t){this.setAttributeNS(e.space,e.local,a(t))}}:function(t,r){var a=n.call(this,t,r,this.getAttribute(e));return a&&function(t){this.setAttribute(e,a(t))}})},Ru.style=function(t,n,e){function r(){this.style.removeProperty(t)}var a=arguments.length;if(3>a){if("string"!=typeof t){for(e in 2>a&&(n=""),t)this.style(e,t[e],n);return this}e=""}return Za(this,"style."+t,n,function(n){return null==n?r:(n+="",function(){var r,a=u(this).getComputedStyle(this,null).getPropertyValue(t);return a!==n&&(r=rr(a,n),function(n){this.style.setProperty(t,r(n),e)})})})},Ru.styleTween=function(t,n,e){return arguments.length<3&&(e=""),this.tween("style."+t,function(r,a){var i=n.call(this,r,a,u(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(n){this.style.setProperty(t,i(n),e)}})},Ru.text=function(t){return Za(this,"text",t,$a)},Ru.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Ru.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=oi.ease.apply(oi,arguments)),G(this,function(r){r[e][n].ease=t}))},Ru.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:G(this,"function"==typeof t?function(r,a,i){r[e][n].delay=+t.call(r,r.__data__,a,i)}:(t=+t,function(r){r[e][n].delay=t}))},Ru.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:G(this,"function"==typeof t?function(r,a,i){r[e][n].duration=Math.max(1,t.call(r,r.__data__,a,i))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Ru.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var a=Lu,i=Iu;try{Iu=e,G(this,function(n,a,i){Lu=n[r][e],t.call(n,n.__data__,a,i)})}finally{Lu=a,Iu=i}}else G(this,function(a){var i=a[r][e];(i.event||(i.event=oi.dispatch("start","end","interrupt"))).on(t,n)});return this},Ru.transition=function(){for(var t,n,e,r=this.id,a=++Ou,i=this.namespace,o=[],u=0,s=this.length;s>u;u++){o.push(t=[]);for(var c,l=0,h=(c=this[u]).length;h>l;l++)(n=c[l])&&Ja(n,l,i,a,{time:(e=n[i][r]).time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration}),t.push(n)}return Ga(o,i,a)},oi.svg.axis=function(){function t(t){t.each(function(){var t,c=oi.select(this),l=this.__chart__||e,h=this.__chart__=e.copy(),f=null==s?h.ticks?h.ticks.apply(h,u):h.domain():s,p=null==n?h.tickFormat?h.tickFormat.apply(h,u):k:n,d=c.selectAll(".tick").data(f,h),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ci),v=oi.transition(d.exit()).style("opacity",Ci).remove(),M=oi.transition(d.order()).style("opacity",1),m=Math.max(a,0)+o,y=sa(h),b=c.selectAll(".domain").data([0]),x=(b.enter().append("path").attr("class","domain"),oi.transition(b));g.append("line"),g.append("text");var w,S,_,q,z=g.select("line"),E=M.select("line"),T=d.select("text").text(p),N=g.select("text"),A=M.select("text"),P="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Ka,w="x",_="y",S="x2",q="y2",T.attr("dy",0>P?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+y[0]+","+P*i+"V0H"+y[1]+"V"+P*i)):(t=ti,w="y",_="x",S="y2",q="x2",T.attr("dy",".32em").style("text-anchor",0>P?"end":"start"),x.attr("d","M"+P*i+","+y[0]+"H0V"+y[1]+"H"+P*i)),z.attr(q,P*a),N.attr(_,P*m),E.attr(S,0).attr(q,P*a),A.attr(w,0).attr(_,P*m),h.rangeBand){var C=h,j=C.rangeBand()/2;l=h=function(t){return C(t)+j}}else l.rangeBand?l=h:v.call(t,h,l);g.call(t,l,h),M.call(t,h,h)})}var n,e=oi.scale.linear(),r=Fu,a=6,i=6,o=3,u=[10],s=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Uu?n+"":Fu,t):r},t.ticks=function(){return arguments.length?(u=si(arguments),t):u},t.tickValues=function(n){return arguments.length?(s=n,t):s},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(a=+n,i=+arguments[e-1],t):a},t.innerTickSize=function(n){return arguments.length?(a=+n,t):a},t.outerTickSize=function(n){return arguments.length?(i=+n,t):i},t.tickPadding=function(n){return arguments.length?(o=+n,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Fu="bottom",Uu={top:1,right:1,bottom:1,left:1};oi.svg.brush=function(){function t(i){i.each(function(){var i=oi.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=i.selectAll(".resize").data(g,k);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Hu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var s,h=oi.transition(i),f=oi.transition(o);c&&(s=sa(c),f.attr("x",s[0]).attr("width",s[1]-s[0]),e(h)),l&&(s=sa(l),f.attr("y",s[0]).attr("height",s[1]-s[0]),r(h)),n(h)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function e(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function a(){function a(){var t=oi.mouse(y),a=!1;m&&(t[0]+=m[0],t[1]+=m[1]),q||(oi.event.altKey?(M||(M=[(h[0]+h[1])/2,(f[0]+f[1])/2]),E[0]=h[+(t[0]<M[0])],E[1]=f[+(t[1]<M[1])]):M=null),S&&g(t,c,0)&&(e(w),a=!0),_&&g(t,l,1)&&(r(w),a=!0),a&&(n(w),x({type:"brush",mode:q?"move":"resize"}))}function g(t,n,e){var r,a,u=sa(n),s=u[0],c=u[1],l=E[e],g=e?f:h,v=g[1]-g[0];return q&&(s-=l,c-=v+l),r=(e?d:p)?Math.max(s,Math.min(c,t[e])):t[e],q?a=(r+=l)+v:(M&&(l=Math.max(s,Math.min(c,2*M[e]-r))),r>l?(a=r,r=l):a=l),g[0]!=r||g[1]!=a?(e?o=null:i=null,g[0]=r,g[1]=a,!0):void 0}function v(){a(),w.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),oi.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),x({type:"brushend"})}var M,m,y=this,b=oi.select(oi.event.target),x=s.of(y,arguments),w=oi.select(y),k=b.datum(),S=!/^(n|s)$/.test(k)&&c,_=!/^(e|w)$/.test(k)&&l,q=b.classed("extent"),z=K(y),E=oi.mouse(y),N=oi.select(u(y)).on("keydown.brush",function(){32==oi.event.keyCode&&(q||(M=null,E[0]-=h[1],E[1]-=f[1],q=2),T())}).on("keyup.brush",function(){32==oi.event.keyCode&&2==q&&(E[0]+=h[1],E[1]+=f[1],q=0,T())});if(oi.event.changedTouches?N.on("touchmove.brush",a).on("touchend.brush",v):N.on("mousemove.brush",a).on("mouseup.brush",v),w.interrupt().selectAll("*").interrupt(),q)E[0]=h[0]-E[0],E[1]=f[0]-E[1];else if(k){var A=+/w$/.test(k),P=+/^n/.test(k);m=[h[1-A]-E[0],f[1-P]-E[1]],E[0]=h[A],E[1]=f[P]}else oi.event.altKey&&(M=E.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),oi.select("body").style("cursor",b.style("cursor")),x({type:"brushstart"}),a()}var i,o,s=A(t,"brushstart","brush","brushend"),c=null,l=null,h=[0,0],f=[0,0],p=!0,d=!0,g=Qu[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),n={x:h,y:f,i:i,j:o},e=this.__chart__||n;this.__chart__=n,Iu?oi.select(this).transition().each("start.brush",function(){i=e.i,o=e.j,h=e.x,f=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=ar(h,n.x),r=ar(f,n.y);return i=o=null,function(a){h=n.x=e(a),f=n.y=r(a),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=n.i,o=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(g=Qu[!(c=n)<<1|!l],t):c},t.y=function(n){return arguments.length?(g=Qu[!c<<1|!(l=n)],t):l},t.clamp=function(n){return arguments.length?(c&&l?(p=!!n[0],d=!!n[1]):c?p=!!n:l&&(d=!!n),t):c&&l?[p,d]:c?p:l?d:null},t.extent=function(n){var e,r,a,u,s;return arguments.length?(c&&(e=n[0],r=n[1],l&&(e=e[0],r=r[0]),i=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(s=e,e=r,r=s),e==h[0]&&r==h[1]||(h=[e,r])),l&&(a=n[0],u=n[1],c&&(a=a[1],u=u[1]),o=[a,u],l.invert&&(a=l(a),u=l(u)),a>u&&(s=a,a=u,u=s),a==f[0]&&u==f[1]||(f=[a,u])),t):(c&&(i?(e=i[0],r=i[1]):(e=h[0],r=h[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(s=e,e=r,r=s))),l&&(o?(a=o[0],u=o[1]):(a=f[0],u=f[1],l.invert&&(a=l.invert(a),u=l.invert(u)),a>u&&(s=a,a=u,u=s))),c&&l?[[e,a],[r,u]]:c?[e,r]:l&&[a,u])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],i=o=null),t},t.empty=function(){return!!c&&h[0]==h[1]||!!l&&f[0]==f[1]},oi.rebind(t,s,"on")};var Hu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Yu=so.format=go.timeFormat,Vu=Yu.utc,Bu=Vu("%Y-%m-%dT%H:%M:%S.%LZ");Yu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ni:Bu,ni.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},ni.toString=Bu.toString,so.second=Ot(function(t){return new co(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),so.seconds=so.second.range,so.seconds.utc=so.second.utc.range,so.minute=Ot(function(t){return new co(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),so.minutes=so.minute.range,so.minutes.utc=so.minute.utc.range,so.hour=Ot(function(t){var n=t.getTimezoneOffset()/60;return new co(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),so.hours=so.hour.range,so.hours.utc=so.hour.utc.range,so.month=Ot(function(t){return(t=so.day(t)).setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),so.months=so.month.range,so.months.utc=so.month.utc.range;var Wu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gu=[[so.second,1],[so.second,5],[so.second,15],[so.second,30],[so.minute,1],[so.minute,5],[so.minute,15],[so.minute,30],[so.hour,1],[so.hour,3],[so.hour,6],[so.hour,12],[so.day,1],[so.day,2],[so.week,1],[so.month,1],[so.month,3],[so.year,1]],Zu=Yu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",En]]),$u={range:function(t,n,e){return oi.range(Math.ceil(t/e)*e,+n,e).map(ri)},floor:k,ceil:k};Gu.year=so.year,so.scale=function(){return ei(oi.scale.linear(),Gu,Zu)};var Xu=Gu.map(function(t){return[t[0].utc,t[1]]}),Ju=Vu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",En]]);Xu.year=so.year.utc,so.scale.utc=function(){return ei(oi.scale.linear(),Xu,Ju)},oi.text=Tt(function(t){return t.responseText}),oi.json=function(t,n){return Nt(t,"application/json",ai,n)},oi.html=function(t,n){return Nt(t,"text/html",ii,n)},oi.xml=Tt(function(t){return t.responseXML}),this.d3=oi,void 0===(a="function"==typeof(r=oi)?r.call(n,e,n,t):r)||(t.exports=a)}()},function(t,n){!function(){function t(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:n(t.geometry,e)}}function n(t,e){if(!t)return null;if("GeometryCollection"===t.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(t){return n(t,e)})};if(!s.hasOwnProperty(t.type))return null;var r=s[t.type];return d3.geo.stream(t,e(r)),r.result()}d3.geo.project=function(t,r){var a=r.stream;if(!a)throw new Error("not yet supported");return(t&&e.hasOwnProperty(t.type)?e[t.type]:n)(t,a)};var e={Feature:t,FeatureCollection:function(n,e){return{type:"FeatureCollection",features:n.features.map(function(n){return t(n,e)})}}},r=[],a=[],i={point:function(t,n){r.push([t,n])},result:function(){var t=r.length?r.length<2?{type:"Point",coordinates:r[0]}:{type:"MultiPoint",coordinates:r}:null;return r=[],t}},o={lineStart:c,point:function(t,n){r.push([t,n])},lineEnd:function(){r.length&&(a.push(r),r=[])},result:function(){var t=a.length?a.length<2?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}:null;return a=[],t}},u={polygonStart:c,lineStart:c,point:function(t,n){r.push([t,n])},lineEnd:function(){var t=r.length;if(t){do{r.push(r[0].slice())}while(++t<4);a.push(r),r=[]}},polygonEnd:c,result:function(){if(!a.length)return null;var t=[],n=[];return a.forEach(function(e){!function(t){if((n=t.length)<4)return!1;var n,e=0,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];for(;++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r<=0}(e)?n.push(e):t.push([e])}),n.forEach(function(n){var e=n[0];t.some(function(t){if(function(t,n){for(var e=n[0],r=n[1],a=!1,i=0,o=t.length,u=o-1;i<o;u=i++){var s=t[i],c=s[0],l=s[1],h=t[u],f=h[0],p=h[1];l>r^p>r&&e<(f-c)*(r-l)/(p-l)+c&&(a=!a)}return a}(t[0],e))return t.push(n),!0})||t.push([n])}),a=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},s={Point:i,MultiPoint:i,LineString:o,MultiLineString:o,Polygon:u,MultiPolygon:u,Sphere:u};function c(){}var l=1e-6,h=l*l,f=Math.PI,p=f/2,d=Math.sqrt(f),g=f/180,v=180/f;function M(t){return t>0?1:t<0?-1:0}function m(t){return t>1?p:t<-1?-p:Math.asin(t)}function y(t){return t>1?0:t<-1?f:Math.acos(t)}function b(t){return t>0?Math.sqrt(t):0}var x=d3.geo.projection,w=d3.geo.projectionMutator;function k(t){var n=Math.tan(.5*t),e=2*Math.log(Math.cos(.5*t))/(n*n);function r(t,n){var r=Math.cos(t),a=Math.cos(n),i=Math.sin(n),o=a*r,u=-((1-o?Math.log(.5*(1+o))/(1-o):-.5)+e/(1+o));return[u*a*Math.sin(t),u*i]}return r.invert=function(n,r){var a,i=Math.sqrt(n*n+r*r),o=-.5*t,u=50;if(!i)return[0,0];do{var s=.5*o,c=Math.cos(s),h=Math.sin(s),f=Math.tan(s),p=Math.log(1/c);o-=a=(2/f*p-e*f-i)/(-p/(h*h)+1-e/(2*c*c))}while(Math.abs(a)>l&&--u>0);var d=Math.sin(o);return[Math.atan2(n*d,i*Math.cos(o)),m(r*d/i)]},r}function S(t,n){var e,r=Math.cos(n),a=(e=y(r*Math.cos(t/=2)))?e/Math.sin(e):1;return[2*r*Math.sin(t)*a,Math.sin(n)*a]}function _(t){var n=Math.sin(t),e=Math.cos(t),r=t>0?1:-1,a=Math.tan(r*t),i=(1+n-e)/2;function o(t,o){var u=Math.cos(o),s=Math.cos(t/=2);return[(1+u)*Math.sin(t),(r*o>-Math.atan2(s,a)-.001?0:10*-r)+i+Math.sin(o)*e-(1+u)*n*s]}return o.invert=function(t,o){var u=0,s=0,c=50;do{var h=Math.cos(u),f=Math.sin(u),p=Math.cos(s),d=Math.sin(s),g=1+p,v=g*f-t,M=i+d*e-g*n*h-o,m=.5*g*h,y=-f*d,b=.5*n*g*f,x=e*p+n*h*d,w=y*b-x*m,k=.5*(M*y-v*x)/w,S=(v*b-M*m)/w;u-=k,s-=S}while((Math.abs(k)>l||Math.abs(S)>l)&&--c>0);return r*s>-Math.atan2(Math.cos(u),a)-.001?[2*u,s]:null},o}function q(t){return.5*(Math.exp(t)-Math.exp(-t))}function z(t){return.5*(Math.exp(t)+Math.exp(-t))}function E(t,n){var e=Math.tan(n/2),r=b(1-e*e),a=1+r*Math.cos(t/=2),i=Math.sin(t)*r/a,o=e/a,u=i*i,s=o*o;return[4/3*i*(3+u-3*s),4/3*o*(3+3*u-s)]}d3.geo.interrupt=function(t){var n,e=[[[[-f,0],[0,p],[f,0]]],[[[-f,0],[0,-p],[f,0]]]];function r(n,r){for(var a=r<0?-1:1,i=e[+(r<0)],o=0,u=i.length-1;o<u&&n>i[o][2][0];++o);var s=t(n-i[o][1][0],r);return s[0]+=t(i[o][1][0],a*r>a*i[o][0][1]?i[o][0][1]:r)[0],s}t.invert&&(r.invert=function(a,i){for(var o=n[+(i<0)],s=e[+(i<0)],c=0,l=o.length;c<l;++c){var h=o[c];if(h[0][0]<=a&&a<h[1][0]&&h[0][1]<=i&&i<h[1][1]){var f=t.invert(a-t(s[c][1][0],0)[0],i);return f[0]+=s[c][1][0],u(r(f[0],f[1]),[a,i])?f:null}}});var a=d3.geo.projection(r),i=a.stream;function o(t,n){for(var e,r,a,i=-1,o=t.length,u=t[0],s=[];++i<o;){r=((e=t[i])[0]-u[0])/n,a=(e[1]-u[1])/n;for(var c=0;c<n;++c)s.push([u[0]+c*r,u[1]+c*a]);u=e}return s.push(e),s}function u(t,n){return Math.abs(t[0]-n[0])<l&&Math.abs(t[1]-n[1])<l}return a.stream=function(t){var n=a.rotate(),r=i(t),u=(a.rotate([0,0]),i(t));return a.rotate(n),r.sphere=function(){d3.geo.stream(function(){for(var t=1e-6,n=[],r=0,a=e[0].length;r<a;++r){var i=e[0][r],u=180*i[0][0]/f,s=180*i[0][1]/f,c=180*i[1][1]/f,l=180*i[2][0]/f,h=180*i[2][1]/f;n.push(o([[u+t,s+t],[u+t,c-t],[l-t,c-t],[l-t,h+t]],30))}for(var r=e[1].length-1;r>=0;--r){var i=e[1][r],u=180*i[0][0]/f,s=180*i[0][1]/f,c=180*i[1][1]/f,l=180*i[2][0]/f,h=180*i[2][1]/f;n.push(o([[l-t,h-t],[l-t,c+t],[u+t,c+t],[u+t,s-t]],30))}return{type:"Polygon",coordinates:[d3.merge(n)]}}(),u)},r},a.lobes=function(r){return arguments.length?(e=r.map(function(t){return t.map(function(t){return[[t[0][0]*f/180,t[0][1]*f/180],[t[1][0]*f/180,t[1][1]*f/180],[t[2][0]*f/180,t[2][1]*f/180]]})}),n=e.map(function(n){return n.map(function(n){var e,r=t(n[0][0],n[0][1])[0],a=t(n[2][0],n[2][1])[0],i=t(n[1][0],n[0][1])[1],o=t(n[1][0],n[1][1])[1];return i>o&&(e=i,i=o,o=e),[[r,i],[a,o]]})}),a):e.map(function(t){return t.map(function(t){return[[180*t[0][0]/f,180*t[0][1]/f],[180*t[1][0]/f,180*t[1][1]/f],[180*t[2][0]/f,180*t[2][1]/f]]})})},a},(d3.geo.airy=function(){var t=p,n=w(k),e=n(t);return e.radius=function(e){return arguments.length?n(t=e*f/180):t/f*180},e}).raw=k,S.invert=function(t,n){if(!(t*t+4*n*n>f*f+l)){var e=t,r=n,a=25;do{var i,o=Math.sin(e),u=Math.sin(e/2),s=Math.cos(e/2),c=Math.sin(r),h=Math.cos(r),p=Math.sin(2*r),d=c*c,g=h*h,v=u*u,M=1-g*s*s,m=M?y(h*s)*Math.sqrt(i=1/M):i=0,b=2*m*h*u-t,x=m*c-n,w=i*(g*v+m*h*s*d),k=i*(.5*o*p-2*m*c*u),S=.25*i*(p*u-m*c*g*o),_=i*(d*s+m*v*h),q=k*S-_*w;if(!q)break;var z=(x*k-b*_)/q,E=(b*S-x*w)/q;e-=z,r-=E}while((Math.abs(z)>l||Math.abs(E)>l)&&--a>0);return[e,r]}},(d3.geo.aitoff=function(){return x(S)}).raw=S,(d3.geo.armadillo=function(){var t=f/9,n=t>0?1:-1,e=Math.tan(n*t),r=w(_),a=r(t),i=a.stream;return a.parallel=function(a){return arguments.length?(e=Math.tan((n=(t=a*f/180)>0?1:-1)*t),r(t)):t/f*180},a.stream=function(r){var o=a.rotate(),u=i(r),s=(a.rotate([0,0]),i(r));return a.rotate(o),u.sphere=function(){s.polygonStart(),s.lineStart();for(var r=-180*n;n*r<180;r+=90*n)s.point(r,90*n);for(;n*(r-=t)>=-180;)s.point(r,n*-Math.atan2(Math.cos(r*g/2),e)*v);s.lineEnd(),s.polygonEnd()},u},a}).raw=_,E.invert=function(t,n){if(n*=3/8,!(t*=3/8)&&Math.abs(n)>1)return null;var e=1+t*t+n*n,r=Math.sqrt(.5*(e-Math.sqrt(e*e-4*n*n))),a=m(r)/3,i=r?function(t){return Math.log(t+b(t*t-1))}(Math.abs(n/r))/3:function(t){return Math.log(t+b(t*t+1))}(Math.abs(t))/3,o=Math.cos(a),u=z(i),s=u*u-o*o;return[2*M(t)*Math.atan2(q(i)*o,.25-s),2*M(n)*Math.atan2(u*Math.sin(a),.25+s)]},(d3.geo.august=function(){return x(E)}).raw=E;var T=Math.log(1+Math.SQRT2);function N(t,n){var e=Math.abs(n);return e<f/4?[t,Math.log(Math.tan(f/4+n/2))]:[t*Math.cos(e)*(2*Math.SQRT2-1/Math.sin(e)),M(n)*(2*Math.SQRT2*(e-f/4)-Math.log(Math.tan(e/2)))]}N.invert=function(t,n){if((r=Math.abs(n))<T)return[t,2*Math.atan(Math.exp(n))-p];var e,r,a=Math.sqrt(8),i=f/4,o=25;do{var u=Math.cos(i/2),s=Math.tan(i/2);i-=e=(a*(i-f/4)-Math.log(s)-r)/(a-.5*u*u/s)}while(Math.abs(e)>h&&--o>0);return[t/(Math.cos(i)*(a-1/Math.sin(i))),M(n)*i]},(d3.geo.baker=function(){return x(N)}).raw=N;var A=d3.geo.azimuthalEquidistant.raw;function P(t){var n=2*f/t;function e(t,e){var r=A(t,e);if(Math.abs(t)>p){var a=Math.atan2(r[1],r[0]),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=n*Math.round((a-p)/n)+p,u=Math.atan2(Math.sin(a-=o),2-Math.cos(a));a=o+m(f/i*Math.sin(u))-u,r[0]=i*Math.cos(a),r[1]=i*Math.sin(a)}return r}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e);if(r>p){var a=Math.atan2(e,t),i=n*Math.round((a-p)/n)+p,o=a>i?-1:1,u=r*Math.cos(i-a),s=1/Math.tan(o*Math.acos((u-f)/Math.sqrt(f*(f-2*u)+r*r)));a=i+2*Math.atan((s+o*Math.sqrt(s*s-3))/3),t=r*Math.cos(a),e=r*Math.sin(a)}return A.invert(t,e)},e}function C(t){return function(n){var e,r=t*Math.sin(n),a=30;do{n-=e=(n+Math.sin(n)-r)/(1+Math.cos(n))}while(Math.abs(e)>l&&--a>0);return n/2}}function j(t,n,e){var r=C(e);function a(e,a){return[t*e*Math.cos(a=r(a)),n*Math.sin(a)]}return a.invert=function(r,a){var i=m(a/n);return[r/(t*Math.cos(i)),m((2*i+Math.sin(2*i))/e)]},a}(d3.geo.berghaus=function(){var t=5,n=w(P),e=n(t),r=e.stream,a=.01,i=-Math.cos(a*g),o=Math.sin(a*g);return e.lobes=function(e){return arguments.length?n(t=+e):t},e.stream=function(n){var u=e.rotate(),s=r(n),c=(e.rotate([0,0]),r(n));return e.rotate(u),s.sphere=function(){c.polygonStart(),c.lineStart();for(var n=0,e=360/t,r=2*f/t,u=90-180/t,s=p;n<t;++n,u-=e,s-=r)c.point(Math.atan2(o*Math.cos(s),i)*v,m(o*Math.sin(s))*v),u<-90?(c.point(-90,-180-u-a),c.point(-90,-180-u+a)):(c.point(90,u+a),c.point(90,u-a));c.lineEnd(),c.polygonEnd()},s},e}).raw=P;var I=C(f),L=j(Math.SQRT2/p,Math.SQRT2,f);function D(t,n){var e=2.00276,r=I(n);return[e*t/(1/Math.cos(n)+1.11072/Math.cos(r)),(n+Math.SQRT2*Math.sin(r))/e]}function R(t){var n=0,e=w(t),r=e(n);return r.parallel=function(t){return arguments.length?e(n=t*f/180):n/f*180},r}function O(t,n){return[t*Math.cos(n),n]}function F(t){if(!t)return O;var n=1/Math.tan(t);function e(e,r){var a=n+t-r,i=a?e*Math.cos(r)/a:a;return[a*Math.sin(i),n-a*Math.cos(i)]}return e.invert=function(e,r){var a=Math.sqrt(e*e+(r=n-r)*r),i=n+t-a;return[a/Math.cos(i)*Math.atan2(e,r),i]},e}function U(t){var n=Math.sin(t);function e(t,e){var r=p-e,a=r?t*n*Math.sin(r)/r:r;return[r*Math.sin(a)/n,p-r*Math.cos(a)]}return e.invert=function(t,e){var r=t*n,a=p-e,i=Math.sqrt(r*r+a*a),o=Math.atan2(r,a);return[(i?i/Math.sin(i):1)*o/n,p-i]},e}(d3.geo.mollweide=function(){return x(L)}).raw=L,D.invert=function(t,n){var e,r,a=2.00276,i=a*n,o=n<0?-f/4:f/4,u=25;do{r=i-Math.SQRT2*Math.sin(o),o-=e=(Math.sin(2*o)+2*o-f*Math.sin(r))/(2*Math.cos(2*o)+2+f*Math.cos(r)*Math.SQRT2*Math.cos(o))}while(Math.abs(e)>l&&--u>0);return r=i-Math.SQRT2*Math.sin(o),[t*(1/Math.cos(r)+1.11072/Math.cos(o))/a,r]},(d3.geo.boggs=function(){return x(D)}).raw=D,O.invert=function(t,n){return[t/Math.cos(n),n]},(d3.geo.sinusoidal=function(){return x(O)}).raw=O,(d3.geo.bonne=function(){return R(F).parallel(45)}).raw=F,(d3.geo.bottomley=function(){var t=f/6,n=d3.geo.projectionMutator(U),e=n(t);return e.variant=function(e){return arguments.length?n(t=+e):t},e}).raw=U;var H=j(1,4/f,f);function Q(t){for(var n,e=(t=t.map(function(t){return[t[0],t[1],Math.sin(t[1]),Math.cos(t[1])]}))[2],r=0;r<3;++r,e=n)n=t[r],e.v=Y(n[1]-e[1],e[3],e[2],n[3],n[2],n[0]-e[0]),e.point=[0,0];var a=V(t[0].v[0],t[2].v[0],t[1].v[0]),i=V(t[0].v[0],t[1].v[0],t[2].v[0]),o=f-a;t[2].point[1]=0,t[0].point[0]=-(t[1].point[0]=.5*t[0].v[0]);var u=[t[2].point[0]=t[0].point[0]+t[2].v[0]*Math.cos(a),2*(t[0].point[1]=t[1].point[1]=t[2].v[0]*Math.sin(a))];return function(n,e){for(var r=Math.sin(e),a=Math.cos(e),s=new Array(3),c=0;c<3;++c){var l=t[c];if(s[c]=Y(e-l[1],l[3],l[2],a,r,n-l[0]),!s[c][0])return l.point;s[c][1]=B(s[c][1]-l.v[1])}var h=u.slice();for(c=0;c<3;++c){var f=2==c?0:c+1,p=V(t[c].v[0],s[c][0],s[f][0]);s[c][1]<0&&(p=-p),c?1==c?(p=i-p,h[0]-=s[c][0]*Math.cos(p),h[1]-=s[c][0]*Math.sin(p)):(p=o-p,h[0]+=s[c][0]*Math.cos(p),h[1]+=s[c][0]*Math.sin(p)):(h[0]+=s[c][0]*Math.cos(p),h[1]-=s[c][0]*Math.sin(p))}return h[0]/=3,h[1]/=3,h}}function Y(t,n,e,r,a,i){var o,u=Math.cos(i);if(Math.abs(t)>1||Math.abs(i)>1)o=y(e*a+n*r*u);else{var s=Math.sin(.5*t),c=Math.sin(.5*i);o=2*m(Math.sqrt(s*s+n*r*c*c))}return Math.abs(o)>l?[o,Math.atan2(r*Math.sin(i),n*a-e*r*u)]:[0,0]}function V(t,n,e){return y(.5*(t*t+n*n-e*e)/(t*n))}function B(t){return t-2*f*Math.floor((t+f)/(2*f))}function W(t){return[t[0]*g,t[1]*g]}function G(t,n){var e=b(1-Math.sin(n));return[2/d*t*e,d*(1-e)]}function Z(t){var n=Math.tan(t);function e(t,e){return[t,(t?t/Math.sin(t):1)*(Math.sin(e)*Math.cos(t)-n*Math.cos(e))]}return e.invert=n?function(t,e){t&&(e*=Math.sin(t)/t);var r=Math.cos(t);return[t,2*Math.atan2(Math.sqrt(r*r+n*n-e*e)-r,n-e)]}:function(t,n){return[t,m(t?n*Math.tan(t)/t:n)]},e}function $(t,n){var e=Math.sqrt(3);return[e*t*(2*Math.cos(2*n/3)-1)/d,e*d*Math.sin(n/3)]}function X(t){var n=Math.cos(t);function e(t,e){return[t*n,Math.sin(e)/n]}return e.invert=function(t,e){return[t/n,m(e*n)]},e}function J(t){var n=Math.cos(t);function e(t,e){return[t*n,(1+n)*Math.tan(.5*e)]}return e.invert=function(t,e){return[t/n,2*Math.atan(e/(1+n))]},e}function K(t,n){var e=Math.sqrt(8/(3*f));return[e*t*(1-Math.abs(n)/f),e*n]}function tt(t,n){var e=Math.sqrt(4-3*Math.sin(Math.abs(n)));return[2/Math.sqrt(6*f)*t*e,M(n)*Math.sqrt(2*f/3)*(2-e)]}function nt(t,n){var e=Math.sqrt(f*(4+f));return[2/e*t*(1+Math.sqrt(1-4*n*n/(f*f))),4/e*n]}function et(t,n){var e=(2+p)*Math.sin(n);n/=2;for(var r=0,a=1/0;r<10&&Math.abs(a)>l;r++){var i=Math.cos(n);n-=a=(n+Math.sin(n)*(i+2)-e)/(2*i*(1+i))}return[2/Math.sqrt(f*(4+f))*t*(1+Math.cos(n)),2*Math.sqrt(f/(4+f))*Math.sin(n)]}function rt(t,n){return[t*(1+Math.cos(n))/Math.sqrt(2+f),2*n/Math.sqrt(2+f)]}function at(t,n){for(var e=(1+p)*Math.sin(n),r=0,a=1/0;r<10&&Math.abs(a)>l;r++)n-=a=(n+Math.sin(n)-e)/(1+Math.cos(n));return e=Math.sqrt(2+f),[t*(1+Math.cos(n))/e,2*n/e]}function it(t,n){var e=Math.sin(t/=2),r=Math.cos(t),a=Math.sqrt(Math.cos(n)),i=Math.cos(n/=2),o=Math.sin(n)/(i+Math.SQRT2*r*a),u=Math.sqrt(2/(1+o*o)),s=Math.sqrt((Math.SQRT2*i+(r+e)*a)/(Math.SQRT2*i+(r-e)*a));return[ot*(u*(s-1/s)-2*Math.log(s)),ot*(u*o*(s+1/s)-2*Math.atan(o))]}(d3.geo.bromley=function(){return x(H)}).raw=H,(d3.geo.chamberlin=function(){var t=[[0,0],[0,0],[0,0]],n=w(Q),e=n(t),r=e.rotate;return delete e.rotate,e.points=function(a){if(!arguments.length)return t;t=a;var i=d3.geo.centroid({type:"MultiPoint",coordinates:t}),o=[-i[0],-i[1]];return r.call(e,o),n(t.map(d3.geo.rotation(o)).map(W))},e.points([[-150,55],[-35,55],[-92.5,10]])}).raw=Q,G.invert=function(t,n){var e=(e=n/d-1)*e;return[e>0?t*Math.sqrt(f/e)/2:0,m(1-e)]},(d3.geo.collignon=function(){return x(G)}).raw=G,(d3.geo.craig=function(){return R(Z)}).raw=Z,$.invert=function(t,n){var e=Math.sqrt(3),r=3*m(n/(e*d));return[d*t/(e*(2*Math.cos(2*r/3)-1)),r]},(d3.geo.craster=function(){return x($)}).raw=$,(d3.geo.cylindricalEqualArea=function(){return R(X)}).raw=X,(d3.geo.cylindricalStereographic=function(){return R(J)}).raw=J,K.invert=function(t,n){var e=Math.sqrt(8/(3*f)),r=n/e;return[t/(e*(1-Math.abs(r)/f)),r]},(d3.geo.eckert1=function(){return x(K)}).raw=K,tt.invert=function(t,n){var e=2-Math.abs(n)/Math.sqrt(2*f/3);return[t*Math.sqrt(6*f)/(2*e),M(n)*m((4-e*e)/3)]},(d3.geo.eckert2=function(){return x(tt)}).raw=tt,nt.invert=function(t,n){var e=Math.sqrt(f*(4+f))/2;return[t*e/(1+b(1-n*n*(4+f)/(4*f))),n*e/2]},(d3.geo.eckert3=function(){return x(nt)}).raw=nt,et.invert=function(t,n){var e=.5*n*Math.sqrt((4+f)/f),r=m(e),a=Math.cos(r);return[t/(2/Math.sqrt(f*(4+f))*(1+a)),m((r+e*(a+2))/(2+p))]},(d3.geo.eckert4=function(){return x(et)}).raw=et,rt.invert=function(t,n){var e=Math.sqrt(2+f),r=n*e/2;return[e*t/(1+Math.cos(r)),r]},(d3.geo.eckert5=function(){return x(rt)}).raw=rt,at.invert=function(t,n){var e=1+p,r=Math.sqrt(e/2);return[2*t*r/(1+Math.cos(n*=r)),m((n+Math.sin(n))/e)]},(d3.geo.eckert6=function(){return x(at)}).raw=at,it.invert=function(t,n){var e=d3.geo.august.raw.invert(t/1.2,1.065*n);if(!e)return null;var r=e[0],a=e[1],i=20;t/=ot,n/=ot;do{var o=r/2,u=a/2,s=Math.sin(o),c=Math.cos(o),h=Math.sin(u),f=Math.cos(u),d=Math.cos(a),g=Math.sqrt(d),v=h/(f+Math.SQRT2*c*g),M=v*v,m=Math.sqrt(2/(1+M)),y=(Math.SQRT2*f+(c+s)*g)/(Math.SQRT2*f+(c-s)*g),b=Math.sqrt(y),x=b-1/b,w=b+1/b,k=m*x-2*Math.log(b)-t,S=m*v*w-2*Math.atan(v)-n,_=h&&Math.SQRT1_2*g*s*M/h,q=(Math.SQRT2*c*f+g)/(2*(f+Math.SQRT2*c*g)*(f+Math.SQRT2*c*g)*g),z=-.5*v*m*m*m,E=z*_,T=z*q,N=(N=2*f+Math.SQRT2*g*(c-s))*N*b,A=(Math.SQRT2*c*f*g+d)/N,P=-Math.SQRT2*s*h/(g*N),C=x*E-2*A/b+m*(A+A/y),j=x*T-2*P/b+m*(P+P/y),I=v*w*E-2*_/(1+M)+m*w*_+m*v*(A-A/y),L=v*w*T-2*q/(1+M)+m*w*q+m*v*(P-P/y),D=j*I-L*C;if(!D)break;var R=(S*j-k*L)/D,O=(k*I-S*C)/D;r-=R,a=Math.max(-p,Math.min(p,a-O))}while((Math.abs(R)>l||Math.abs(O)>l)&&--i>0);return Math.abs(Math.abs(a)-p)<l?[0,a]:i&&[r,a]};var ot=3+2*Math.SQRT2;function ut(t,n){var e=Math.tan(n/2);return[t*st*b(1-e*e),(1+st)*e]}(d3.geo.eisenlohr=function(){return x(it)}).raw=it,ut.invert=function(t,n){var e=n/(1+st);return[t?t/(st*b(1-e*e)):0,2*Math.atan(e)]};var st=Math.cos(35*g);function ct(t,n){var e=n/2,r=Math.cos(e);return[2*t/d*Math.cos(n)*r*r,d*Math.tan(e)]}(d3.geo.fahey=function(){return x(ut)}).raw=ut,ct.invert=function(t,n){var e=Math.atan(n/d),r=Math.cos(e),a=2*e;return[t*d*.5/(Math.cos(a)*r*r),a]},(d3.geo.foucaut=function(){return x(ct)}).raw=ct,d3.geo.gilbert=function(t){var n=d3.geo.equirectangular().scale(v).translate([0,0]);function e(n){return t([.5*n[0],m(Math.tan(.5*n[1]*g))*v])}return t.invert&&(e.invert=function(n){return(n=t.invert(n))[0]*=2,n[1]=2*Math.atan(Math.sin(n[1]*g))*v,n}),e.stream=function(e){e=t.stream(e);var r=n.stream({point:function(t,n){e.point(.5*t,m(Math.tan(.5*-n*g))*v)},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}});return r.sphere=function(){e.sphere()},r.valid=!1,r},e};var lt=d3.geo.azimuthalEquidistant.raw;function ht(t,n){var e=2*f/n,r=t*t;function a(n,a){var i=lt(n,a),o=i[0],u=i[1],s=o*o+u*u;if(s>r){var c=Math.sqrt(s),h=Math.atan2(u,o),d=e*Math.round(h/e),g=h-d,v=t*Math.cos(g),M=(t*Math.sin(g)-g*Math.sin(v))/(p-v),m=ft(g,M),y=(f-t)/pt(m,v,f);o=c;var b,x=50;do{o-=b=(t+pt(m,v,o)*y-c)/(m(o)*y)}while(Math.abs(b)>l&&--x>0);u=g*Math.sin(o),o<p&&(u-=M*(o-p));var w=Math.sin(d),k=Math.cos(d);i[0]=o*k-u*w,i[1]=o*w+u*k}return i}return a.invert=function(n,a){var i=n*n+a*a;if(i>r){var o=Math.sqrt(i),u=Math.atan2(a,n),s=e*Math.round(u/e),c=u-s;n=o*Math.cos(c);a=o*Math.sin(c);for(var l=n-p,d=Math.sin(n),g=a/d,v=n<p?1/0:0,M=10;;){var m=t*Math.sin(g),y=t*Math.cos(g),b=Math.sin(y),x=p-y,w=(m-g*b)/x,k=ft(g,w);if(Math.abs(v)<h||!--M)break;g-=v=(g*d-w*l-a)/(d-2*l*(x*(y+g*m*Math.cos(y)-b)-m*(m-g*b))/(x*x))}u=s+g,n=(o=t+pt(k,y,n)*(f-t)/pt(k,y,f))*Math.cos(u),a=o*Math.sin(u)}return lt.invert(n,a)},a}function ft(t,n){return function(e){var r=t*Math.cos(e);return e<p&&(r-=n),Math.sqrt(1+r*r)}}function pt(t,n,e){for(var r=(e-n)/50,a=t(n)+t(e),i=1,o=n;i<50;++i)a+=2*t(o+=r);return.5*a*r}function dt(t,n,e,r,a,i,o,u){function s(s,c){if(!c)return[t*s/f,0];var l=c*c,h=t+l*(n+l*(e+l*r)),p=c*(a-1+l*(i-u+l*o)),d=(h*h+p*p)/(2*p),g=s*Math.asin(h/d)/f;return[d*Math.sin(g),c*(1+l*u)+d*(1-Math.cos(g))]}return arguments.length<8&&(u=0),s.invert=function(s,c){var h,p,d=f*s/t,g=c,v=50;do{var M=g*g,m=t+M*(n+M*(e+M*r)),y=g*(a-1+M*(i-u+M*o)),x=m*m+y*y,w=2*y,k=x/w,S=k*k,_=Math.asin(m/k)/f,q=d*_;if(xB2=m*m,dxBdφ=(2*n+M*(4*e+6*M*r))*g,dyBdφ=a+M*(3*i+5*M*o),dpdφ=2*(m*dxBdφ+y*(dyBdφ-1)),dqdφ=2*(dyBdφ-1),dmdφ=(dpdφ*w-x*dqdφ)/(w*w),cosα=Math.cos(q),sinα=Math.sin(q),mcosα=k*cosα,msinα=k*sinα,dαdφ=d/f*(1/b(1-xB2/S))*(dxBdφ*k-m*dmdφ)/S,fx=msinα-s,fy=g*(1+M*u)+k-mcosα-c,δxδφ=dmdφ*sinα+mcosα*dαdφ,δxδλ=mcosα*_,δyδφ=1+dmdφ-(dmdφ*cosα-msinα*dαdφ),δyδλ=msinα*_,denominator=δxδφ*δyδλ-δyδφ*δxδλ,!denominator)break;d-=h=(fy*δxδφ-fx*δyδφ)/denominator,g-=p=(fx*δyδλ-fy*δxδλ)/denominator}while((Math.abs(h)>l||Math.abs(p)>l)&&--v>0);return[d,g]},s}(d3.geo.gingery=function(){var t=6,n=30*g,e=Math.cos(n),r=Math.sin(n),a=w(ht),i=a(n,t),o=i.stream,u=-Math.cos(.01*g),s=Math.sin(.01*g);return i.radius=function(i){return arguments.length?(e=Math.cos(n=i*g),r=Math.sin(n),a(n,t)):n*v},i.lobes=function(e){return arguments.length?a(n,t=+e):t},i.stream=function(n){var a=i.rotate(),c=o(n),l=(i.rotate([0,0]),o(n));return i.rotate(a),c.sphere=function(){l.polygonStart(),l.lineStart();for(var n=0,a=2*f/t,i=0;n<t;++n,i-=a)l.point(Math.atan2(s*Math.cos(i),u)*v,Math.asin(s*Math.sin(i))*v),l.point(Math.atan2(r*Math.cos(i-a/2),e)*v,Math.asin(r*Math.sin(i-a/2))*v);l.lineEnd(),l.polygonEnd()},c},i}).raw=ht;var gt=dt(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);(d3.geo.ginzburg4=function(){return x(gt)}).raw=gt;var vt=dt(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);(d3.geo.ginzburg5=function(){return x(vt)}).raw=vt;var Mt=dt(5/6*f,-.62636,-.0344,0,1.3493,-.05524,0,.045);function mt(t,n){var e=t*t,r=n*n;return[t*(1-.162388*r)*(.87-952426e-9*e*e),n*(1+r/12)]}(d3.geo.ginzburg6=function(){return x(Mt)}).raw=Mt,mt.invert=function(t,n){var e,r=t,a=n,i=50;do{var o=a*a;a-=e=(a*(1+o/12)-n)/(1+o/4)}while(Math.abs(e)>l&&--i>0);i=50,t/=1-.162388*o;do{var u=(u=r*r)*u;r-=e=(r*(.87-952426e-9*u)-t)/(.87-.00476213*u)}while(Math.abs(e)>l&&--i>0);return[r,a]},(d3.geo.ginzburg8=function(){return x(mt)}).raw=mt;var yt=dt(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function bt(t){var n=t(p,0)[0]-t(-p,0)[0];function e(){var t=!1,n=w(r),e=n(t);return e.quincuncial=function(e){return arguments.length?n(t=!!e):t},e}function r(e){var r=e?function(e,r){var a=Math.abs(e)<p,i=t(a?e:e>0?e-f:e+f,r),o=(i[0]-i[1])*Math.SQRT1_2,u=(i[0]+i[1])*Math.SQRT1_2;if(a)return[o,u];var s=n*Math.SQRT1_2,c=o>0^u>0?-1:1;return[c*o-M(u)*s,c*u-M(o)*s]}:function(e,r){var a=e>0?-.5:.5,i=t(e+a*f,r);return i[0]-=a*n,i};return t.invert&&(r.invert=e?function(e,r){var a=(e+r)*Math.SQRT1_2,i=(r-e)*Math.SQRT1_2,o=Math.abs(a)<.5*n&&Math.abs(i)<.5*n;if(!o){var u=n*Math.SQRT1_2,s=a>0^i>0?-1:1,c=-s*(e+(i>0?1:-1)*u),l=-s*(r+(a>0?1:-1)*u);a=(-c-l)*Math.SQRT1_2,i=(c-l)*Math.SQRT1_2}var h=t.invert(a,i);return o||(h[0]+=a>0?f:-f),h}:function(e,r){var a=e>0?-.5:.5,i=t.invert(e+a*n,r),o=i[0]-a*f;return o<-f?o+=2*f:o>f&&(o-=2*f),i[0]=o,i}),r}return e.raw=r,e}function xt(t,n){var e=M(t),r=M(n),a=Math.cos(n),i=Math.cos(t)*a,o=Math.sin(t)*a,u=Math.sin(r*n);t=Math.abs(Math.atan2(o,u)),n=m(i),Math.abs(t-p)>l&&(t%=p);var s=function(t,n){if(n===p)return[0,0];var e=Math.sin(n),r=e*e,a=r*r,i=1+a,o=1+3*a,u=1-a,s=m(1/Math.sqrt(i)),c=u+r*i*s,h=(1-e)/c,d=Math.sqrt(h),g=h*i,v=Math.sqrt(g),M=d*u;if(0===t)return[0,-(M+r*v)];var y=Math.cos(n),x=1/y,w=2*e*y,k=(-c*y-(-3*r+s*o)*w*(1-e))/(c*c),S=-x*w,_=-x*(r*i*k+h*o*w),q=-2*x*(u*(.5*k/d)-2*r*d*w),z=4*t/f;if(t>.222*f||n<f/4&&t>.175*f){var E=(M+r*b(g*(1+a)-M*M))/(1+a);if(t>f/4)return[E,E];var T=E,N=.5*E,A=50;E=.5*(N+T);do{var P=Math.sqrt(g-E*E),C=E*(q+S*P)+_*m(E/v)-z;if(!C)break;C<0?N=E:T=E,E=.5*(N+T)}while(Math.abs(T-N)>l&&--A>0)}else{var j,E=l,A=25;do{var I=E*E,P=b(g-I),L=q+S*P,C=E*L+_*m(E/v)-z,D=L+(_-S*I)/P;E-=j=P?C/D:0}while(Math.abs(j)>l&&--A>0)}return[E,-M-r*b(g-E*E)]}(t>f/4?p-t:t,n);return t>f/4&&(u=s[0],s[0]=-s[1],s[1]=-u),s[0]*=e,s[1]*=-r,s}function wt(t,n){var e,r,a,i,o,u;if(n<l)return[(i=Math.sin(t))-(e=.25*n*(t-i*(r=Math.cos(t))))*r,r+e*i,1-.5*n*i*i,t-e];if(n>=1-l)return e=.25*(1-n),r=z(t),u=t,a=1/r,[(i=((u=Math.exp(2*u))-1)/(u+1))+e*((o=r*q(t))-t)/(r*r),a-e*i*a*(o-t),a+e*i*a*(o+t),2*Math.atan(Math.exp(t))-p+e*(o-t)/r];var s=[1,0,0,0,0,0,0,0,0],c=[Math.sqrt(n),0,0,0,0,0,0,0,0],h=0;for(r=Math.sqrt(1-n),o=1;Math.abs(c[h]/s[h])>l&&h<8;)e=s[h++],c[h]=.5*(e-r),s[h]=.5*(e+r),r=b(e*r),o*=2;a=o*s[h]*t;do{a=.5*(m(i=c[h]*Math.sin(r=a)/s[h])+a)}while(--h);return[Math.sin(a),i=Math.cos(a),i/Math.cos(a-r),a]}function kt(t,n){if(!n)return t;if(1===n)return Math.log(Math.tan(t/2+f/4));for(var e=1,r=Math.sqrt(1-n),a=Math.sqrt(n),i=0;Math.abs(a)>l;i++){if(t%f){var o=Math.atan(r*Math.tan(t)/e);o<0&&(o+=f),t+=o+~~(t/f)*f}else t+=t;a=(e+r)/2,r=Math.sqrt(e*r),a=((e=a)-r)/2}return t/(Math.pow(2,i)*e)}function St(t,n){var e=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-e*e),a=kt(p,r*r),i=Math.log(Math.tan(f/4+Math.abs(n)/2)),o=Math.exp(-1*i)/Math.sqrt(e),u=function(t,n){var e=t*t,r=n+1,a=1-e-n*n;return[.5*((t>=0?p:-p)-Math.atan2(a,2*t)),-.25*Math.log(a*a+4*e)+.5*Math.log(r*r+e)]}(o*Math.cos(-1*t),o*Math.sin(-1*t)),s=function(t,n,e){var r=Math.abs(t),a=q(Math.abs(n));if(r){var i=1/Math.sin(r),o=1/(Math.tan(r)*Math.tan(r)),u=-(o+e*a*a*i*i-1+e),s=(e-1)*o,c=.5*(-u+Math.sqrt(u*u-4*s));return[kt(Math.atan(1/Math.sqrt(c)),e)*M(t),kt(Math.atan(b((c/o-1)/e)),1-e)*M(n)]}return[0,kt(Math.atan(a),1-e)*M(n)]}(u[0],u[1],r*r);return[-s[1],(n>=0?1:-1)*(.5*a-s[0])]}function _t(t){var n=Math.sin(t),e=Math.cos(t),r=qt(t);function a(t,a){var i=r(t,a);t=i[0],a=i[1];var o=Math.sin(a),u=Math.cos(a),s=Math.cos(t),c=y(n*o+e*u*s),h=Math.sin(c),f=Math.abs(h)>l?c/h:1;return[f*e*Math.sin(t),(Math.abs(t)>p?f:-f)*(n*u-e*o*s)]}return r.invert=qt(-t),a.invert=function(t,e){var a=Math.sqrt(t*t+e*e),i=-Math.sin(a),o=Math.cos(a),u=a*o,s=-e*i,c=a*n,l=b(u*u+s*s-c*c),h=Math.atan2(u*c+s*l,s*c-u*l),f=(a>p?-1:1)*Math.atan2(t*i,a*Math.cos(h)*o+e*Math.sin(h)*i);return r.invert(f,h)},a}function qt(t){var n=Math.sin(t),e=Math.cos(t);return function(t,r){var a=Math.cos(r),i=Math.cos(t)*a,o=Math.sin(t)*a,u=Math.sin(r);return[Math.atan2(o,i*e-u*n),m(u*e+i*n)]}}(d3.geo.ginzburg9=function(){return x(yt)}).raw=yt,xt.invert=function(t,n){var e=M(t),r=M(n),a=-e*t,i=-r*n,o=i/a<1,u=function(t,n){var e=0,r=1,a=.5,i=50;for(;;){var o=a*a,u=Math.sqrt(a),s=Math.asin(1/Math.sqrt(1+o)),c=1-o+a*(1+o)*s,l=(1-u)/c,p=Math.sqrt(l),d=l*(1+o),g=p*(1-o),v=d-t*t,M=Math.sqrt(v),m=n+g+a*M;if(Math.abs(r-e)<h||0==--i||0===m)break;m>0?e=a:r=a,a=.5*(e+r)}if(!i)return null;var y=Math.asin(u),b=Math.cos(y),x=1/b,w=2*u*b,k=(-c*b-(-3*a+s*(1+3*o))*w*(1-u))/(c*c);return[f/4*(t*(-2*x*(.5*k/p*(1-o)-2*a*p*w)+-x*w*M)+-x*(a*(1+o)*k+l*(1+3*o)*w)*Math.asin(t/Math.sqrt(d))),y]}(o?i:a,o?a:i),s=u[0],c=u[1];o&&(s=-p-s);var l=Math.cos(c),d=(t=Math.cos(s)*l,n=Math.sin(s)*l,Math.sin(c));return[e*(Math.atan2(n,-d)+f),r*m(t)]},d3.geo.gringorten=bt(xt),St.invert=function(t,n){var e,r,a,i=(Math.SQRT2-1)/(Math.SQRT2+1),o=Math.sqrt(1-i*i),u=function(t,n,e){if(!t)return[[0,(a=wt(n,1-e))[0]/a[1]],[1/a[1],0],[a[2]/a[1],0]];var r=wt(t,e);if(!n)return[[r[0],0],[r[1],0],[r[2],0]];var a,i=(a=wt(n,1-e))[1]*a[1]+e*r[0]*r[0]*a[0]*a[0];return[[r[0]*a[2]/i,r[1]*r[2]*a[0]*a[1]/i],[r[1]*a[1]/i,-r[0]*r[2]*a[0]*a[2]/i],[r[2]*a[1]*a[2]/i,-e*r[0]*r[1]*a[0]/i]]}(.5*kt(p,o*o)-n,-t,o*o),s=(e=u[0],r=u[1],a=r[0]*r[0]+r[1]*r[1],[(e[0]*r[0]+e[1]*r[1])/a,(e[1]*r[0]-e[0]*r[1])/a]);return[Math.atan2(s[1],s[0])/-1,2*Math.atan(Math.exp(-.5*Math.log(i*s[0]*s[0]+i*s[1]*s[1])))-p]},d3.geo.guyou=bt(St),(d3.geo.hammerRetroazimuthal=function(){var t=0,n=w(_t),e=n(t),r=e.rotate,a=e.stream,i=d3.geo.circle();return e.parallel=function(r){if(!arguments.length)return t/f*180;var a=e.rotate();return n(t=r*f/180).rotate(a)},e.rotate=function(n){return arguments.length?(r.call(e,[n[0],n[1]-t/f*180]),i.origin([-n[0],-n[1]]),e):((n=r.call(e))[1]+=t/f*180,n)},e.stream=function(t){return(t=a(t)).sphere=function(){t.polygonStart();var n,e=i.angle(89.99)().coordinates[0],r=e.length-1,a=-1;for(t.lineStart();++a<r;)t.point((n=e[a])[0],n[1]);for(t.lineEnd(),r=(e=i.angle(90.01)().coordinates[0]).length-1,t.lineStart();--a>=0;)t.point((n=e[a])[0],n[1]);t.lineEnd(),t.polygonEnd()},t},e}).raw=_t;var zt=d3.geo.azimuthalEqualArea.raw;function Et(t,n){if(arguments.length<2&&(n=t),1===n)return zt;if(n===1/0)return Tt;function e(e,r){var a=zt(e/n,r);return a[0]*=t,a}return e.invert=function(e,r){var a=zt.invert(e/t,r);return a[0]*=n,a},e}function Tt(t,n){return[t*Math.cos(n)/Math.cos(n/=2),2*Math.sin(n)]}function Nt(t,n){for(var e,r=Math.sin(n)*(n<0?2.43763:2.67595),a=0;a<20&&(n-=e=(n+Math.sin(n)-r)/(1+Math.cos(n)),!(Math.abs(e)<l));a++);return[.85*t*Math.cos(n*=.5),Math.sin(n)*(n<0?1.93052:1.75859)]}Tt.invert=function(t,n){var e=2*m(n/2);return[t*Math.cos(e/2)/Math.cos(e),e]},(d3.geo.hammer=function(){var t=2,n=w(Et),e=n(t);return e.coefficient=function(e){return arguments.length?n(t=+e):t},e}).raw=Et,Nt.invert=function(t,n){var e=Math.abs(e=n*(n<0?.5179951515653813:.5686373742600607))>1-l?e>0?p:-p:m(e);return[1.1764705882352942*t/Math.cos(e),Math.abs(e=((e+=e)+Math.sin(e))*(n<0?.4102345310814193:.3736990601468637))>1-l?e>0?p:-p:m(e)]},(d3.geo.hatano=function(){return x(Nt)}).raw=Nt;var At=41+48/36+37/3600;function Pt(t){var n=d3.geo.cylindricalEqualArea.raw(0),e=At*f/180,r=2*f,a=d3.geo.collignon.raw(f,e)[0]-d3.geo.collignon.raw(-f,e)[0],i=n(0,e)[1],o=d3.geo.collignon.raw(0,e)[1],u=d3.geo.collignon.raw(0,p)[1]-o,s=2*f/t;function c(c,l){var h,p=Math.abs(l);if(p>e){var d=Math.min(t-1,Math.max(0,Math.floor((c+f)/s)));c+=f*(t-1)/t-d*s,(h=d3.geo.collignon.raw(c,p))[0]=h[0]*r/a-r*(t-1)/(2*t)+d*r/t,h[1]=i+4*(h[1]-o)*u/r,l<0&&(h[1]=-h[1])}else h=n(c,l);return h[0]/=2,h}return c.invert=function(e,c){e*=2;var l=Math.abs(c);if(l>i){var h=Math.min(t-1,Math.max(0,Math.floor((e+f)/s)));e=(e+f*(t-1)/t-h*s)*a/r;var p=d3.geo.collignon.raw.invert(e,.25*(l-i)*r/u+o);return p[0]-=f*(t-1)/t-h*s,c<0&&(p[1]=-p[1]),p}return n.invert(e,c)},c}function Ct(t){var n,e=1+t,r=m(Math.sin(1/e)),a=2*Math.sqrt(f/(n=f+4*r*e)),i=.5*a*(e+Math.sqrt(t*(2+t))),o=t*t,u=e*e;function s(s,c){var l,d,g=1-Math.sin(c);if(g&&g<2){var v,M=p-c,m=25;do{var y=Math.sin(M),b=Math.cos(M),x=r+Math.atan2(y,e-b),w=1+u-2*e*b;M-=v=(M-o*r-e*y+w*x-.5*g*n)/(2*e*y*x)}while(Math.abs(v)>h&&--m>0);l=a*Math.sqrt(w),d=s*x/f}else l=a*(t+g),d=s*r/f;return[l*Math.sin(d),i-l*Math.cos(d)]}return s.invert=function(t,s){var c=t*t+(s-=i)*s,l=(1+u-c/(a*a))/(2*e),h=y(l),p=Math.sin(h),d=r+Math.atan2(p,e-l);return[m(t/Math.sqrt(c))*f/d,m(1-2*(h-o*r-e*p+(1+u-2*e*l)*d)/n)]},s}(d3.geo.healpix=function(){var t=2,n=w(Pt),e=n(t),r=e.stream;return e.lobes=function(e){return arguments.length?n(t=+e):t},e.stream=function(n){var a=e.rotate(),i=r(n),o=(e.rotate([0,0]),r(n));return e.rotate(a),i.sphere=function(){var n;d3.geo.stream((n=180/t,{type:"Polygon",coordinates:[d3.range(-180,180+n/2,n).map(function(t,n){return[t,1&n?90-1e-6:At]}).concat(d3.range(180,-180-n/2,-n).map(function(t,n){return[t,1&n?1e-6-90:-At]}))]}),o)},i},e}).raw=Pt,(d3.geo.hill=function(){var t=1,n=w(Ct),e=n(t);return e.ratio=function(e){return arguments.length?n(t=+e):t},e}).raw=Ct;var jt=.7109889596207567,It=.0528035274542;function Lt(t,n){return n>-jt?((t=L(t,n))[1]+=It,t):O(t,n)}function Dt(t,n){return Math.abs(n)>jt?((t=L(t,n))[1]-=n>0?It:-It,t):O(t,n)}function Rt(t,n){return[3*t/(2*f)*Math.sqrt(f*f/3-n*n),n]}function Ot(t){function n(n,e){if(Math.abs(Math.abs(e)-p)<l)return[0,e<0?-2:2];var r=Math.sin(e),a=Math.pow((1+r)/(1-r),t/2),i=.5*(a+1/a)+Math.cos(n*=t);return[2*Math.sin(n)/i,(a-1/a)/i]}return n.invert=function(n,e){var r=Math.abs(e);if(Math.abs(r-2)<l)return n?null:[0,M(e)*p];if(r>2)return null;var a=(n/=2)*n,i=(e/=2)*e,o=2*e/(1+a+i);return o=Math.pow((1+o)/(1-o),1/t),[Math.atan2(2*n,1-a-i)/t,m((o-1)/(o+1))]},n}function Ft(t,n){return[t*(1+Math.sqrt(Math.cos(n)))/2,n/(Math.cos(n/2)*Math.cos(t/6))]}function Ut(t,n){var e=t*t,r=n*n;return[t*(.975534+r*(-.0143059*e-.119161+-.0547009*r)),n*(1.00384+e*(.0802894+-.02855*r+199025e-9*e)+r*(.0998909+-.0491032*r))]}function Ht(t,n){return[Math.sin(t)/Math.cos(n),Math.tan(n)*Math.cos(t)]}function Qt(t){var n=Math.cos(t),e=Math.tan(f/4+t/2);function r(r,a){var i=a-t,o=Math.abs(i)<l?r*n:Math.abs(o=f/4+a/2)<l||Math.abs(Math.abs(o)-p)<l?0:r*i/Math.log(Math.tan(o)/e);return[o,i]}return r.invert=function(r,a){var i,o=a+t;return[Math.abs(a)<l?r/n:Math.abs(i=f/4+o/2)<l||Math.abs(Math.abs(i)-p)<l?0:r*Math.log(Math.tan(i)/e)/a,o]},r}function Yt(t,n){return[t,1.25*Math.log(Math.tan(f/4+.4*n))]}function Vt(t){var n=t.length-1;function e(e,r){for(var a,i=Math.cos(r),o=2/(1+i*Math.cos(e)),u=o*i*Math.sin(e),s=o*Math.sin(r),c=n,l=t[c],h=l[0],f=l[1];--c>=0;)h=(l=t[c])[0]+u*(a=h)-s*f,f=l[1]+u*f+s*a;return[h=u*(a=h)-s*f,f=u*f+s*a]}return e.invert=function(e,r){var a=20,i=e,o=r;do{for(var u,s=n,c=t[s],h=c[0],f=c[1],p=0,d=0;--s>=0;)p=h+i*(u=p)-o*d,d=f+i*d+o*u,h=(c=t[s])[0]+i*(u=h)-o*f,f=c[1]+i*f+o*u;var g,v,M=(p=h+i*(u=p)-o*d)*p+(d=f+i*d+o*u)*d;i-=g=((h=i*(u=h)-o*f-e)*p+(f=i*f+o*u-r)*d)/M,o-=v=(f*p-h*d)/M}while(Math.abs(g)+Math.abs(v)>l*l&&--a>0);if(a){var y=Math.sqrt(i*i+o*o),b=2*Math.atan(.5*y),x=Math.sin(b);return[Math.atan2(i*x,y*Math.cos(b)),y?m(o*x/y):0]}},e}Lt.invert=function(t,n){return n>-jt?L.invert(t,n-It):O.invert(t,n)},(d3.geo.sinuMollweide=function(){return x(Lt).rotate([-20,-55])}).raw=Lt,Dt.invert=function(t,n){return Math.abs(n)>jt?L.invert(t,n+(n>0?It:-It)):O.invert(t,n)},(d3.geo.homolosine=function(){return x(Dt)}).raw=Dt,Rt.invert=function(t,n){return[2/3*f*t/Math.sqrt(f*f/3-n*n),n]},(d3.geo.kavrayskiy7=function(){return x(Rt)}).raw=Rt,(d3.geo.lagrange=function(){var t=.5,n=w(Ot),e=n(t);return e.spacing=function(e){return arguments.length?n(t=+e):t},e}).raw=Ot,Ft.invert=function(t,n){var e=Math.abs(t),r=Math.abs(n),a=f/Math.SQRT2,i=l,o=p;r<a?o*=r/a:i+=6*y(a/r);for(var u=0;u<25;u++){var s=Math.sin(o),c=b(Math.cos(o)),h=Math.sin(o/2),d=Math.cos(o/2),g=Math.sin(i/6),v=Math.cos(i/6),M=.5*i*(1+c)-e,m=o/(d*v)-r,x=c?-.25*i*s/c:0,w=.5*(1+c),k=(1+.5*o*h/d)/(d*v),S=o/d*(g/6)/(v*v),_=x*S-k*w,q=(M*S-m*w)/_,z=(m*x-M*k)/_;if(o-=q,i-=z,Math.abs(q)<l&&Math.abs(z)<l)break}return[t<0?-i:i,n<0?-o:o]},(d3.geo.larrivee=function(){return x(Ft)}).raw=Ft,Ut.invert=function(t,n){var e=M(t)*f,r=n/2,a=50;do{var i=e*e,o=r*r,u=e*r,s=e*(.975534+o*(-.0143059*i-.119161+-.0547009*o))-t,c=r*(1.00384+i*(.0802894+-.02855*o+199025e-9*i)+o*(.0998909+-.0491032*o))-n,h=.975534-o*(.119161+3*i*.0143059+.0547009*o),p=-u*(.238322+.2188036*o+.0286118*i),d=u*(.1605788+7961e-7*i+-.0571*o),g=1.00384+i*(.0802894+199025e-9*i)+o*(3*(.0998909-.02855*i)-.245516*o),v=p*d-g*h,m=(c*p-s*g)/v,y=(s*d-c*h)/v;e-=m,r-=y}while((Math.abs(m)>l||Math.abs(y)>l)&&--a>0);return a&&[e,r]},(d3.geo.laskowski=function(){return x(Ut)}).raw=Ut,Ht.invert=function(t,n){var e=t*t,r=n*n,a=r+1,i=t?Math.SQRT1_2*Math.sqrt((a-Math.sqrt(e*e+2*e*(r-1)+a*a))/e+1):1/Math.sqrt(a);return[m(t*i),M(n)*y(i)]},(d3.geo.littrow=function(){return x(Ht)}).raw=Ht,(d3.geo.loximuthal=function(){return R(Qt).parallel(40)}).raw=Qt,Yt.invert=function(t,n){return[t,2.5*Math.atan(Math.exp(.8*n))-.625*f]},(d3.geo.miller=function(){return x(Yt)}).raw=Yt;var Bt={alaska:[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gs48:[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],gs50:[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],miller:[[.9245,0],[0,0],[.01943,0]],lee:[[.721316,0],[0,0],[-.00881625,-.00617325]]};function Wt(t,n){var e=Math.sqrt(6),r=Math.sqrt(7),a=Math.asin(7*Math.sin(n)/(3*e));return[e*t*(2*Math.cos(2*a/3)-1)/r,9*Math.sin(a/3)/r]}function Gt(t,n){for(var e,r=(1+Math.SQRT1_2)*Math.sin(n),a=n,i=0;i<25&&(a-=e=(Math.sin(a/2)+Math.sin(a)-r)/(.5*Math.cos(a/2)+Math.cos(a)),!(Math.abs(e)<l));i++);return[t*(1+2*Math.cos(a)/Math.cos(a/2))/(3*Math.SQRT2),2*Math.sqrt(3)*Math.sin(a/2)/Math.sqrt(2+Math.SQRT2)]}function Zt(t,n){for(var e,r=Math.sqrt(6/(4+f)),a=(1+f/4)*Math.sin(n),i=n/2,o=0;o<25&&(i-=e=(i/2+Math.sin(i)-a)/(.5+Math.cos(i)),!(Math.abs(e)<l));o++);return[r*(.5+Math.cos(i))*t/1.5,r*i]}function $t(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function Xt(t,n){return[t*(1+Math.cos(n))/2,2*(n-Math.tan(n/2))]}(d3.geo.modifiedStereographic=function(){var t=Bt.miller,n=w(Vt),e=n(t);return e.coefficients=function(e){return arguments.length?n(t="string"==typeof e?Bt[e]:e):t},e}).raw=Vt,Wt.invert=function(t,n){var e=Math.sqrt(6),r=Math.sqrt(7),a=3*m(n*r/9);return[t*r/(e*(2*Math.cos(2*a/3)-1)),m(3*Math.sin(a)*e/7)]},(d3.geo.mtFlatPolarParabolic=function(){return x(Wt)}).raw=Wt,Gt.invert=function(t,n){var e=n*Math.sqrt(2+Math.SQRT2)/(2*Math.sqrt(3)),r=2*m(e);return[3*Math.SQRT2*t/(1+2*Math.cos(r)/Math.cos(r/2)),m((e+Math.sin(r))/(1+Math.SQRT1_2))]},(d3.geo.mtFlatPolarQuartic=function(){return x(Gt)}).raw=Gt,Zt.invert=function(t,n){var e=Math.sqrt(6/(4+f)),r=n/e;return Math.abs(Math.abs(r)-p)<l&&(r=r<0?-p:p),[1.5*t/(e*(.5+Math.cos(r))),m((r/2+Math.sin(r))/(1+f/4))]},(d3.geo.mtFlatPolarSinusoidal=function(){return x(Zt)}).raw=Zt,$t.invert=function(t,n){var e,r=n,a=25;do{var i=r*r,o=i*i;r-=e=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-n)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(Math.abs(e)>l&&--a>0);return[t/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},(d3.geo.naturalEarth=function(){return x($t)}).raw=$t,Xt.invert=function(t,n){for(var e=n/2,r=0,a=1/0;r<10&&Math.abs(a)>l;r++){var i=Math.cos(n/2);n-=a=(n-Math.tan(n/2)-e)/(1-.5/(i*i))}return[2*t/(1+Math.cos(n)),n]},(d3.geo.nellHammer=function(){return x(Xt)}).raw=Xt;var Jt=1.0148,Kt=.23185,tn=-.14499,nn=.02406,en=Jt,rn=5*Kt,an=7*tn,on=9*nn;function un(t,n){var e=n*n;return[t,n*(Jt+e*e*(Kt+e*(tn+nn*e)))]}un.invert=function(t,n){n>1.790857183?n=1.790857183:n<-1.790857183&&(n=-1.790857183);var e,r=n;do{var a=r*r;r-=e=(r*(Jt+a*a*(Kt+a*(tn+nn*a)))-n)/(en+a*a*(rn+a*(an+on*a)))}while(Math.abs(e)>l);return[t,r]},(d3.geo.patterson=function(){return x(un)}).raw=un;var sn=bt(St);function cn(t,n){if(Math.abs(n)<l)return[t,0];var e=Math.tan(n),r=t*Math.sin(n);return[Math.sin(r)/e,n+(1-Math.cos(r))/e]}function ln(t){var n=Math.sin(t);function e(e,r){var a=n?Math.tan(e*n/2)/n:e/2;if(!r)return[2*a,-t];var i=2*Math.atan(a*Math.sin(r)),o=1/Math.tan(r);return[Math.sin(i)*o,r+(1-Math.cos(i))*o-t]}return e.invert=function(e,r){if(Math.abs(r+=t)<l)return[n?2*Math.atan(n*e/2)/n:e,0];var a,i=e*e+r*r,o=0,u=10;do{var s=Math.tan(o),c=1/Math.cos(o),h=i-2*r*o+o*o;o-=a=(s*h+2*(o-r))/(2+h*c*c+2*(o-r)*s)}while(Math.abs(a)>l&&--u>0);var p=e*(s=Math.tan(o)),d=Math.tan(Math.abs(r)<Math.abs(o+1/s)?.5*m(p):.5*y(p)+f/4)/Math.sin(o);return[n?2*Math.atan(n*d)/n:2*d,o]},e}(d3.geo.peirceQuincuncial=function(){return sn().quincuncial(!0).rotate([-90,-90,45]).clipAngle(180-1e-6)}).raw=sn.raw,cn.invert=function(t,n){if(Math.abs(n)<l)return[t,0];var e,r=t*t+n*n,a=.5*n,i=10;do{var o=Math.tan(a),u=1/Math.cos(a),s=r-2*n*a+a*a;a-=e=(o*s+2*(a-n))/(2+s*u*u+2*(a-n)*o)}while(Math.abs(e)>l&&--i>0);return o=Math.tan(a),[(Math.abs(n)<Math.abs(a+1/o)?m(t*o):M(t)*(y(Math.abs(t*o))+p))/Math.sin(a),a]},(d3.geo.polyconic=function(){return x(cn)}).raw=cn,(d3.geo.rectangularPolyconic=function(){return R(ln)}).raw=ln;var hn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function fn(t,n){var e,r=Math.min(18,36*Math.abs(n)/f),a=Math.floor(r),i=r-a,o=(e=hn[a])[0],u=e[1],s=(e=hn[++a])[0],c=e[1],l=(e=hn[Math.min(19,++a)])[0],h=e[1];return[t*(s+i*(l-o)/2+i*i*(l-2*s+o)/2),(n>0?p:-p)*(c+i*(h-u)/2+i*i*(h-2*c+u)/2)]}function pn(t,n){var e=function(t){function n(n,e){var r=Math.cos(e),a=(t-1)/(t-r*Math.cos(n));return[a*r*Math.sin(n),a*Math.sin(e)]}return n.invert=function(n,e){var r=n*n+e*e,a=Math.sqrt(r),i=(t-Math.sqrt(1-r*(t+1)/(t-1)))/((t-1)/a+a/(t-1));return[Math.atan2(n*i,a*Math.sqrt(1-i*i)),a?m(e*i/a):0]},n}(t);if(!n)return e;var r=Math.cos(n),a=Math.sin(n);function i(n,i){var o=e(n,i),u=o[1],s=u*a/(t-1)+r;return[o[0]*r/s,u/s]}return i.invert=function(n,i){var o=(t-1)/(t-1-i*a);return e.invert(o*n,o*i*r)},i}function dn(t,n){var e=Math.tan(n/2),r=Math.sin(f/4*e);return[t*(.74482-.34588*r*r),1.70711*e]}function gn(t){if(!t)return d3.geo.azimuthalEquidistant.raw;var n=-t/2,e=-n,r=t*t,a=Math.tan(e),i=.5/Math.sin(e);function o(a,i){var o=y(Math.cos(i)*Math.cos(a-n)),u=y(Math.cos(i)*Math.cos(a-e));return[((o*=o)-(u*=u))/(2*t),(i<0?-1:1)*b(4*r*u-(r-o+u)*(r-o+u))/(2*t)]}return o.invert=function(t,r){var o,u,s=r*r,c=Math.cos(Math.sqrt(s+(o=t+n)*o)),l=Math.cos(Math.sqrt(s+(o=t+e)*o));return[Math.atan2(u=c-l,o=(c+l)*a),(r<0?-1:1)*y(Math.sqrt(o*o+u*u)*i)]},o}function vn(t){var n=Math.cos(t);function e(t,e){var r=d3.geo.gnomonic.raw(t,e);return r[0]*=n,r}return e.invert=function(t,e){return d3.geo.gnomonic.raw.invert(t/n,e)},e}function Mn(t,n){if(Math.abs(n)<l)return[t,0];var e=Math.abs(n/p),r=m(e);if(Math.abs(t)<l||Math.abs(Math.abs(n)-p)<l)return[0,M(n)*f*Math.tan(r/2)];var a=Math.cos(r),i=Math.abs(f/t-t/f)/2,o=i*i,u=a/(e+a-1),s=u*(2/e-1),c=s*s,h=c+o,d=u-c,g=o+u;return[M(t)*f*(i*d+Math.sqrt(o*d*d-h*(u*u-c)))/h,M(n)*f*(s*g-i*Math.sqrt((o+1)*h-g*g))/h]}function mn(t,n){if(Math.abs(n)<l)return[t,0];var e=Math.abs(n/p),r=m(e);if(Math.abs(t)<l||Math.abs(Math.abs(n)-p)<l)return[0,M(n)*f*Math.tan(r/2)];var a=Math.cos(r),i=Math.abs(f/t-t/f)/2,o=i*i,u=a*(Math.sqrt(1+o)-i*a)/(1+o*e*e);return[M(t)*f*u,M(n)*f*b(1-u*(2*i+u))]}function yn(t,n){if(Math.abs(n)<l)return[t,0];var e=n/p,r=m(e);if(Math.abs(t)<l||Math.abs(Math.abs(n)-p)<l)return[0,f*Math.tan(r/2)];var a=(f/t-t/f)/2,i=e/(1+Math.cos(r));return[f*(M(t)*b(a*a+1-i*i)-a),f*i]}function bn(t,n){if(!n)return[t,0];var e=Math.abs(n);if(!t||e===p)return[0,n];var r=e/p,a=r*r,i=(8*r-a*(a+2)-5)/(2*a*(r-1)),o=i*i,u=r*i,s=a+o+2*u,c=r+3*i,l=t/p,h=l+1/l,f=M(Math.abs(t)-p)*Math.sqrt(h*h-4),d=f*f,g=(f*(s+o-1)+2*b(s*(a+o*d-1)+(1-a)*(a*(c*c+4*o)+12*u*o+4*o*o)))/(4*s+d);return[M(t)*p*g,M(n)*p*b(1+f*Math.abs(g)-g*g)]}hn.forEach(function(t){t[1]*=1.0144}),fn.invert=function(t,n){var e=n/p,r=90*e,a=Math.min(18,Math.abs(r/5)),i=Math.max(0,Math.floor(a));do{var o=hn[i][1],u=hn[i+1][1],s=hn[Math.min(19,i+2)][1],c=s-o,l=s-2*u+o,f=2*(Math.abs(e)-u)/c,d=l/c,M=f*(1-d*f*(1-2*d*f));if(M>=0||1===i){r=(n>=0?5:-5)*(M+a);var m,y=50;do{M=(a=Math.min(18,Math.abs(r)/5))-(i=Math.floor(a)),o=hn[i][1],u=hn[i+1][1],s=hn[Math.min(19,i+2)][1],r-=(m=(n>=0?p:-p)*(u+M*(s-o)/2+M*M*(s-2*u+o)/2)-n)*v}while(Math.abs(m)>h&&--y>0);break}}while(--i>=0);var b=hn[i][0],x=hn[i+1][0],w=hn[Math.min(19,i+2)][0];return[t/(x+M*(w-b)/2+M*M*(w-2*x+b)/2),r*g]},(d3.geo.robinson=function(){return x(fn)}).raw=fn,(d3.geo.satellite=function(){var t=1.4,n=0,e=w(pn),r=e(t,n);return r.distance=function(r){return arguments.length?e(t=+r,n):t},r.tilt=function(r){return arguments.length?e(t,n=r*f/180):180*n/f},r}).raw=pn,dn.invert=function(t,n){var e=n/1.70711,r=Math.sin(f/4*e);return[t/(.74482-.34588*r*r),2*Math.atan(e)]},(d3.geo.times=function(){return x(dn)}).raw=dn,(d3.geo.twoPointEquidistant=function(){var t=[[0,0],[0,0]],n=w(gn),e=n(0),r=e.rotate;return delete e.rotate,e.points=function(e){if(!arguments.length)return t;t=e;var a=d3.geo.interpolate(e[0],e[1]),i=a(.5),o=d3.geo.rotation([-i[0],-i[1]])(e[0]),u=.5*a.distance,s=-m(Math.sin(o[1]*g)/Math.sin(u));return o[0]>0&&(s=f-s),r.call(o,[-i[0],-i[1],-s*v]),n(2*u)},e}).raw=gn,(d3.geo.twoPointAzimuthal=function(){var t=[[0,0],[0,0]],n=w(vn),e=n(0),r=e.rotate;return delete e.rotate,e.points=function(e){if(!arguments.length)return t;t=e;var a=d3.geo.interpolate(e[0],e[1]),i=a(.5),o=d3.geo.rotation([-i[0],-i[1]])(e[0]),u=.5*a.distance,s=-m(Math.sin(o[1]*g)/Math.sin(u));return o[0]>0&&(s=f-s),r.call(o,[-i[0],-i[1],-s*v]),n(u)},e}).raw=vn,Mn.invert=function(t,n){if(Math.abs(n)<l)return[t,0];if(Math.abs(t)<l)return[0,p*Math.sin(2*Math.atan(n/f))];var e=(t/=f)*t,r=(n/=f)*n,a=e+r,i=a*a,o=-Math.abs(n)*(1+a),u=o-2*r+e,s=-2*o+1+2*r+i,c=r/s+(2*u*u*u/(s*s*s)-9*o*u/(s*s))/27,h=(o-u*u/(3*s))/s,d=2*Math.sqrt(-h/3),g=y(3*c/(h*d))/3;return[f*(a-1+Math.sqrt(1+2*(e-r)+i))/(2*t),M(n)*f*(-d*Math.cos(g+f/3)-u/(3*s))]},(d3.geo.vanDerGrinten=function(){return x(Mn)}).raw=Mn,mn.invert=function(t,n){if(!t)return[0,p*Math.sin(2*Math.atan(n/f))];var e=Math.abs(t/f),r=(1-e*e-(n/=f)*n)/(2*e),a=r*r,i=Math.sqrt(a+1);return[M(t)*f*(i-r),M(n)*p*Math.sin(2*Math.atan2(Math.sqrt((1-2*r*e)*(r+i)-e),Math.sqrt(i+r+e)))]},(d3.geo.vanDerGrinten2=function(){return x(mn)}).raw=mn,yn.invert=function(t,n){if(!n)return[t,0];var e=n/f,r=(f*f*(1-e*e)-t*t)/(2*f*t);return[t?f*(M(t)*Math.sqrt(r*r+1)-r):0,p*Math.sin(2*Math.atan(e))]},(d3.geo.vanDerGrinten3=function(){return x(yn)}).raw=yn,bn.invert=function(t,n){if(!t||!n)return[t,n];n/=f;var e=M(t)*t/p,r=(e*e-1+4*n*n)/Math.abs(e),a=r*r,i=2*n,o=50;do{var u=i*i,s=(8*i-u*(u+2)-5)/(2*u*(i-1)),c=(3*i-u*i-10)/(2*u*i),h=s*s,d=i*s,g=i+s,v=g*g,m=i+3*s,y=v*(u+h*a-1)+(1-u)*(u*(m*m+4*h)+h*(12*d+4*h)),b=-2*g*(4*d*h+(1-4*u+3*u*u)*(1+c)+h*(14*u-6-a+(8*u-8-2*a)*c)+d*(12*u-8+(10*u-10-a)*c)),x=Math.sqrt(y);i-=δ=(r*(v+h-1)+2*x-e*(4*v+a))/(r*(2*s*c+2*g*(1+c))+b/x-8*g*(r*(-1+h+v)+2*x)*(1+c)/(a+4*v))}while(δ>l&&--o>0);return[M(t)*(Math.sqrt(r*r+4)+r)*f/4,p*i]},(d3.geo.vanDerGrinten4=function(){return x(bn)}).raw=bn;var xn,wn,kn=(xn=4*f+3*Math.sqrt(3),j((wn=2*Math.sqrt(2*f*Math.sqrt(3)/xn))*Math.sqrt(3)/f,wn,xn/6));function Sn(t,n){return[t*Math.sqrt(1-3*n*n/(f*f)),n]}function _n(t,n){var e=.90631*Math.sin(n),r=Math.sqrt(1-e*e),a=Math.sqrt(2/(1+r*Math.cos(t/=3)));return[2.66723*r*a*Math.sin(t),1.24104*e*a]}function qn(t,n){var e=Math.cos(n),r=Math.cos(t)*e,a=1-r,i=Math.cos(t=Math.atan2(Math.sin(t)*e,-Math.sin(n))),o=Math.sin(t);return[o*(e=b(1-r*r))-i*a,-i*e-o*a]}function zn(t,n){var e=S(t,n);return[(e[0]+t/p)/2,(e[1]+n)/2]}function En(t,n){var e=Math.cos(n),r=Math.tan(n),a=Math.cos(t),i=Math.sin(t);return[Math.asin(e*i),Math.atan2(r,a)]}(d3.geo.wagner4=function(){return x(kn)}).raw=kn,Sn.invert=function(t,n){return[t/Math.sqrt(1-3*n*n/(f*f)),n]},(d3.geo.wagner6=function(){return x(Sn)}).raw=Sn,_n.invert=function(t,n){var e=t/2.66723,r=n/1.24104,a=Math.sqrt(e*e+r*r),i=2*m(a/2);return[3*Math.atan2(t*Math.tan(i),2.66723*a),a&&m(n*Math.sin(i)/(1.24104*.90631*a))]},(d3.geo.wagner7=function(){return x(_n)}).raw=_n,qn.invert=function(t,n){var e=-.5*(t*t+n*n),r=Math.sqrt(-e*(2+e)),a=n*e+t*r,i=t*e-n*r,o=Math.sqrt(i*i+a*a);return[Math.atan2(r*a,o*(1+e)),o?-m(r*i/o):0]},(d3.geo.wiechel=function(){return x(qn)}).raw=qn,zn.invert=function(t,n){var e=t,r=n,a=25;do{var i,o=Math.cos(r),u=Math.sin(r),s=Math.sin(2*r),c=u*u,h=o*o,f=Math.sin(e),d=Math.cos(e/2),g=Math.sin(e/2),v=g*g,M=1-h*d*d,m=M?y(o*d)*Math.sqrt(i=1/M):i=0,b=.5*(2*m*o*g+e/p)-t,x=.5*(m*u+r)-n,w=.5*i*(h*v+m*o*d*c)+.5/p,k=i*(f*s/4-m*u*g),S=.125*i*(s*g-m*u*h*f),_=.5*i*(c*d+m*v*o)+.5,q=k*S-_*w,z=(x*k-b*_)/q,E=(b*S-x*w)/q;e-=z,r-=E}while((Math.abs(z)>l||Math.abs(E)>l)&&--a>0);return[e,r]},(d3.geo.winkel3=function(){return x(zn)}).raw=zn,En.invert=function(t,n){return[Math.asin(Math.cos(t)*Math.sin(n)),Math.atan2(Math.tan(t),Math.cos(n))]},(d3.geo.cassini=function(){return x(En)}).raw=En}()},function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),i=e(1);var o=function(t){var n,e,r,a,i,o={version:"0.6.8",container:null,data:[]},u=.035,s=1.4,c=2e3,l=2500,h=1500,f=10;o.display=function(y){var w,S,q=o.container,z=[],E=0,R=!1;(n=T.set(y)).stars.size=n.stars.size||7,n.stars.exponent=n.stars.exponent||-.28,n.center=n.center||[0,0],n.lang&&-1!==n.lang.search(/^de|es$/)||(n.lang="name");var F=C(n.container);if(F){w="#"+n.container;var U=window.getComputedStyle(F,null);parseInt(U.width)||n.width||(F.style.width=j(F.parentNode.clientWidth))}else w="body",F=null;var H=[16,16],Q=Et(),B=Tt(n.projection);if(n.lines.graticule.lat&&"outline"===n.lines.graticule.lat.pos[0]&&(B.scale-=2),B){var X=n.transform||"equatorial",J=B.ratio,K=Q/J,tt=B.scale*Q/1024,nt=n.stars.size,et=n.dsos.size||nt,at=n.stars.exponent,ot=n.dsos.exponent||at,ut=1,st=Nt(n.center),ct=n.datapath||"";ct=ct.replace(/([^\/]$)/,"$1/"),"body"!=w&&(C(n.container).style.height=j(K)),e=o.projection(n.projection).rotate(st).translate([Q/2,K/2]).scale(tt),r=t.geo.zoom().projection(e).center([Q/2,K/2]).scaleExtent([tt,tt*f]).on("zoom.redraw",mt);var lt=t.select(w).selectAll("canvas");0===lt[0].length&&(lt=t.select(w).append("canvas")),lt.attr("width",Q).attr("height",K);var ht=lt.node().getContext("2d"),ft=t.geo.graticule().minorStep([15,10]);a=t.geo.path().projection(e).context(ht),q?q.selectAll("*").remove():q=t.select(w).append("container"),n.interactive?lt.call(r):lt.attr("style","cursor: default!important"),St(B.clip),t.select(window).on("resize",vt),t.select(w).on("dblclick",function(){return dt(1.5625),!1}),!0===n.controls&&null===C("celestial-zoomin")&&(t.select(w).append("input").attr("type","button").attr("id","celestial-zoomin").attr("value","+").on("click",function(){return dt(1.25),!1}),t.select(w).append("input").attr("type","button").attr("id","celestial-zoomout").attr("value","−").on("click",function(){return dt(.8),!1})),!0===n.location&&(i=t.geo.circle().angle([90]),q.append("path").datum(i).attr("class","horizon"),null===C("loc")?function(n){var e=t.select("#celestial-form").append("div").attr("id","loc"),r=t.time.format("%Y-%m-%d %H:%M:%S"),a=[0,0],i=[0,0],u=new Date,s=u.getTimezoneOffset(),c=new it(n,function(t,n){C("datetime").value=f(t,n),s=n,p()});D(n,"geopos")&&null!==n.geopos&&2===n.geopos.length&&(i=n.geopos);var l=e.append("div").attr("class","col").attr("id","location");l.append("label").attr("title","Location coordinates long/lat").attr("for","lat").html("Location"),l.append("input").attr("type","number").attr("id","lat").attr("title","Latitude").attr("placeholder","Latitude").attr("max","90").attr("min","-90").attr("step","0.0001").attr("value",i[0]).on("change",function(){!0===W(this)&&p()}),l.append("span").html("°"),l.append("input").attr("type","number").attr("id","lon").attr("title","Longitude").attr("placeholder","Longitude").attr("max","180").attr("min","-180").attr("step","0.0001").attr("value",i[1]).on("change",function(){!0===W(this)&&p()}),l.append("span").html("°"),"geolocation"in navigator&&l.append("input").attr("type","button").attr("value","Here").attr("id","here").on("click",function(){navigator.geolocation.getCurrentPosition(function(t){i=[I(t.coords.latitude,4),I(t.coords.longitude,4)],C("lat").value=i[0],C("lon").value=i[1],p()})});function h(){c.show(u)}function f(t,n){var e;if(n&&"0"!==n){var a=Math.floor(Math.abs(n)/60),i=Math.abs(n)-60*a,o=n<0?" +":" −";e=o+L(a)+L(i)}else e=" ±0000";return r(t)+e}function p(){var t=C("lon").value,e=C("lat").value,c=(u=r.parse(C("datetime").value.slice(0,-6))).getTimezoneOffset(),l=new Date(u.valueOf()+6e4*(s-c));n.horizon.show=!!C("horizon-show").checked,n.planets.show=!!C("planets-show").checked,""!==t&&""!==e&&(i=[parseFloat(e),parseFloat(t)],(a=o.getPoint(x.inverse(l,[90,0],i),n.transform))[2]=0,"zenith"===n.follow?o.rotate({center:a,horizon:n.horizon}):o.apply({horizon:n.horizon}))}l.append("label").attr("title","Local date/time").attr("for","datetime").html(" Date/time"),l.append("input").attr("type","button").attr("id","day-left").attr("title","One day back").on("click",function(){u.setDate(u.getDate()-1),C("datetime").value=f(u,s),p()}),l.append("input").attr("type","text").attr("id","datetime").attr("title","Date and time").attr("value",f(u,s)).on("click",h,!0).on("input",function(){this.value=f(u,s),c.isVisible()||h()}),l.append("div").attr("id","datepick").on("click",h),l.append("input").attr("type","button").attr("id","day-right").attr("title","One day forward").on("click",function(){u.setDate(u.getDate()+1),C("datetime").value=f(u,s),p()}),l.append("input").attr("type","button").attr("value","Now").attr("id","now").on("click",function(){u.setTime(Date.now()),C("datetime").value=f(u,s),p()}),l.append("br"),l.append("label").attr("title","Show horizon marker").attr("for","horizon-show").html(" Horizon marker"),l.append("input").attr("type","checkbox").attr("id","horizon-show").property("checked",n.horizon.show).on("change",p),l.append("label").attr("title","Show solar system objects").attr("for","planets-show").html(" Planets, Sun & Moon"),l.append("input").attr("type","checkbox").attr("id","planets-show").property("checked",n.planets.show).on("change",p),t.select(document).on("mousedown",function(){!function(t,n){for(;t.parentNode;){if(t.id===n)return!0;t=t.parentNode}return!1}(t.event.target,"celestial-date")&&c.isVisible()&&c.hide()}),o.getPosition=function(t){},o.date=function(t){if(!t)return u;c.isVisible()||(u.setTime(t.valueOf()),C("datetime").value=f(t,s),o.redraw())},o.position=function(){return i},o.zenith=function(){return a},o.nadir=function(){var t=-a[1],n=a[0]+180;return n>180&&(n-=360),[n,t-.001]},setTimeout(p,1e3)}(n):"zenith"===n.follow&&gt({center:o.zenith()}),V("horizon-show",B.clip)),!0===n.form&&null===C("params")&&function(n){var e=T.set(n),r=o.projections(),a=o.eulerAngles(),i=t.select("#celestial-form").append("div").attr("class","ctrl").append("form").attr("id","params").attr("name","params").attr("method","get").attr("action","#"),u=i.append("div").attr("class","col").attr("id","general");u.append("label").attr("title","Map width in pixel, 0 indicates full width").attr("for","width").html("Width "),u.append("input").attr("type","number").attr("maxlength","4").attr("max","20000").attr("min","0").attr("title","Map width").attr("id","width").attr("value",e.width).on("change",function(){var t=this.value;if(!1===W(this))return;e.width=t,o.resize({width:t})}),u.append("span").html("px"),u.append("label").attr("title","Map projection, (hemi) indicates hemispherical projection").attr("for","projection").html("Projection");var s=u.append("select").attr("id","projection").on("change",function(){if(!this)return;e.projection=this.value,o.reproject(e)}),c=0,l=Object.keys(r).map(function(t,n){var a=r[t].clip&&!0===r[t].clip?r[t].n+" (hemi)":r[t].n;return t===e.projection&&(c=n),{o:t,n:a}});function h(){!1!==W(this)&&!1!==f()&&o.rotate(e)}function f(){var t=C("centerx"),n=C("centery"),r=C("centerz");if(t&&n){if("equatorial"!==e.transform)e.center[0]=parseFloat(t.value);else{var a=parseFloat(t.value);e.center[0]=a>12?15*a-360:15*a}e.center[1]=parseFloat(n.value);var i=parseFloat(r.value);return e.center[2]=isNaN(i)?0:i,""!==t.value&&""!==n.value}}function p(){var t,n=this;switch(n.type){case"checkbox":t=n.checked,Y(n);break;case"number":if(!1===W(n))return;t=parseFloat(n.value);break;case"color":if(!1===G(n))return;t=n.value;break;case"text":if(-1===n.id.search(/fill$/))return;if(!1===G(n))return;t=n.value}null!==t&&(!function(t,n){var r=t.split("-");switch(r.length){case 1:e[r[0]]=n;break;case 2:e[r[0]][r[1]]=n;break;case 3:e[r[0]][r[1]][r[2]]=n;break;default:;}}(n.id,t),f(),o.apply(e))}s.selectAll("option").data(l).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),s.property("selectedIndex",c),c=0,u.append("label").attr("title","Coordinate space in which the map is displayed").attr("for","transform").html("Coordinates"),s=u.append("select").attr("id","transform").on("change",function(){var t=this.value,n=Z(t,e.transform);null!==n&&(e.center[0]=n);e.transform=t,o.reload({transform:t})}),l=Object.keys(a).map(function(t,n){return t===e.transform&&(c=n),{o:t,n:t.replace(/^([a-z])/,function(t,n){return n.toUpperCase()})}}),s.selectAll("option").data(l).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),s.property("selectedIndex",c),u.append("br"),u.append("label").attr("title","Center coordinates long/lat in selected coordinate space").attr("for","centerx").html("Center"),u.append("input").attr("type","number").attr("id","centerx").attr("title","Center right ascension/longitude").attr("max","24").attr("min","0").attr("step","0.1").on("change",h),u.append("span").attr("id","cxunit").html("h"),u.append("input").attr("type","number").attr("id","centery").attr("title","Center declination/latitude").attr("max","90").attr("min","-90").attr("step","0.1").on("change",h),u.append("span").html("°"),u.append("label").attr("title","Orientation").attr("for","centerz").html("Orientation"),u.append("input").attr("type","number").attr("id","centerz").attr("title","Center orientation").attr("max","180").attr("min","-180").attr("step","0.1").on("change",h),u.append("span").html("°"),u.append("label").attr("for","orientationfixed").html("Fixed"),u.append("input").attr("type","checkbox").attr("id","orientationfixed").property("checked",e.orientationfixed).on("change",p),u.append("label").attr("title","Center and zoom in on this constellation").attr("for","constellation").html("Show"),u.append("select").attr("id","constellation").on("change",function(){var t=this.value,n=[];if(""===t)return o.constellation=null,void o.redraw();var r=o.constellations[t];e.center=r.center,$(e.center,e.transform);var a=o.zoomBy();1!==a&&n.push({param:"zoom",value:1/a,duration:0});n.push({param:"center",value:r.center,duration:0});var i=r.scale>10?10:r.scale;n.push({param:"zoom",value:i,duration:0}),o.constellation=t,o.animate(n,!1)}),$(e.center,e.transform),(u=i.append("div").attr("class","col").attr("id","stars")).append("label").attr("class","header").attr("for","stars-show").html("Stars"),u.append("input").attr("type","checkbox").attr("id","stars-show").property("checked",e.stars.show).on("change",p),u.append("label").attr("for","stars-limit").html("down to magnitude"),u.append("input").attr("type","number").attr("id","stars-limit").attr("title","Star display limit (magnitude)").attr("value",e.stars.limit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",p),u.append("label").attr("for","stars-colors").html("with spectral colors"),u.append("input").attr("type","checkbox").attr("id","stars-colors").property("checked",e.stars.colors).on("change",p),u.append("label").attr("for","stars-color").html("or default color "),u.append("input").attr("type","color").attr("autocomplete","off").attr("id","stars-style-fill").attr("title","Star color").property("value",e.stars.style.fill).on("change",p),u.append("br"),u.append("label").attr("for","stars-names").html("Show designations"),u.append("input").attr("type","checkbox").attr("id","stars-names").property("checked",e.stars.names).on("change",p),u.append("label").attr("for","stars-namelimit").html("down to mag"),u.append("input").attr("type","number").attr("id","stars-namelimit").attr("title","Star designaton display limit (magnitude)").attr("value",e.stars.namelimit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",p),u.append("label").attr("for","stars-desig").attr("title","include HD/HIP designations").html("all"),u.append("input").attr("type","checkbox").attr("id","stars-desig").property("checked",e.stars.desig).on("change",p),u.append("label").attr("for","stars-proper").html("proper names"),u.append("input").attr("type","checkbox").attr("id","stars-proper").property("checked",e.stars.proper).on("change",p),u.append("label").attr("for","stars-propernamelimit").html("down to mag"),u.append("input").attr("type","number").attr("id","stars-propernamelimit").attr("title","Star name display limit (magnitude)").attr("value",e.stars.propernamelimit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",p),u.append("br"),u.append("label").attr("for","stars-size").html("Stellar disk size: base"),u.append("input").attr("type","number").attr("id","stars-size").attr("title","Size of the displayed star disk; base").attr("value",e.stars.size).attr("max","100").attr("min","0").attr("step","0.1").on("change",p),u.append("label").attr("for","stars-exponent").html(" * e ^ (exponent"),u.append("input").attr("type","number").attr("id","stars-exponent").attr("title","Size of the displayed star disk; exponent").attr("value",e.stars.exponent).attr("max","3").attr("min","-1").attr("step","0.01").on("change",p),u.append("span").text(" * (magnitude + 2))  [* adaptation]"),Y(C("stars-show")),(u=i.append("div").attr("class","col").attr("id","dsos")).append("label").attr("class","header").attr("title","Deep Space Objects").attr("for","dsos-show").html("DSOs"),u.append("input").attr("type","checkbox").attr("id","dsos-show").property("checked",e.dsos.show).on("change",p),u.append("label").attr("for","dsos-limit").html("down to mag"),u.append("input").attr("type","number").attr("id","dsos-limit").attr("title","DSO display limit (magnitude)").attr("value",e.dsos.limit).attr("max","6").attr("min","0").attr("step","0.1").on("change",p),u.append("label").attr("for","dsos-names").html("with names"),u.append("input").attr("type","checkbox").attr("id","dsos-names").property("checked",e.dsos.names).on("change",p),u.append("label").attr("for","dsos-desig").html("or designations"),u.append("input").attr("type","checkbox").attr("id","dsos-desig").property("checked",e.dsos.desig).on("change",p),u.append("label").attr("for","dsos-namelimit").html("down to mag"),u.append("input").attr("type","number").attr("id","dsos-namelimit").attr("title","DSO name display limit (magnitude)").attr("value",e.dsos.namelimit).attr("max","6").attr("min","0").attr("step","0.1").on("change",p),u.append("br"),u.append("label").attr("for","dsos-size").html("DSO symbol size: (base"),u.append("input").attr("type","number").attr("id","dsos-size").attr("title","Size of the displayed symbol: base").attr("value",e.dsos.size).attr("max","100").attr("min","0").attr("step","0.1").on("change",p),u.append("label").attr("for","dsos-exponent").html(" * 2 [* adaptation] - magnitude) ^ exponent"),u.append("input").attr("type","number").attr("id","dsos-exponent").attr("title","Size of the displayed symbol; exponent").attr("value",e.dsos.exponent).attr("max","3").attr("min","-1").attr("step","0.01").on("change",p),Y(C("dsos-show")),(u=i.append("div").attr("class","col").attr("id","constellations")).append("label").attr("class","header").html("Constellations"),u.append("label").attr("for","constellations-names").html("Show names"),u.append("input").attr("type","checkbox").attr("id","constellations-names").property("checked",e.constellations.names).on("change",p),u.append("label").attr("for","constellations-desig").html("abbreviated"),u.append("input").attr("type","checkbox").attr("id","constellations-desig").property("checked",e.constellations.desig).on("change",p),u.append("label").attr("for","constellations-lines").html("with lines"),u.append("input").attr("type","checkbox").attr("id","constellations-lines").property("checked",e.constellations.lines).on("change",p),u.append("label").attr("for","constellations-bounds").html("with boundaries"),u.append("input").attr("type","checkbox").attr("id","constellations-bounds").property("checked",e.constellations.bounds).on("change",p),Y(C("constellations-names")),(u=i.append("div").attr("class","col").attr("id","lines")).append("label").attr("class","header").html("Lines"),u.append("label").attr("title","Laitudet/longitude grid lines").attr("for","lines-graticule").html("Graticule"),u.append("input").attr("type","checkbox").attr("id","lines-graticule-show").property("checked",e.lines.graticule.show).on("change",p),u.append("label").attr("for","lines-equatorial").html("Equator"),u.append("input").attr("type","checkbox").attr("id","lines-equatorial-show").property("checked",e.lines.equatorial.show).on("change",p),u.append("label").attr("for","lines-ecliptic").html("Ecliptic"),u.append("input").attr("type","checkbox").attr("id","lines-ecliptic-show").property("checked",e.lines.ecliptic.show).on("change",p),u.append("label").attr("for","lines-galactic").html("Galactic plane"),u.append("input").attr("type","checkbox").attr("id","lines-galactic-show").property("checked",e.lines.galactic.show).on("change",p),u.append("label").attr("for","lines-supergalactic").html("Supergalactic plane"),u.append("input").attr("type","checkbox").attr("id","lines-supergalactic-show").property("checked",e.lines.supergalactic.show).on("change",p),(u=i.append("div").attr("class","col").attr("id","other")).append("label").attr("class","header").html("Other"),u.append("label").attr("for","mw-show").html("Milky Way"),u.append("input").attr("type","checkbox").attr("id","mw-show").property("checked",e.mw.show).on("change",p),u.append("label").attr("for","mw-style-fill").html(" color"),u.append("input").attr("type","color").attr("id","mw-style-fill").attr("title","Milky Way color").attr("value",e.mw.style.fill).on("change",p),u.append("label").attr("for","mw-style-opacity").html(" opacity"),u.append("input").attr("type","number").attr("id","mw-style-opacity").attr("title","Transparency of each Milky Way layer").attr("value",e.mw.style.opacity).attr("max","1").attr("min","0").attr("step","0.01").on("change",p),u.append("br"),u.append("label").attr("for","background").html("Background color"),u.append("input").attr("type","color").attr("id","background-fill").attr("title","Background color").attr("value",e.background.fill).on("change",p),u.append("label").attr("title","Star/DSO sizes are increased with higher zoom-levels").attr("for","adaptable").html("Adaptable object sizes"),u.append("input").attr("type","checkbox").attr("id","adaptable").property("checked",e.adaptable).on("change",p),function(){var t,n,e,r=/\d+(\.\d+)?/g,a={s:6,d:6},i=o.settings();e=i.dsos.data,null!==(t=e.match(r))&&(a.d=parseFloat(t[t.length-1]));6!=a.d&&(C("dsos-limit").max=a.d,C("dsos-namelimit").max=a.d);n=i.stars.data,null!==(t=n.match(r))&&(a.s=parseFloat(t[t.length-1]));6!=a.s&&(C("stars-limit").max=a.s,C("stars-namelimit").max=a.s)}(),Z(e.transform)}(n),null===C("error")&&t.select("body").append("div").attr("id","error"),this.container=q,this.clip=bt,this.map=a,this.mapProjection=e,this.context=ht,this.setStyle=xt,this.setTextStyle=wt,this.setConstStyle=kt,this.dsoSymbol=qt,this.redraw=mt,this.resize=function(t){t&&D(t,"width")&&(n.width=t.width),vt(!0)},this.reload=function(t){t&&D(t,"transform")&&("equatorial"===(X=n.transform=t.transform)?ft.minorStep([15,10]):ft.minorStep([10,10]),q.selectAll("*").remove(),St(),q.append("path").datum(i).attr("class","horizon"),pt())},this.apply=function(t){!function(t){n=n.set(t),mt()}(t)},this.reproject=function(t){return Mt(t)},this.rotate=function(t){return t?gt(t):n.center},this.zoomBy=function(t){return t?dt(t):e.scale()/tt},this.color=function(t){return t&&D(n.dsos.symbols,t)?n.dsos.symbols[t].fill:"#000"},this.animate=function(t,n){t&&(z=t,E=0,R=!!n,At())},this.stop=function(t){clearTimeout(S),!0===t&&(z=[])},this.go=function(t){z.length<1||(t&&t<z.length&&(E=t),At())},D(this,"date")||(this.date=function(){console.log("Celestial.date() needs config.location = true to work.")}),pt()}function pt(){for(var e in n.lines)D(n.lines,e)&&("graticule"===e?(q.append("path").datum(ft).attr("class","graticule"),D(n.lines.graticule,"lon")&&n.lines.graticule.lon.pos.length>0&&q.selectAll(".gridvalues_lon").data(_("lon",n.lines.graticule.lon.pos)).enter().append("path").attr("class","graticule_lon"),D(n.lines.graticule,"lat")&&n.lines.graticule.lat.pos.length>0&&q.selectAll(".gridvalues_lat").data(_("lat",n.lines.graticule.lat.pos)).enter().append("path").attr("class","graticule_lat")):q.append("path").datum(t.geo.circle().angle([90]).origin(m(d[e],b[X]))).attr("class",e));t.json(ct+"mw.json",function(t,n){if(t)return window.alert("Your Browser doesn't support local file loading or the file doesn't exist. See readme.md"),console.warn(t);var e=k(n,X);q.selectAll(".mway").data(e.features).enter().append("path").attr("class","mw"),mt()}),t.json(ct+"constellations.json",function(n,e){if(n)return console.warn(n);var r=k(e,X);q.selectAll(".constnames").data(r.features).enter().append("text").attr("class","constname");var a=function(t,n){for(var e={},r=(b[n],t.features),a=0;a<r.length;a++)e[r[a].id]={name:r[a].properties.name,center:r[a].properties.display.slice(0,2),scale:r[a].properties.display[2]};return e}(e,X);if(C("constellation")){var i=t.select("#constellation"),u=0,s=Object.keys(a).map(function(t,n){return t===y.constellation&&(u=n),{o:t,n:a[t].name}});s=[{o:"",n:"(Select constellation)"}].concat(s),i.selectAll("option").data(s).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),i.property("selectedIndex",u)}o.constellations=a,mt()}),t.json(ct+"constellations.bounds.json",function(t,n){if(t)return console.warn(t);var e=k(n,X);q.selectAll(".bounds").data(e.features).enter().append("path").attr("class","boundaryline"),mt()}),t.json(ct+"constellations.lines.json",function(t,n){if(t)return console.warn(t);var e=k(n,X);q.selectAll(".lines").data(e.features).enter().append("path").attr("class","constline"),mt()}),t.json(ct+n.stars.data,function(t,n){if(t)return console.warn(t);var e=k(n,X);q.selectAll(".stars").data(e.features).enter().append("path").attr("class","star"),mt()}),t.json(ct+n.dsos.data,function(t,n){if(t)return console.warn(t);var e=k(n,X);q.selectAll(".dsos").data(e.features).enter().append("path").attr("class","dso"),mt()}),t.json(ct+"planets.json",function(t,e){if(t)return console.warn(t);var r=function(t){var e=[];for(var r in t)if(D(t,r)&&-1!==n.planets.which.indexOf(r)){var a=rt().id(r);D(t[r],"parent")&&a.parentBody(t[r].parent),a.elements(t[r].elements[0]),"ter"===r?o.origin=a:e.push(a)}return e.push(rt().id("sol")),e.push(rt().id("lun")),e}(e);q.selectAll(".planets").data(r).enter().append("path").attr("class","planet"),mt()}),o.data.length>0&&o.data.forEach(function(n){D(n,"file")?t.json(n.file,n.callback):setTimeout(n.callback,0)},this)}function dt(n){if(n&&1!==n){var a=e.scale(),i=a*n,o=r.scaleExtent(),u=h*Math.sqrt(Math.abs(1-n));i<o[0]&&(i=o[0]),i>o[1]&&(i=o[1]);var s=t.interpolateNumber(a,i);return t.select({}).transition().duration(u).tween("scale",function(){return function(t){var n=s(t);e.scale(n),mt()}}).transition().duration(0).tween("scale",function(){r.scale(i),mt()}),u}}function gt(r){var a,i,o,l=n.center,h=e.rotate(),f=e.scale(),p=c,d=!1,v=n.orientationfixed;I(h[1],1)===-I(r.center[1],1)&&(d=!0),n=n.set(r);var m=I(t.geo.distance(l,n.center),2),y=t.geo.distance([l[2],0],[n.center[2],0]);return m<u&&y<u?(st=Nt(n.center),e.rotate(st),mt()):(i=f>tt*s?t.interpolateNumber(f,tt):function(){return f},o=0===y?function(){return h[2]}:function(n,e,r){n=(n*M+g)%g,e=(e*M+g)%g,Math.abs(n-e)>Math.PI&&(n>e?n-=g:e>n&&(e-=g));return t.interpolateNumber(n/M,e/M)}(l[2],n.center[2]),m>3.14&&(n.center[0]-=.01),n.orientationfixed=!1,a=0===m?function(){return n.center}:t.geo.interpolate(l,n.center),p=0!==m?p*m:p*y,t.select({}).transition().duration(p).tween("center",function(){return function(t){var n=Nt(a(t));n[2]=o(t);var r=i(t<.5?t:1-t);d&&(n[1]=h[1]),e.scale(r),e.rotate(n),mt()}}).transition().duration(0).tween("center",function(){n.orientationfixed=v,st=Nt(n.center),e.rotate(st),mt()})),p}function vt(t){Q=Et(),(n.width!==Q||t)&&(K=Q/J,tt=B.scale*Q/1024,lt.attr("width",Q).attr("height",K),r.scaleExtent([tt,tt*f]).scale(tt),e.translate([Q/2,K/2]).scale(tt),F&&(F.style.height=j(K)),mt())}function Mt(i){var u=Tt(i.projection);if(u){var s=e.rotate(),c=e.center(),h=e.scale(),p=r.scaleExtent(),d=o.projection(n.projection).center(c).translate([Q/2,K/2]).scale([p[0]]),g=l,v=0,M=t.interpolateNumber(J,u.ratio);B.clip!=u.clip&&(g=0);var m=o.projection(i.projection).center(c).translate([Q/2,Q/u.ratio/2]).scale([u.scale*Q/1024]),y=n.adaptable;return h>p[0]?(v=dt(.1),setTimeout(Mt,v,i),v+g):(n.location&&V("horizon-show",u.clip),e=function(n,e){var r,a=t.geo.projection(function(t,a){var i=n([t*=180/Math.PI,a*=180/Math.PI]),o=e([t,a]);return[(1-r)*i[0]+r*o[0],(r-1)*i[1]-r*o[1]]}).scale(1),i=a.center,o=a.translate;return a.alpha=function(t){if(!arguments.length)return r;r=+t;var u=n.center(),s=e.center(),c=n.translate(),l=e.translate();return i([(1-r)*u[0]+r*s[0],(1-r)*u[1]+r*s[1]]),o([(1-r)*c[0]+r*l[0],(1-r)*c[1]+r*l[1]]),a},delete a.translate,delete a.center,a.alpha(0)}(d,m),n.adaptable=!1,t.select({}).transition().duration(g).tween("projection",function(){return function(t){e.alpha(t).rotate(s),a.projection(e),St(u.clip),J=M(t),K=Q/J,lt.attr("width",Q).attr("height",K),F&&(F.style.height=j(K)),mt()}}).transition().duration(0).tween("projection",function(){J=(B=u).ratio,K=Q/B.ratio,tt=B.scale*Q/1024,lt.attr("width",Q).attr("height",K),F&&(F.style.height=j(K)),n.projection=i.projection,e=o.projection(i.projection).rotate(s).translate([Q/2,K/2]).scale(tt),a.projection(e),St(B.clip),r.projection(e).scaleExtent([tt,tt*f]).scale(tt),n.adaptable=y,mt()}),g)}}function mt(){var t=e.rotate();for(var r in n.adaptable&&(ut=Math.sqrt(e.scale()/tt)),ut||(ut=1),nt=n.stars.size,at=n.stars.exponent,et=n.dsos.size||nt,ot=n.dsos.exponent,n.orientationfixed&&(t[2]=n.center[2],e.rotate(t)),n.center=[-t[0],-t[1],t[2]],$(n.center,n.transform),ht.clearRect(0,0,Q+H[0],K+H[1]),yt(),n.mw.show&&q.selectAll(".mw").each(function(t){xt(n.mw.style),a(t),ht.fill()}),n.lines)D(n.lines,r)&&!0===n.lines[r].show&&(xt(n.lines[r]),q.selectAll("."+r).attr("d",a),ht.stroke());if(D(n.lines.graticule,"lon")&&(wt(n.lines.graticule.lon),q.selectAll(".graticule_lon").each(function(t,n){if(bt(t.geometry.coordinates)){var r=e(t.geometry.coordinates);zt(r,t.properties.orientation),ht.fillText(t.properties.value,r[0],r[1])}})),D(n.lines.graticule,"lat")&&(wt(n.lines.graticule.lat),q.selectAll(".graticule_lat").each(function(t,n){if(bt(t.geometry.coordinates)){var r=e(t.geometry.coordinates);zt(r,t.properties.orientation),ht.fillText(t.properties.value,r[0],r[1])}})),yt(!0),n.constellations.show&&(n.constellations.bounds&&(q.selectAll(".boundaryline").each(function(t){xt(n.constellations.boundstyle),o.constellation&&o.constellation===t.id&&(ht.lineWidth*=1.5,ht.setLineDash([])),a(t),ht.stroke()}),yt(!0)),n.constellations.names&&(wt(n.constellations.namestyle),q.selectAll(".constname").each(function(t){if(bt(t.geometry.coordinates)){kt(t.properties.rank,n.constellations.namestyle.font);var r=e(t.geometry.coordinates);ht.fillText(function(t){return n.constellations.desig?t.properties.desig:t.properties[n.lang]}(t),r[0],r[1])}})),n.constellations.lines&&q.selectAll(".constline").each(function(t){xt(n.constellations.linestyle),a(t),ht.stroke()})),n.stars.show&&(xt(n.stars.style),q.selectAll(".star").each(function(t){if(bt(t.geometry.coordinates)&&t.properties.mag<=n.stars.limit){var r=e(t.geometry.coordinates),a=function(t){var n=t.properties.mag;if(null===n)return.1;var e=nt*ut*Math.exp(at*(n+2));return Math.max(e,.1)}(t);ht.fillStyle=function(t){var e=t.properties.bv;if(!n.stars.colors||isNaN(e))return n.stars.style.fill;return N(e)}(t),ht.beginPath(),ht.arc(r[0],r[1],a,0,2*Math.PI),ht.closePath(),ht.fill(),n.stars.names&&t.properties.mag<=n.stars.namelimit*ut&&(wt(n.stars.namestyle),ht.fillText(function(t){var e=t.properties.desig;return n.stars.desig?e:e.replace(/^(HD|HIP|V\d{3}).+/,"")}(t),r[0]+a,r[1])),n.stars.proper&&t.properties.mag<=n.stars.propernamelimit*ut&&(wt(n.stars.propernamestyle),ht.fillText(function(t){return t.properties.name}(t),r[0]-a,r[1]))}})),n.dsos.show&&q.selectAll(".dso").each(function(t){if(bt(t.geometry.coordinates)&&_t(t.properties,n.dsos.limit)){var r=e(t.geometry.coordinates),a=t.properties.type;xt(n.dsos.symbols[a]);var i=qt(t,r);D(n.dsos.symbols[a],"stroke")?ht.stroke():ht.fill(),n.dsos.names&&_t(t.properties,n.dsos.namelimit)&&(wt(n.dsos.namestyle),ht.fillStyle=n.dsos.symbols[a].fill,ht.fillText(function(t){var e=t.properties;if(""===e.name)return;return n.dsos.desig&&e.desig?e.desig:e.name}(t),r[0]+i,r[1]-i))}}),n.location&&"equatorial"===n.transform&&n.planets.show&&o.origin){var u=o.date(),s=o.origin(u).spherical();q.selectAll(".planet").each(function(t){var r=t.id(),a=t(u).equatorial(s);if(bt(a.pos)){var i=e(a.pos),o=n.planets.symbols[r];"lun"!==r?(wt(n.planets.style),ht.fillStyle=o.fill,ht.fillText(o.symbol,i[0],i[1])):P.symbol().type("crescent").size(144).age(a.age).position(i)(ht)}})}o.data.length>0&&o.data.forEach(function(t){t.redraw()}),n.location&&n.horizon.show&&!B.clip&&(i.origin(o.nadir()),xt(n.horizon),q.selectAll(".horizon").datum(i).attr("d",a),ht.fill(),n.horizon.stroke&&ht.stroke()),n.controls&&function(t){var n=C("celestial-zoomin"),e=C("celestial-zoomout");if(!n||!e)return;n.disabled=t>=tt*f*.99,e.disabled=t<=tt}(e.scale())}function yt(t){var r=e.rotate();e.rotate([0,0]),xt(n.background),q.selectAll(".outline").attr("d",a),!0===t?ht.stroke():ht.fill(),e.rotate(r)}function bt(e){return B.clip&&t.geo.distance(n.center,e)>v?0:1}function xt(t){ht.fillStyle=t.fill||null,ht.strokeStyle=t.stroke||null,ht.lineWidth=t.width||null,ht.globalAlpha=t.opacity||1,ht.font=t.font||null,D(t,"dash")?ht.setLineDash(t.dash):ht.setLineDash([]),ht.beginPath()}function wt(t){ht.fillStyle=t.fill,ht.textAlign=t.align||"left",ht.textBaseline=t.baseline||"bottom",ht.globalAlpha=t.opacity||1,ht.font=t.font}function kt(t,n){O(n)?1===n.length?ht.font=n[0]:t>n.length?ht.font=n[n.length-1]:ht.font=n[t-1]:ht.font=n}function St(n){n?(e.clipAngle(90),q.selectAll(".outline").remove(),q.append("path").datum(t.geo.circle().angle([90])).attr("class","outline")):(e.clipAngle(null),q.selectAll(".outline").remove(),q.append("path").datum(ft.outline).attr("class","outline"))}function _t(t,n){return 999===t.mag&&Math.sqrt(parseInt(t.dim))>n||999!==t.mag&&t.mag<=n}function qt(t,e){var r=t.properties,a=function(t){return t.mag&&999!==t.mag?Math.pow(2*et*ut-t.mag,ot):Math.pow(parseInt(t.dim)*et*ut/7,.5)}(r)||9,i=function(t){return t&&D(n.dsos.symbols,t)?n.dsos.symbols[t].shape:"circle"}(r.type);return P.symbol().type(i).size(a).position(e)(ht),Math.sqrt(a)/2}function zt(t,n){for(var e=n.split(""),r="center",a="middle",i=e.length-1;i>=0;i--)switch(e[i]){case"N":a="bottom";break;case"S":a="top";break;case"E":r="left",t[0]+=2;break;case"W":r="right",t[0]-=2}return ht.textAlign=r,ht.textBaseline=a,t}function Et(){return n.width&&n.width>0?n.width:F?F.clientWidth-H[0]:window.innerWidth-2*H[0]}function Tt(t){if(D(A,t)){var n=A[t];return D(n,"ratio")||(n.ratio=2),n}}function Nt(t){if(null===t)return[0,0,0];var n=p.equatorial;return t[2]||(t[2]=0),[n[0]-t[0],n[1]-t[1],n[2]+t[2]]}function At(){if(z&&!(z.length<1)){var t,n=z[E];switch(n.param){case"projection":t=Mt({projection:n.value});break;case"center":t=gt({center:n.value});break;case"zoom":t=dt(n.value)}n.callback&&setTimeout(n.callback,t),E++,!0===R&&E===z.length&&(E=0),t=0===n.duration||n.duration<t?t:n.duration,E<z.length&&(S=setTimeout(At,t))}}},o.projection=function(n){var e,r,a;if(!D(A,n))throw new Error("Projection not supported: "+n);return e=A[n],r=null!==e.arg?t.geo[n].raw(e.arg):t.geo[n].raw,(a=function(t,n){return r(-t,n)}).invert=function(t,n){try{var e=r.invert(t,n);return e[0]=e&&-e[0],e}catch(t){console.log(t)}},t.geo.projection(a)};var p={equatorial:[0,0,0],ecliptic:[0,0,23.4393],galactic:[93.5949,28.9362,-58.5988],supergalactic:[137.31,59.5283,57.7303]},d={equatorial:[0,90],ecliptic:[-90,66.5607],galactic:[-167.1405,27.1283],supergalactic:[-76.2458,15.7089]};o.eulerAngles=function(){return p},o.poles=function(){return d};var g=2*Math.PI,v=Math.PI/2,M=Math.PI/180;function m(t,n){return y(t.map(function(t){return t*M}),n).map(function(t){return t/M})}function y(t,n){var e,r,a,i,o,u,s,c,l;return n?((u=t[0])<0&&(u+=g),s=t[1],u-=n[0],i=n[1],o=n[2],e=Math.sin(s)*Math.sin(i)-Math.cos(s)*Math.cos(i)*Math.cos(u),Math.abs(e)<1e-5&&(e=-Math.cos(s+i)+Math.cos(s)*Math.cos(i)*(1-Math.cos(u))),r=-Math.cos(s)*Math.sin(u),(c=o+(0!==e||0!==r?Math.atan2(r,e):u-Math.PI))>Math.PI&&(c-=g),u%Math.PI==0?((l=s+Math.cos(u)*i)>v&&(l=Math.PI-l),l<-v&&(l=-Math.PI-l)):(a=Math.sin(s)*Math.cos(i)+Math.cos(s)*Math.sin(i)*Math.cos(u),Math.abs(a)>.99?(l=Math.abs(Math.acos(Math.sqrt(e*e+r*r))),a<0&&(l*=-1)):l=Math.asin(a)),[c,l]):t}var b={ecliptic:[-90,23.4393,90],"inverse ecliptic":[90,23.4393,-90],galactic:[-167.1405,62.8717,122.9319],"inverse galactic":[122.9319,62.8717,-167.1405],supergalactic:[283.7542,74.2911,26.4504],"inverse supergalactic":[26.4504,74.2911,283.7542],init:function(){for(var t in this)this[t].constructor==Array&&(this[t]=this[t].map(function(t){return t*M}))},add:function(t,n){if(n&&t&&3===n.length&&!this.hasOwnProperty(t))return this[t]=n.map(function(t){return t*M}),this[t]}};b.init(),o.euler=function(){return b};var x=function(t,n,e){var r=w(t,e[1])-n[0];r<0&&(r+=360),r*=M;var a=n[1]*M,i=e[0]*M,o=Math.asin(Math.sin(a)*Math.sin(i)+Math.cos(a)*Math.cos(i)*Math.cos(r)),u=Math.acos((Math.sin(a)-Math.sin(o)*Math.sin(i))/(Math.cos(o)*Math.cos(i)));return Math.sin(r)>0&&(u=2*Math.PI-u),[o/M,u/M,0]};function w(t,n){var e=t.getUTCFullYear(),r=t.getUTCMonth()+1,a=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),u=t.getUTCSeconds();1!=r&&2!=r||(e-=1,r+=12);var s=Math.floor(e/100),c=2-s+Math.floor(s/4)+Math.floor(365.25*e)+Math.floor(30.6001*(r+1))-730550.5+a+(i+o/60+u/3600)/24,l=c/36525,h=280.46061837+360.98564736629*c+387933e-9*l*l-l*l*l/3871e4+n;if(h>0)for(;h>360;)h-=360;else for(;h<0;)h+=360;return h}function k(t,n){if("equatorial"===n)return t;for(var e=b[n],r=t.features,a=0;a<r.length;a++)r[a].geometry.coordinates=S(r[a],e);return t}function S(t,n){var e=[];switch(t.geometry.type){case"Point":e=m(t.geometry.coordinates,n);break;case"LineString":e.push(z(t.geometry.coordinates,n));break;case"MultiLineString":e=E(t.geometry.coordinates,n);break;case"Polygon":e.push(z(t.geometry.coordinates[0],n));break;case"MultiPolygon":e.push(E(t.geometry.coordinates[0],n))}return e}function _(t,e){var r=[];if(!e)return[];O(e)||(e=[e]);for(var a=0;a<e.length;a++)switch(e[a]){case"center":r="lat"===t?r.concat(q(t,n.center[0],"N")):r.concat(q(t,n.center[1],"S"));break;case"outline":r="lon"===t?(r=r.concat(q(t,n.center[1]-89.99,"S"))).concat(q(t,n.center[1]+89.99),"N"):(r=r.concat(q(t,n.center[0]-179.99,"E"))).concat(q(t,n.center[0]+179.99,"W"));break;default:if(R(e[a])){r="lat"===t?r.concat(q(t,e[a],"N")):r.concat(q(t,e[a],"S"));break}}return function(t){for(var n=[],e=0;e<t.length;e++){var r={type:"Feature",id:e,properties:{},geometry:{type:"Point"}};r.properties.value=t[e].value,r.properties.orientation=t[e].orientation,r.geometry.coordinates=t[e].coordinates,n.push(r)}return n}(r)}function q(t,e,r){var a,i,o,u,s,c=t,l=[],h=e;"equatorial"===n.transform&&"lon"===c&&(c="ra"),"ra"===c?(a=0,i=23,o=1):"lon"===c?(a=0,i=350,o=10):(a=-80,i=80,o=10);for(var f=a;f<=i;f+=o){var p=r;"lat"===c?(s=[h,f],u=f.toString()+"°",p+=f<0?"S":"N"):"ra"===c?(s=[15*f,h],u=f.toString()+"ʰ"):(s=[f,h],u=f.toString()+"°"),l.push({coordinates:s,value:u,orientation:p})}return l}function z(t,n){for(var e=[],r=0;r<t.length;r++)e.push(m(t[r],n));return e}function E(t,n){for(var e=[],r=0;r<t.length;r++)e.push(z(t[r],n));return e}x.inverse=function(t,n,e){var r=n[0]*M,a=n[1]*M,i=e[0]*M,o=Math.asin(Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos(a)),u=((Math.sin(r)-Math.sin(o)*Math.sin(i))/(Math.cos(o)*Math.cos(i))).toFixed(6);return u=Math.acos(u),u/=M,[w(t,e[1])-u,o/M,0]},o.horizontal=x,o.add=function(t){var n={};return D(t,"type")?"dso"!==t.type&&"json"!==t.type||D(t,"file")&&D(t,"callback")?"line"!==t.type&&"raw"!==t.type||D(t,"callback")?(D(t,"file")&&(n.file=t.file),n.type=t.type,D(t,"callback")&&(n.callback=t.callback),D(t,"redraw")&&(n.redraw=t.redraw),void o.data.push(n)):console.log("Can't add line"):console.log("Can't add data file"):console.log("Missing type")},o.remove=function(t){if(null!==t&&t<o.data.length)return o.data.splice(t,1)},o.clear=function(){o.data=[]},o.getData=k,o.getPoint=function(t,n){return m(t,b[n])};var T={width:0,projection:"aitoff",transform:"equatorial",center:null,geopos:null,follow:"zenith",orientationfixed:!0,adaptable:!0,interactive:!0,form:!1,location:!1,daterange:[],controls:!0,lang:"",container:"celestial-map",datapath:"data/",stars:{show:!0,limit:6,colors:!0,style:{fill:"#ffffff",opacity:1},names:!0,proper:!1,desig:!1,namestyle:{fill:"#ddddbb",font:"11px 'Palatino Linotype', Georgia, Times, 'Times Roman', serif",align:"left",baseline:"top"},namelimit:2.5,propernamestyle:{fill:"#ddddbb",font:"13px 'Palatino Linotype', Georgia, Times, 'Times Roman', serif",align:"right",baseline:"bottom"},propernamelimit:1.5,size:7,exponent:-.28,data:"stars.6.json"},dsos:{show:!0,limit:6,names:!0,desig:!0,namestyle:{fill:"#cccccc",font:"11px 'Lucida Sans Unicode', Helvetica, Arial, serif",align:"left",baseline:"top"},namelimit:4,size:null,exponent:1.4,data:"dsos.bright.json",symbols:{gg:{shape:"circle",fill:"#ff0000"},g:{shape:"ellipse",fill:"#ff0000"},s:{shape:"ellipse",fill:"#ff0000"},s0:{shape:"ellipse",fill:"#ff0000"},sd:{shape:"ellipse",fill:"#ff0000"},e:{shape:"ellipse",fill:"#ff0000"},i:{shape:"ellipse",fill:"#ff0000"},oc:{shape:"circle",fill:"#ff9900",stroke:"#ff9900",width:2},gc:{shape:"circle",fill:"#ff9900"},en:{shape:"square",fill:"#ff00cc"},bn:{shape:"square",fill:"#ff00cc"},sfr:{shape:"square",fill:"#cc00ff"},rn:{shape:"square",fill:"#0000ff"},pn:{shape:"diamond",fill:"#00cccc"},snr:{shape:"diamond",fill:"#ff00cc"},dn:{shape:"square",fill:"#999999",stroke:"#999999",width:2},pos:{shape:"marker",fill:"#cccccc",stroke:"#cccccc",width:1.5}}},constellations:{show:!0,names:!0,desig:!0,namestyle:{fill:"#cccc99",align:"center",baseline:"middle",opacity:.8,font:["14px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif","12px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif","11px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"]},lines:!0,linestyle:{stroke:"#cccccc",width:1.5,opacity:.6},bounds:!1,boundstyle:{stroke:"#ccff00",width:1,opacity:.8,dash:[2,4]}},mw:{show:!0,style:{fill:"#ffffff",opacity:"0.15"}},lines:{graticule:{show:!0,stroke:"#cccccc",width:.6,opacity:.8,lon:{pos:[""],fill:"#eee",font:"10px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"},lat:{pos:[""],fill:"#eee",font:"10px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"}},equatorial:{show:!0,stroke:"#aaaaaa",width:1.3,opacity:.7},ecliptic:{show:!0,stroke:"#66cc66",width:1.3,opacity:.7},galactic:{show:!1,stroke:"#cc6666",width:1.3,opacity:.7},supergalactic:{show:!1,stroke:"#cc66cc",width:1.3,opacity:.7}},background:{fill:"#000000",opacity:1,stroke:"#000000",width:1.5},horizon:{show:!1,stroke:"#000099",width:1,fill:"#000000",opacity:.5},planets:{show:!1,which:["sol","mer","ven","ter","lun","mar","jup","sat","ura","nep"],style:{fill:"#00ccff",font:"bold 17px 'Lucida Sans Unicode', Consolas, sans-serif",align:"center",baseline:"middle"},symbols:{sol:{symbol:"☉",fill:"#ffff00"},mer:{symbol:"☿",fill:"#cccccc"},ven:{symbol:"♀",fill:"#eeeecc"},ter:{symbol:"⊕",fill:"#00ffff"},lun:{symbol:"●",fill:"#ffffff"},mar:{symbol:"♂",fill:"#ff9999"},cer:{symbol:"⚳",fill:"#cccccc"},ves:{symbol:"⚶",fill:"#cccccc"},jup:{symbol:"♃",fill:"#ff9966"},sat:{symbol:"♄",fill:"#ffcc66"},ura:{symbol:"♅",fill:"#66ccff"},nep:{symbol:"♆",fill:"#6666ff"},plu:{symbol:"♇",fill:"#aaaaaa"},eri:{symbol:"⚪",fill:"#eeeeee"}}},daylight:{show:!1,fill:"#fff",opacity:.4},set:function(t){var n,e,r={};if(!t)return this;for(n in this)if(D(this,n))if(D(t,n)&&null!==t[n])if(null===this[n]||this[n].constructor!=Object)r[n]=t[n];else for(e in r[n]={},this[n])D(t[n],e)?r[n][e]=t[n][e]:r[n][e]=this[n][e];else r[n]=this[n];return r}};o.settings=function(){return T};var N=t.scale.quantize().domain([3.347,-.335]).range(["#ff4700","#ff4b00","#ff4f00","#ff5300","#ff5600","#ff5900","#ff5b00","#ff5d00","#ff6000","#ff6300","#ff6500","#ff6700","#ff6900","#ff6b00","#ff6d00","#ff7000","#ff7300","#ff7500","#ff7800","#ff7a00","#ff7c00","#ff7e00","#ff8100","#ff8300","#ff8506","#ff870a","#ff8912","#ff8b1a","#ff8e21","#ff9127","#ff932c","#ff9631","#ff9836","#ff9a3c","#ff9d3f","#ffa148","#ffa34b","#ffa54f","#ffa753","#ffa957","#ffab5a","#ffad5e","#ffb165","#ffb269","#ffb46b","#ffb872","#ffb975","#ffbb78","#ffbe7e","#ffc184","#ffc489","#ffc78f","#ffc892","#ffc994","#ffcc99","#ffce9f","#ffd1a3","#ffd3a8","#ffd5ad","#ffd7b1","#ffd9b6","#ffdbba","#ffddbe","#ffdfc2","#ffe1c6","#ffe3ca","#ffe4ce","#ffe8d5","#ffe9d9","#ffebdc","#ffece0","#ffefe6","#fff0e9","#fff2ec","#fff4f2","#fff5f5","#fff6f8","#fff9fd","#fef9ff","#f9f6ff","#f6f4ff","#f3f2ff","#eff0ff","#ebeeff","#e9edff","#e6ebff","#e3e9ff","#e0e7ff","#dee6ff","#dce5ff","#d9e3ff","#d7e2ff","#d3e0ff","#c9d9ff","#bfd3ff","#b7ceff","#afc9ff","#a9c5ff","#a4c2ff","#9fbfff","#9bbcff"]),A={airy:{n:"Airy’s Minimum Error",arg:Math.PI/2,scale:360,ratio:1,clip:!0},aitoff:{n:"Aitoff",arg:null,scale:162},armadillo:{n:"Armadillo",arg:0,scale:250},august:{n:"August",arg:null,scale:94,ratio:1.4},azimuthalEqualArea:{n:"Azimuthal Equal Area",arg:null,scale:340,ratio:1,clip:!0},azimuthalEquidistant:{n:"Azimuthal Equidistant",arg:null,scale:320,ratio:1,clip:!0},baker:{n:"Baker Dinomic",arg:null,scale:160,ratio:1.4},berghaus:{n:"Berghaus Star",arg:0,scale:320,ratio:1,clip:!0},boggs:{n:"Boggs Eumorphic",arg:null,scale:170},bonne:{n:"Bonne",arg:Math.PI/2.5,scale:225,ratio:.88},bromley:{n:"Bromley",arg:null,scale:162},cassini:{n:"Cassini",arg:null,scale:325,ratio:1,clip:!0},collignon:{n:"Collignon",arg:null,scale:100,ratio:2.6},craig:{n:"Craig Retroazimuthal",arg:0,scale:310,ratio:1.5,clip:!0},craster:{n:"Craster Parabolic",arg:null,scale:160},cylindricalEqualArea:{n:"Cylindrical Equal Area",arg:Math.PI/6,scale:190,ratio:2.3},cylindricalStereographic:{n:"Cylindrical Stereographic",arg:Math.PI/4,scale:230,ratio:1.3},eckert1:{n:"Eckert I",arg:null,scale:175},eckert2:{n:"Eckert II",arg:null,scale:175},eckert3:{n:"Eckert III",arg:null,scale:190},eckert4:{n:"Eckert IV",arg:null,scale:190},eckert5:{n:"Eckert V",arg:null,scale:182},eckert6:{n:"Eckert VI",arg:null,scale:182},eisenlohr:{n:"Eisenlohr",arg:null,scale:102},equirectangular:{n:"Equirectangular",arg:null,scale:165},fahey:{n:"Fahey",arg:null,scale:196,ratio:1.4},mtFlatPolarParabolic:{n:"Flat Polar Parabolic",arg:null,scale:175},mtFlatPolarQuartic:{n:"Flat Polar Quartic",arg:null,scale:230,ratio:1.65},mtFlatPolarSinusoidal:{n:"Flat Polar Sinusoidal",arg:null,scale:175,ratio:1.9},foucaut:{n:"Foucaut",arg:null,scale:142},ginzburg4:{n:"Ginzburg IV",arg:null,scale:180,ratio:1.7},ginzburg5:{n:"Ginzburg V",arg:null,scale:196,ratio:1.55},ginzburg6:{n:"Ginzburg VI",arg:null,scale:190,ratio:1.4},ginzburg8:{n:"Ginzburg VIII",arg:null,scale:205,ratio:1.3},ginzburg9:{n:"Ginzburg IX",arg:null,scale:190,ratio:1.4},homolosine:{n:"Goode Homolosine",arg:null,scale:160,ratio:2.2},hammer:{n:"Hammer",arg:2,scale:180},hatano:{n:"Hatano",arg:null,scale:186},healpix:{n:"HEALPix",arg:1,scale:320,ratio:1.2},hill:{n:"Hill Eucyclic",arg:2,scale:190,ratio:1.1},kavrayskiy7:{n:"Kavrayskiy VII",arg:null,scale:185,ratio:1.75},lagrange:{n:"Lagrange",arg:Math.PI/4,scale:88,ratio:1.6,clip:!1},larrivee:{n:"l'Arrivée",arg:null,scale:160,ratio:1.25},laskowski:{n:"Laskowski Tri-Optimal",arg:null,scale:165,ratio:1.7},loximuthal:{n:"Loximuthal",arg:Math.PI/4,scale:175,ratio:1.8},mercator:{n:"Mercator",arg:null,scale:160,ratio:1.3},miller:{n:"Miller",arg:null,scale:160,ratio:1.5},mollweide:{n:"Mollweide",arg:null,scale:180},naturalEarth:{n:"Natural Earth",arg:null,scale:185,ratio:1.85},nellHammer:{n:"Nell Hammer",arg:null,scale:160,ratio:2.6},orthographic:{n:"Orthographic",arg:null,scale:480,ratio:1,clip:!0},patterson:{n:"Patterson Cylindrical",arg:null,scale:160,ratio:1.75},polyconic:{n:"Polyconic",arg:null,scale:160,ratio:1.3},quincuncial:{n:"Quincuncial",arg:null,scale:160,ratio:1.3},rectangularPolyconic:{n:"Rectangular Polyconic",arg:0,scale:160,ratio:1.65},robinson:{n:"Robinson",arg:null,scale:160},sinusoidal:{n:"Sinusoidal",arg:null,scale:160,ratio:2},stereographic:{n:"Stereographic",arg:null,scale:500,ratio:1,clip:!0},times:{n:"Times",arg:null,scale:210,ratio:1.4},twoPointEquidistant:{n:"Two-Point Equidistant",arg:Math.PI/2,scale:320,ratio:1.15,clip:!0},vanDerGrinten:{n:"van Der Grinten",arg:null,scale:160,ratio:1},vanDerGrinten2:{n:"van Der Grinten II",arg:null,scale:160,ratio:1},vanDerGrinten3:{n:"van Der Grinten III",arg:null,scale:160,ratio:1},vanDerGrinten4:{n:"van Der Grinten IV",arg:null,scale:160,ratio:1.6},wagner4:{n:"Wagner IV",arg:null,scale:185},wagner6:{n:"Wagner VI",arg:null,scale:160},wagner7:{n:"Wagner VII",arg:null,scale:190,ratio:1.8},wiechel:{n:"Wiechel",arg:null,scale:360,ratio:1,clip:!0},winkel3:{n:"Winkel Tripel",arg:null,scale:196,ratio:1.7}};o.projections=function(){return A};var P={};function C(t){return document.getElementById(t)}function j(t){return t+"px"}function I(t,n){return Math.round(Math.pow(10,n)*t)/Math.pow(10,n)}function L(t){return t<10?"0"+t:t}function D(t,n){return null!==t&&hasOwnProperty.call(t,n)}function R(t){return!isNaN(parseFloat(t))&&isFinite(t)}function O(t){return"[object Array]"===Object.prototype.toString.call(t)}function F(t,n,e){var r=n.valueOf()-t.valueOf();switch(e||"d"){case"y":case"yr":r/=31556926080;break;case"m":case"mo":r/=26298e5;break;case"d":case"dy":r/=864e5;break;case"h":case"hr":r/=36e5;break;case"n":case"mn":r/=6e4;break;case"s":case"sec":r/=1e3}return Math.floor(r)}function U(t){if(t){var n=t.split(".");if(!(n.length<1)&&((n=n[0].split("-"))[0]=n[0].replace(/\D/g,""),n[0]))return n[1]=n[1]?n[1].replace(/\D/g,""):"1",n[2]=n[2]?n[2].replace(/\D/g,""):"1",new Date(Date.UTC(n[0],n[1]-1,n[2]))}}P.symbol=function(){var n,e=t.functor("circle"),r=t.functor(64),a=t.functor(Math.PI),i=(t.functor("#fff"),t.functor(""));t.functor([2,2]);function o(t){u[e()](t)}var u={circle:function(t){var e=Math.sqrt(r())/2;return t.arc(n[0],n[1],e,0,2*Math.PI),e},square:function(t){var e=Math.sqrt(r())/1.7;return t.moveTo(n[0]-e,n[1]-e),t.lineTo(n[0]+e,n[1]-e),t.lineTo(n[0]+e,n[1]+e),t.lineTo(n[0]-e,n[1]+e),t.closePath(),e},diamond:function(t){var e=Math.sqrt(r())/1.5;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0]+e,n[1]),t.lineTo(n[0],n[1]+e),t.lineTo(n[0]-e,n[1]),t.closePath(),e},triangle:function(t){var e=Math.sqrt(r())/Math.sqrt(3);return t.moveTo(n[0],n[1]-e),t.lineTo(n[0]+e,n[1]+e),t.lineTo(n[0]-e,n[1]+e),t.closePath(),e},ellipse:function(t){var e=Math.sqrt(r())/2;return t.save(),t.translate(n[0],n[1]),t.scale(1.6,.8),t.beginPath(),t.arc(0,0,e,0,2*Math.PI),t.closePath(),t.restore(),e},marker:function(t){var e=Math.sqrt(r())/2;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0],n[1]+e),t.moveTo(n[0]-e,n[1]),t.lineTo(n[0]+e,n[1]),t.closePath(),e},"cross-circle":function(t){var e=Math.sqrt(r()),a=e/2;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0],n[1]+e),t.moveTo(n[0]-e,n[1]),t.lineTo(n[0]+e,n[1]),t.stroke(),t.beginPath(),t.moveTo(n[0],n[1]),t.arc(n[0],n[1],a,0,2*Math.PI),t.closePath(),a},"stroke-circle":function(t){var e=Math.sqrt(r()),a=e/2;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0],n[1]+e),t.stroke(),t.beginPath(),t.moveTo(n[0],n[1]),t.arc(n[0],n[1],a,0,2*Math.PI),t.closePath(),a},crescent:function(t){var e=Math.sqrt(r())/2,i=a(),o=.5*(1-Math.cos(i)),u=1.6*Math.abs(o-.5)+.01,s=i>Math.PI,c=Math.abs(o)>.5?s:!s;return t.save(),t.fillStyle="#557",t.moveTo(n[0],n[1]),t.arc(n[0],n[1],e,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle="#eee",t.beginPath(),t.moveTo(n[0],n[1]),t.arc(n[0],n[1],e,-Math.PI/2,Math.PI/2,s),t.scale(u,1),t.arc(n[0]/u,n[1],e,Math.PI/2,-Math.PI/2,c),t.closePath(),t.fill(),t.restore(),e}};return o.type=function(n){return arguments.length?(e=t.functor(n),o):e},o.size=function(n){return arguments.length?(r=t.functor(n),o):r},o.age=function(n){return arguments.length?(a=t.functor(n),o):a},o.text=function(n){return arguments.length?(i=t.functor(n),o):i},o.position=function(t){if(arguments.length)return n=t,o},o},o.Canvas=P;var H={sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-t))/2},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-t))/2},tanh:function(t){return 2/(1+Math.exp(-2*t))-1},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},normalize0:function(t){return(t+3*Math.PI)%(2*Math.PI)-Math.PI},normalize:function(t){return(t+2*Math.PI)%(2*Math.PI)},cartesian:function(t){var n=t[0],e=v-t[1],r=t[2];return{x:r*Math.sin(e)*Math.cos(n),y:r*Math.sin(e)*Math.sin(n),z:r*Math.cos(e)}},spherical:function(t){var n=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),e=Math.atan(t.y/t.x),r=Math.acos(t.z/n);return[e/M,r/M,n]}};var Q={"stars-show":["stars-limit","stars-colors","stars-style-fill","stars-names","stars-size","stars-exponent"],"stars-names":["stars-proper","stars-desig","stars-namelimit"],"stars-proper":["stars-propernamelimit"],"dsos-show":["dsos-limit","dsos-names","dsos-size","dsos-exponent"],"dsos-names":["dsos-desig","dsos-namelimit"],"mw-show":["mw-style-opacity","mw-style-fill"],"constellations-names":["constellations-desig"]};function Y(t){var n,e=t.id;switch(e){case"stars-show":n=!C(e).checked;for(var r=0;r<Q[e].length;r++)V(Q[e][r],n);case"stars-names":for(n=!C("stars-names").checked||!C("stars-show").checked,r=0;r<Q["stars-names"].length;r++)V(Q["stars-names"][r],n);case"stars-proper":for(n=!C("stars-names").checked||!C("stars-show").checked||!C("stars-proper").checked,r=0;r<Q["stars-proper"].length;r++)V(Q["stars-proper"][r],n);break;case"dsos-show":for(n=!C(e).checked,r=0;r<Q[e].length;r++)V(Q[e][r],n);case"dsos-names":for(n=!C("dsos-names").checked||!C("dsos-show").checked,r=0;r<Q["dsos-names"].length;r++)V(Q["dsos-names"][r],n);break;case"constellations-show":case"mw-show":for(n=!C(e).checked,r=0;r<Q[e].length;r++)V(Q[e][r],n)}}function V(t,n){var e=C(t);e.disabled=n,e.previousSibling.style.color=n?"#999":"#000"}function B(n,e){var r=function(t){var n=0,e=0;if(t.offsetParent)do{n+=t.offsetLeft,e+=t.offsetTop}while(null!==(t=t.offsetParent));return[n,e]}(n);t.select("#error").html(e).style({top:j(r[1]+n.offsetHeight+1),left:j(r[0]),opacity:1}),n.focus()}function W(n){var e,r="hr"===n.id||"min"===n.id||"sec"===n.id?1:0;if(n.validity){if((e=n.validity).typeMismatch||e.badInput)return B(n,n.title+": check field value"),!1;if(e.rangeOverflow||e.rangeUnderflow)return B(n,n.title+" must be between "+(parseInt(n.min)+r)+" and "+(parseInt(n.max)-r)),!1}else{if(!R(e=n.value))return B(n,n.title+": check field value"),!1;if((e=parseFloat(e))<n.min||e>n.max)return B(n,n.title+" must be between "+(n.min+r)+" and "+(+n.max-r)),!1}return t.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),!0}function G(n){var e;if(n.validity){if((e=n.validity).typeMismatch||e.badInput)return B(n,n.title+": check field value"),!1;if(-1===n.value.search(/^#[0-9A-F]{6}$/i))return B(n,n.title+": not a color value"),!1}else{if(""===(e=n.value))return!0;if(-1===e.search(/^#[0-9A-F]{6}$/i))return B(n,n.title+": not a color value"),!1}return t.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),!0}function Z(t,n){var e=C("centerx");return e?(n&&("equatorial"===t&&"equatorial"!==n?(e.value=(e.value/15).toFixed(1),e.value<0&&(e.value+=24)):"equatorial"!==t&&"equatorial"===n&&(e.value=(15*e.value).toFixed(1),e.value>180&&(e.value-=360))),"equatorial"===t?(e.min="0",e.max="24",C("cxunit").innerHTML="h"):(e.min="-180",e.max="180",C("cxunit").innerHTML="°"),e.value):null}function $(t,n){var e=C("centerx"),r=C("centery"),a=C("centerz");e&&r&&(null===t&&(t=[0,0,0]),t.length<=2&&(t[2]=0),e.value="equatorial"!==n?t[0].toFixed(1):t[0]<0?(t[0]/15+24).toFixed(1):(t[0]/15).toFixed(1),r.value=t[1].toFixed(1),a.value=null!==t[2]?t[2].toFixed(1):0)}var X={sol:.0002959122082855911,mer:0x95955473dbc3,ven:0x89d9374048629,ter:0xa923c08a47948,lun:36599199229256,mar:319711652803400,cer:467549107200,ves:129071530155,jup:0xd2088431b2a1400,sat:0x3ee37dea29c61e0,ura:0x99ad2c257ccb88,nep:0xb54f909dc5b7b8,plu:7327611364884,eri:827117568e4},J={sol:"☉",mer:"☿",ven:"♀",ter:"⊕",lun:"●",mar:"♂",cer:"⚳",ves:"⚶",jup:"♃",sat:"♄",ura:"♅",nep:"♆",plu:"♇",eri:"⚪"},K=23.43928*M,tt=Math.sin(K),nt=Math.cos(K),et=["a","e","i","w","M","L","W","N","n","ep","ref","lecl","becl","Tilt"],rt=function(){var t,n,e,r=X.sol,a="sol",i={},o={};function u(n){return s(n),"sol"===t?(o.x=0,o.y=0,o.z=0,u):(c(),u)}var s=function(t){var n;o=[],t&&(n=t instanceof Date?new Date(t.valueOf()):U(t)),n||(n=new Date),o.jd=f(n),(n=U(i.ep))||(n=U("2000-01-01")),o.jd0=f(n),o.d=o.jd-o.jd0,o.cy=o.d/36525},c=function(){var n,e;if("lun"===t){if(!(o=function(t){if(void 0!==at)return at.elements(t)}(o)))return}else{for(var a=0;a<et.length;a++)D(i,n=et[a])&&(D(i,"d"+n)?o[n]=i[n]+i["d"+n]*o.cy:D(i,n)&&(o[n]=i[n]));D(o,"M")&&!D(o,"dM")&&D(o,"n")&&(o.M+=o.n*o.d)}!function(){o.hasOwnProperty("w")||(o.w=o.W-o.N);o.hasOwnProperty("M")||(o.M=o.L-o.W);o.e<1&&(o.M=H.normalize0(o.M));o.P=g*Math.sqrt(Math.pow(o.a,3)/r)/365.25,o.T=o.jd0-o.M/v/o.P,1!==o.e?(o.q=o.a*(1-o.e),o.t0=o.a*Math.sqrt(Math.abs(o.a)/r)):(o.w0=3/Math.sqrt(2)/(o.q*Math.sqrt(o.q/r)),o.a=0,o.t0=0);o.am=Math.sqrt(r*o.q*(1+o.e))}(),function(){var t,n,e,r,a;1===o.e?(a=o.jd0-o.T,r=o.w0*a*.5,n=Math.pow(r+Math.sqrt(r*r+1),1/3),o.v=2*Math.atan(n-1/n)):(o.E=function(){var t,n,e,r,a=o.e,i=o.M,u=1e-8,s=0,c=1.9,h=!1,f=0;if(!i)return 0;if(a<1&&((i<-Math.PI||i>Math.PI)&&(r=H.normalize0(i),s=i-r,i=r),a<.9)){t=Math.atan2(Math.sin(i),Math.cos(i)-a);do{n=(t-a*Math.sin(t)-i)/(1-a*Math.cos(t)),t-=n}while(Math.abs(n)>u);return t}i<0&&(i=-i,h=!0);t=i,(u*=Math.abs(1-a))<1e-15&&(u=1e-15);(a>.8&&i<Math.PI/3||a>1)&&((e=i/Math.abs(1-a))*e>6*Math.abs(1-a)&&(e=i<Math.PI?Math.pow(6*i,1/3):H.asinh(i/a)),t=e);a>1&&i>4&&(t=Math.log(i));if(a<1)for(;Math.abs(c)>u;)n=f++>8?l(t,a)-i:t-a*Math.sin(t)-i,c=-n/(1-a*Math.cos(t)),t+=c;else for(;Math.abs(c)>u;)n=f++>7?-l(t,a)-i:a*H.sinh(t)-t-i,c=-n/(a*H.cosh(t)-1),t+=c;return h?s-t:s+t}(),o.e>1?(t=o.e-H.cosh(o.E),n=H.sinh(o.E)):(t=Math.cos(o.E)-o.e,n=Math.sin(o.E)),n*=Math.sqrt(Math.abs(1-o.e*o.e)),o.v=Math.atan2(n,t));e=o.q*(1+o.e),o.r=e/(1+o.e*Math.cos(o.v))}(),e=o.v+o.w,o.x=o.r*(Math.cos(o.N)*Math.cos(e)-Math.sin(o.N)*Math.sin(e)*Math.cos(o.i)),o.y=o.r*(Math.sin(o.N)*Math.cos(e)+Math.cos(o.N)*Math.sin(e)*Math.cos(o.i)),o.z=o.r*(Math.sin(e)*Math.sin(o.i))};function l(t,n){for(var e=n>1?t*t:-t*t,r=n*e*t/6,a=(1-n)*t-r,i=4;Math.abs(r)>1e-15;)a-=r*=e/(i*(i+1)),i+=2;return a}function h(){var t=Math.atan2(o.y,o.x),n=Math.atan2(o.z,Math.sqrt(o.x*o.x+o.y*o.y));return o.l=H.normalize(t),o.b=n,o}function f(t){var n=t.getUTCFullYear(),e=t.getUTCMonth()+1,r=t.getUTCDate(),a=(t.getUTCHours()-12+t.getUTCMinutes()/60+t.getUTCSeconds()/3600)/24;if(n<-4799)return-1;var i=Math.floor((14-e)/12),o=n+4800-i,u=e+12*i-3;return r+Math.floor((153*u+2)/5)+365*o+Math.floor(o/4)-Math.floor(o/100)+Math.floor(o/400)-32045+a}return u.cartesian=function(){return o},u.spherical=function(){return h(),o},u.equatorial=function(n){return function(n){K=(23.439292-.0130042*o.cy-1.667e-7*o.cy*o.cy+5.028e-7*o.cy*o.cy*o.cy)*M,tt=Math.sin(K),nt=Math.cos(K);var e="lun"===t?{x:0,y:0,z:0}:{x:n.x,y:n.y,z:n.z};o.xeq=o.x-e.x,o.yeq=(o.y-e.y)*nt-(o.z-e.z)*tt,o.zeq=(o.y-e.y)*tt+(o.z-e.z)*nt,o.ra=H.normalize(Math.atan2(o.yeq,o.xeq)),o.dec=Math.atan2(o.zeq,Math.sqrt(o.xeq*o.xeq+o.yeq*o.yeq)),"lun"===t&&(o=function(t,n){if(h(),void 0!==at)return at.corr(t,n)}(o,n));o.pos=[o.ra/M,o.dec/M],o.rt=Math.sqrt(o.xeq*o.xeq+o.yeq*o.yeq+o.zeq*o.zeq)}(n),o},u.transpose=function(){return function(){if(!o.ref||"ecl"===o.ref)return o.tx=o.x,o.ty=o.y,void(o.tz=o.z);var t=o.lecl,n=Math.PI/2-o.becl;y(o,[0,n,-t]);var e=H.cartesian([o.tl,o.tb,o.r]);o.tx=e.x,o.ty=e.y,o.tz=e.z}(),o},u.elements=function(t){var n;if(!arguments.length)return i;for(var e=0;e<et.length;e++)D(t,n=et[e])&&(i[n]=t[n],"a"===n||"e"===n?i[n]*=1:"ref"!==n&&"ep"!==n&&(i[n]*=M),D(t,"d"+n)&&(i[n="d"+n]=t[n],i[n]*="da"===n||"de"===n?1:M));return u},u.parentBody=function(t){return arguments.length?(r=X[a=t],u):a},u.id=function(n){return arguments.length?(t=n,e=J[n],u):t},u.name=function(t){return arguments.length?(n=t,u):n},u.symbol=function(t){return arguments.length?(e=J[t],u):e},u},at={elements:function(t){var n=(t.jd-2451545)/36525,e=n*n,r=n*e,a=n*r,i=1e-4*e,o=1e-6*r,u=1e-8*a,s=383397.6+(3400.4*Math.cos(M*(235.7004+890534.223*n-32.601*i+3.664*o-1.769*u))-635.6*Math.cos(M*(100.737+413335.3554*n-122.571*i-10.684*o+5.028*u))-235.6*Math.cos(M*(134.9634+477198.8676*n+89.97*i+14.348*o-6.797*u))+218.1*Math.cos(M*(238.1713+854535.1727*n-31.065*i+3.623*o-1.769*u))+181*Math.cos(M*(10.6638+1367733.0907*n+57.37*i+18.011*o-8.566*u))-39.9*Math.cos(M*(103.2079+377336.3051*n-121.035*i-10.724*o+5.028*u))-38.4*Math.cos(M*(233.2295+926533.2733*n-34.136*i+3.705*o-1.769*u))+33.8*Math.cos(M*(336.4374+1303869.5784*n-155.171*i-7.02*o+3.259*u))+28.8*Math.cos(M*(111.4008+1781068.4461*n-65.201*i+7.328*o-3.538*u))+12.6*Math.cos(M*(13.1347+1331734.0404*n+58.906*i+17.971*o-8.566*u))+11.4*Math.cos(M*(186.5442+966404.0351*n-68.058*i-.567*o+.232*u))-11.1*Math.cos(M*(222.5657-441199.8173*n-91.506*i-14.307*o+6.797*u))-10.2*Math.cos(M*(269.9268+954397.7353*n+179.941*i+28.695*o-13.594*u))+9.7*Math.cos(M*(145.6272+1844931.9583*n+147.34*i+32.359*o-15.363*u))+9.6*Math.cos(M*(240.6422+818536.1225*n-29.529*i+3.582*o-1.769*u))+8*Math.cos(M*(297.8502+445267.1115*n-16.3*i+1.832*o-.884*u))-6.2*Math.cos(M*(132.4925+513197.9179*n+88.434*i+14.388*o-6.797*u))+6*Math.cos(M*(173.5506+1335801.3346*n-48.901*i+5.496*o-2.653*u))+3.7*Math.cos(M*(113.8717+1745069.3958*n-63.665*i+7.287*o-3.538*u))+3.6*Math.cos(M*(338.9083+1267870.5281*n-153.636*i-7.061*o+3.259*u))+3.2*Math.cos(M*(246.3642+2258267.3137*n+24.769*i+21.675*o-10.335*u))-3*Math.cos(M*(8.1929+1403732.141*n+55.834*i+18.052*o-8.566*u))+2.3*Math.cos(M*(98.2661+449334.4057*n-124.107*i-10.643*o+5.028*u))-2.2*Math.cos(M*(357.5291+35999.0503*n-1.536*i+.041*o+0*u))-2*Math.cos(M*(38.5872+858602.4669*n-138.871*i-8.852*o+4.144*u))-1.8*Math.cos(M*(105.6788+341337.2548*n-119.499*i-10.765*o+5.028*u))-1.7*Math.cos(M*(201.474+826670.7108*n-245.142*i-21.367*o+10.057*u))+1.6*Math.cos(M*(184.1196+401329.0556*n+125.428*i+18.579*o-8.798*u))-1.4*Math.cos(M*(308.4192-489205.1674*n+158.029*i+14.915*o-7.029*u))+1.3*Math.cos(M*(325.7736-63863.5122*n-212.541*i-25.031*o+11.826*u)))+(-.55*Math.cos(M*(238.2+854535.2*n))+.1*Math.cos(M*(103.2+377336.3*n))+.1*Math.cos(M*(233.2+926533.3*n)))*n,c=.055544+(.014217*Math.cos(M*(100.737+413335.3554*n-122.571*i-10.684*o+5.028*u))+.008551*Math.cos(M*(325.7736-63863.5122*n-212.541*i-25.031*o+11.826*u))-.001383*Math.cos(M*(134.9634+477198.8676*n+89.97*i+14.348*o-6.797*u))+.001353*Math.cos(M*(10.6638+1367733.0907*n+57.37*i+18.011*o-8.566*u))-.001146*Math.cos(M*(66.5106+349471.8432*n-335.112*i-35.715*o+16.854*u))-915e-6*Math.cos(M*(201.474+826670.7108*n-245.142*i-21.367*o+10.057*u))+869e-6*Math.cos(M*(103.2079+377336.3051*n-121.035*i-10.724*o+5.028*u))-628e-6*Math.cos(M*(235.7004+890534.223*n-32.601*i+3.664*o-1.769*u))-393e-6*Math.cos(M*(291.5472-127727.0245*n-425.082*i-50.062*o+23.651*u))+284e-6*Math.cos(M*(328.2445-99862.5625*n-211.005*i-25.072*o+11.826*u))-278e-6*Math.cos(M*(162.8868-31931.7561*n-106.271*i-12.516*o+5.913*u))-24e-5*Math.cos(M*(269.9268+954397.7353*n+179.941*i+28.695*o-13.594*u))+23e-5*Math.cos(M*(111.4008+1781068.4461*n-65.201*i+7.328*o-3.538*u))+229e-6*Math.cos(M*(167.2476+762807.1986*n-457.683*i-46.398*o+21.882*u))-202e-6*Math.cos(M*(83.3826-12006.2998*n+247.999*i+29.262*o-13.826*u))+19e-5*Math.cos(M*(190.8102-541062.3799*n-302.511*i-39.379*o+18.623*u))+177e-6*Math.cos(M*(357.5291+35999.0503*n-1.536*i+.041*o+0*u))+153e-6*Math.cos(M*(32.2842+285608.3309*n-547.653*i-60.746*o+28.679*u))-137e-6*Math.cos(M*(44.8902+1431596.6029*n+269.911*i+43.043*o-20.392*u))+122e-6*Math.cos(M*(145.6272+1844931.9583*n+147.34*i+32.359*o-15.363*u))+116e-6*Math.cos(M*(302.211+1240006.0662*n-367.713*i-32.051*o+15.085*u))-111e-6*Math.cos(M*(203.9449+790671.6605*n-243.606*i-21.408*o+10.057*u))-108e-6*Math.cos(M*(68.9815+313472.7929*n-333.576*i-35.756*o+16.854*u))+96e-6*Math.cos(M*(336.4374+1303869.5784*n-155.171*i-7.02*o+3.259*u))-9e-5*Math.cos(M*(98.2661+449334.4057*n-124.107*i-10.643*o+5.028*u))+9e-5*Math.cos(M*(13.1347+1331734.0404*n+58.906*i+17.971*o-8.566*u))+56e-6*Math.cos(M*(55.8468-1018261.2475*n-392.482*i-53.726*o+25.42*u))-56e-6*Math.cos(M*(238.1713+854535.1727*n-31.065*i+3.623*o-1.769*u))+52e-6*Math.cos(M*(308.4192-489205.1674*n+158.029*i+14.915*o-7.029*u))-5e-5*Math.cos(M*(133.0212+698943.6863*n-670.224*i-71.429*o+33.708*u))-49e-6*Math.cos(M*(267.9846+1176142.554*n-580.254*i-57.082*o+26.911*u))-49e-6*Math.cos(M*(184.1196+401329.0556*n+125.428*i+18.579*o-8.798*u))-45e-6*Math.cos(M*(49.1562-75869.812*n+35.458*i+4.231*o-2.001*u))+44e-6*Math.cos(M*(257.3208-191590.5367*n-637.623*i-75.093*o+35.477*u))+42e-6*Math.cos(M*(105.6788+341337.2548*n-119.499*i-10.765*o+5.028*u))+42e-6*Math.cos(M*(160.4159+4067.2942*n-107.806*i-12.475*o+5.913*u))+4e-5*Math.cos(M*(246.3642+2258267.3137*n+24.769*i+21.675*o-10.335*u))-4e-5*Math.cos(M*(156.5838-604925.8921*n-515.053*i-64.41*o+30.448*u))+36e-6*Math.cos(M*(169.7185+726808.1483*n-456.147*i-46.439*o+21.882*u))+29e-6*Math.cos(M*(113.8717+1745069.3958*n-63.665*i+7.287*o-3.538*u))-29e-6*Math.cos(M*(297.8502+445267.1115*n-16.3*i+1.832*o-.884*u))-28e-6*Math.cos(M*(294.0181-163726.0747*n-423.546*i-50.103*o+23.651*u))+27e-6*Math.cos(M*(263.6238+381403.5993*n-228.841*i-23.199*o+10.941*u))-26e-6*Math.cos(M*(358.0578+221744.8187*n-760.194*i-85.777*o+40.505*u))-26e-6*Math.cos(M*(8.1929+1403732.141*n+55.834*i+18.052*o-8.566*u)))+.001*n*(-.0022*Math.cos(M*(103.2+377336.3*n))),l=.0449858+(.0011776*Math.cos(M*(49.1562-75869.812*n+35.458*i+4.231*o-2.001*u))-971e-7*Math.cos(M*(235.7004+890534.223*n-32.601*i+3.664*o-1.769*u))+908e-7*Math.cos(M*(186.5442+966404.0351*n-68.058*i-.567*o+.232*u))+623e-7*Math.cos(M*(83.3826-12006.2998*n+247.999*i+29.262*o-13.826*u))+483e-7*Math.cos(M*(51.6271-111868.8623*n+36.994*i+4.19*o-2.001*u))+348e-7*Math.cos(M*(100.737+413335.3554*n-122.571*i-10.684*o+5.028*u))-316e-7*Math.cos(M*(308.4192-489205.1674*n+158.029*i+14.915*o-7.029*u))-253e-7*Math.cos(M*(46.6853-39870.7617*n+33.922*i+4.272*o-2.001*u))-141e-7*Math.cos(M*(274.1928-553068.6797*n-54.513*i-10.116*o+4.797*u))+127e-7*Math.cos(M*(325.7736-63863.5122*n-212.541*i-25.031*o+11.826*u))+117e-7*Math.cos(M*(184.1196+401329.0556*n+125.428*i+18.579*o-8.798*u))-78e-7*Math.cos(M*(98.3124-151739.624*n+70.916*i+8.462*o-4.001*u))-63e-7*Math.cos(M*(238.1713+854535.1727*n-31.065*i+3.623*o-1.769*u))+63e-7*Math.cos(M*(134.9634+477198.8676*n+89.97*i+14.348*o-6.797*u))+36e-7*Math.cos(M*(321.5076+1443602.9027*n+21.912*i+13.78*o-6.566*u))-35e-7*Math.cos(M*(10.6638+1367733.0907*n+57.37*i+18.011*o-8.566*u))+24e-7*Math.cos(M*(149.8932+337465.5434*n-87.113*i-6.453*o+3.028*u))+24e-7*Math.cos(M*(170.9849-930404.9848*n+66.523*i+.608*o-.232*u)))+.001*(-.0203*Math.cos(M*(125-1934.1*n))+.0034*Math.cos(M*(220.2-1935.5*n))),h=83.353+4069.0137*n-103.238*i-12.492*o+5.263*u+(-15.448*Math.sin(M*(100.737+413335.3554*n-122.571*i-10.684*o+5.028*u))-9.642*Math.sin(M*(325.7736-63863.5122*n-212.541*i-25.031*o+11.826*u))-2.721*Math.sin(M*(134.9634+477198.8676*n+89.97*i+14.348*o-6.797*u))+2.607*Math.sin(M*(66.5106+349471.8432*n-335.112*i-35.715*o+16.854*u))+2.085*Math.sin(M*(201.474+826670.7108*n-245.142*i-21.367*o+10.057*u))+1.477*Math.sin(M*(10.6638+1367733.0907*n+57.37*i+18.011*o-8.566*u))+.968*Math.sin(M*(291.5472-127727.0245*n-425.082*i-50.062*o+23.651*u))-.949*Math.sin(M*(103.2079+377336.3051*n-121.035*i-10.724*o+5.028*u))-.703*Math.sin(M*(167.2476+762807.1986*n-457.683*i-46.398*o+21.882*u))-.66*Math.sin(M*(235.7004+890534.223*n-32.601*i+3.664*o-1.769*u))-.577*Math.sin(M*(190.8102-541062.3799*n-302.511*i-39.379*o+18.623*u))-.524*Math.sin(M*(269.9268+954397.7353*n+179.941*i+28.695*o-13.594*u))-.482*Math.sin(M*(32.2842+285608.3309*n-547.653*i-60.746*o+28.679*u))+.452*Math.sin(M*(357.5291+35999.0503*n-1.536*i+.041*o+0*u))-.381*Math.sin(M*(302.211+1240006.0662*n-367.713*i-32.051*o+15.085*u))-.342*Math.sin(M*(328.2445-99862.5625*n-211.005*i-25.072*o+11.826*u))-.312*Math.sin(M*(44.8902+1431596.6029*n+269.911*i+43.043*o-20.392*u))+.282*Math.sin(M*(162.8868-31931.7561*n-106.271*i-12.516*o+5.913*u))+.255*Math.sin(M*(203.9449+790671.6605*n-243.606*i-21.408*o+10.057*u))+.252*Math.sin(M*(68.9815+313472.7929*n-333.576*i-35.756*o+16.854*u))-.211*Math.sin(M*(83.3826-12006.2998*n+247.999*i+29.262*o-13.826*u))+.193*Math.sin(M*(267.9846+1176142.554*n-580.254*i-57.082*o+26.911*u))+.191*Math.sin(M*(133.0212+698943.6863*n-670.224*i-71.429*o+33.708*u))-.184*Math.sin(M*(55.8468-1018261.2475*n-392.482*i-53.726*o+25.42*u))+.182*Math.sin(M*(145.6272+1844931.9583*n+147.34*i+32.359*o-15.363*u))-.158*Math.sin(M*(257.3208-191590.5367*n-637.623*i-75.093*o+35.477*u))+.148*Math.sin(M*(156.5838-604925.8921*n-515.053*i-64.41*o+30.448*u))-.111*Math.sin(M*(169.7185+726808.1483*n-456.147*i-46.439*o+21.882*u))+.101*Math.sin(M*(13.1347+1331734.0404*n+58.906*i+17.971*o-8.566*u))+.1*Math.sin(M*(358.0578+221744.8187*n-760.194*i-85.777*o+40.505*u))+.087*Math.sin(M*(98.2661+449334.4057*n-124.107*i-10.643*o+5.028*u))+.08*Math.sin(M*(42.948+1653341.4216*n-490.283*i-42.734*o+20.113*u))+.08*Math.sin(M*(222.5657-441199.8173*n-91.506*i-14.307*o+6.797*u))+.077*Math.sin(M*(294.0181-163726.0747*n-423.546*i-50.103*o+23.651*u))-.073*Math.sin(M*(280.8834-1495460.1151*n-482.452*i-68.074*o+32.217*u))-.071*Math.sin(M*(304.6819+1204007.0159*n-366.177*i-32.092*o+15.085*u))-.069*Math.sin(M*(233.7582+1112279.0417*n-792.795*i-82.113*o+38.736*u))-.067*Math.sin(M*(34.7551+249609.2807*n-546.117*i-60.787*o+28.679*u))-.067*Math.sin(M*(263.6238+381403.5993*n-228.841*i-23.199*o+10.941*u))+.055*Math.sin(M*(21.6203-1082124.7597*n-605.023*i-78.757*o+37.246*u))+.055*Math.sin(M*(308.4192-489205.1674*n+158.029*i+14.915*o-7.029*u))-.054*Math.sin(M*(8.7216+1589477.9094*n-702.824*i-67.766*o+31.939*u))-.052*Math.sin(M*(179.8536+1908795.4705*n+359.881*i+57.39*o-27.189*u))-.05*Math.sin(M*(98.7948+635080.1741*n-882.765*i-96.461*o+45.533*u))-.049*Math.sin(M*(128.6604-95795.2683*n-318.812*i-37.547*o+17.738*u))-.047*Math.sin(M*(17.3544+425341.6552*n-370.57*i-39.946*o+18.854*u))-.044*Math.sin(M*(160.4159+4067.2942*n-107.806*i-12.475*o+5.913*u))-.043*Math.sin(M*(238.1713+854535.1727*n-31.065*i+3.623*o-1.769*u))+.042*Math.sin(M*(270.4555+1140143.5037*n-578.718*i-57.123*o+26.911*u))-.042*Math.sin(M*(132.4925+513197.9179*n+88.434*i+14.388*o-6.797*u))-.041*Math.sin(M*(122.3573-668789.4043*n-727.594*i-89.441*o+42.274*u))-.04*Math.sin(M*(105.6788+341337.2548*n-119.499*i-10.765*o+5.028*u))+.038*Math.sin(M*(135.4921+662944.6361*n-668.688*i-71.47*o+33.708*u))-.037*Math.sin(M*(242.391-51857.2124*n-460.54*i-54.293*o+25.652*u))+.036*Math.sin(M*(336.4374+1303869.5784*n-155.171*i-7.02*o+3.259*u))+.035*Math.sin(M*(223.0943-255454.0489*n-850.164*i-100.124*o+47.302*u))-.034*Math.sin(M*(193.2811-577061.4302*n-300.976*i-39.419*o+18.623*u))+.031*Math.sin(M*(87.6023-918398.685*n-181.476*i-28.654*o+13.594*u)))+.001*n*(2.4*Math.sin(M*(103.2+377336.3*n))),f=125.0446-1934.13618*n+20.762*i+2.139*o-1.65*u+(-1.4979*Math.sin(M*(49.1562-75869.812*n+35.458*i+4.231*o-2.001*u))-.15*Math.sin(M*(357.5291+35999.0503*n-1.536*i+.041*o+0*u))-.1226*Math.sin(M*(235.7004+890534.223*n-32.601*i+3.664*o-1.769*u))+.1176*Math.sin(M*(186.5442+966404.0351*n-68.058*i-.567*o+.232*u))-.0801*Math.sin(M*(83.3826-12006.2998*n+247.999*i+29.262*o-13.826*u))-.0616*Math.sin(M*(51.6271-111868.8623*n+36.994*i+4.19*o-2.001*u))+.049*Math.sin(M*(100.737+413335.3554*n-122.571*i-10.684*o+5.028*u))+.0409*Math.sin(M*(308.4192-489205.1674*n+158.029*i+14.915*o-7.029*u))+.0327*Math.sin(M*(134.9634+477198.8676*n+89.97*i+14.348*o-6.797*u))+.0324*Math.sin(M*(46.6853-39870.7617*n+33.922*i+4.272*o-2.001*u))+.0196*Math.sin(M*(98.3124-151739.624*n+70.916*i+8.462*o-4.001*u))+.018*Math.sin(M*(274.1928-553068.6797*n-54.513*i-10.116*o+4.797*u))+.015*Math.sin(M*(325.7736-63863.5122*n-212.541*i-25.031*o+11.826*u))-.015*Math.sin(M*(184.1196+401329.0556*n+125.428*i+18.579*o-8.798*u))-.0078*Math.sin(M*(238.1713+854535.1727*n-31.065*i+3.623*o-1.769*u))-.0045*Math.sin(M*(10.6638+1367733.0907*n+57.37*i+18.011*o-8.566*u))+.0044*Math.sin(M*(321.5076+1443602.9027*n+21.912*i+13.78*o-6.566*u))-.0042*Math.sin(M*(162.8868-31931.7561*n-106.271*i-12.516*o+5.913*u))-.0031*Math.sin(M*(170.9849-930404.9848*n+66.523*i+.608*o-.232*u))+.0031*Math.sin(M*(103.2079+377336.3051*n-121.035*i-10.724*o+5.028*u))+.0029*Math.sin(M*(222.612-1042273.8471*n+103.516*i+4.798*o-2.232*u))+.0028*Math.sin(M*(184.0733+1002403.0853*n-69.594*i-.526*o+.232*u)))+.001*(25.9*Math.sin(M*(125-1934.1*n))-4.3*Math.sin(M*(220.2-1935.5*n))+.38*Math.sin(M*(357.5+35999.1*n))*n),p=218.31665+481267.88134*n-13.268*i+1.856*o-1.534*u+(-.92581*Math.sin(M*(235.7004+890534.223*n-32.601*i+3.664*o-1.769*u))+.33262*Math.sin(M*(100.737+413335.3554*n-122.571*i-10.684*o+5.028*u))-.18402*Math.sin(M*(357.5291+35999.0503*n-1.536*i+.041*o+0*u))+.11007*Math.sin(M*(134.9634+477198.8676*n+89.97*i+14.348*o-6.797*u))-.06055*Math.sin(M*(238.1713+854535.1727*n-31.065*i+3.623*o-1.769*u))+.04741*Math.sin(M*(325.7736-63863.5122*n-212.541*i-25.031*o+11.826*u))-.03086*Math.sin(M*(10.6638+1367733.0907*n+57.37*i+18.011*o-8.566*u))+.02184*Math.sin(M*(103.2079+377336.3051*n-121.035*i-10.724*o+5.028*u))+.01645*Math.sin(M*(49.1562-75869.812*n+35.458*i+4.231*o-2.001*u))+.01022*Math.sin(M*(233.2295+926533.2733*n-34.136*i+3.705*o-1.769*u))-.00756*Math.sin(M*(336.4374+1303869.5784*n-155.171*i-7.02*o+3.259*u))-.0053*Math.sin(M*(222.5657-441199.8173*n-91.506*i-14.307*o+6.797*u))-.00496*Math.sin(M*(162.8868-31931.7561*n-106.271*i-12.516*o+5.913*u))-.00472*Math.sin(M*(297.8502+445267.1115*n-16.3*i+1.832*o-.884*u))-.00271*Math.sin(M*(240.6422+818536.1225*n-29.529*i+3.582*o-1.769*u))+.00264*Math.sin(M*(132.4925+513197.9179*n+88.434*i+14.388*o-6.797*u))-.00254*Math.sin(M*(186.5442+966404.0351*n-68.058*i-.567*o+.232*u))+.00234*Math.sin(M*(269.9268+954397.7353*n+179.941*i+28.695*o-13.594*u))-.0022*Math.sin(M*(13.1347+1331734.0404*n+58.906*i+17.971*o-8.566*u))-.00202*Math.sin(M*(355.0582+71998.1006*n-3.072*i+.082*o+0*u))+.00167*Math.sin(M*(328.2445-99862.5625*n-211.005*i-25.072*o+11.826*u))-.00143*Math.sin(M*(173.5506+1335801.3346*n-48.901*i+5.496*o-2.653*u))-.00121*Math.sin(M*(98.2661+449334.4057*n-124.107*i-10.643*o+5.028*u))-.00116*Math.sin(M*(145.6272+1844931.9583*n+147.34*i+32.359*o-15.363*u))+.00102*Math.sin(M*(105.6788+341337.2548*n-119.499*i-10.765*o+5.028*u))-9e-4*Math.sin(M*(184.1196+401329.0556*n+125.428*i+18.579*o-8.798*u))-86e-5*Math.sin(M*(338.9083+1267870.5281*n-153.636*i-7.061*o+3.259*u))-78e-5*Math.sin(M*(111.4008+1781068.4461*n-65.201*i+7.328*o-3.538*u))+69e-5*Math.sin(M*(323.3027-27864.4619*n-214.077*i-24.99*o+11.826*u))+66e-5*Math.sin(M*(51.6271-111868.8623*n+36.994*i+4.19*o-2.001*u))+65e-5*Math.sin(M*(38.5872+858602.4669*n-138.871*i-8.852*o+4.144*u))-6e-4*Math.sin(M*(83.3826-12006.2998*n+247.999*i+29.262*o-13.826*u))+54e-5*Math.sin(M*(201.474+826670.7108*n-245.142*i-21.367*o+10.057*u))-52e-5*Math.sin(M*(308.4192-489205.1674*n+158.029*i+14.915*o-7.029*u))+48e-5*Math.sin(M*(8.1929+1403732.141*n+55.834*i+18.052*o-8.566*u))-41e-5*Math.sin(M*(46.6853-39870.7617*n+33.922*i+4.272*o-2.001*u))-33e-5*Math.sin(M*(274.1928-553068.6797*n-54.513*i-10.116*o+4.797*u))+3e-4*Math.sin(M*(160.4159+4067.2942*n-107.806*i-12.475*o+5.913*u)))+.001*(3.96*Math.sin(M*(119.7+131.8*n))+1.96*Math.sin(M*(125-1934.1*n))+(.463*Math.sin(M*(357.5+35999.1*n))+.152*Math.sin(M*(238.2+854535.2*n))-.071*Math.sin(M*(27.8+131.8*n))-.055*Math.sin(M*(103.2+377336.3*n))-.026*Math.sin(M*(233.2+926533.3*n)))*n+(14*Math.sin(M*(357.5+35999.1*n))+5*Math.sin(M*(238.2+854535.2*n)))*i);return t.a=s,t.e=c,t.i=2*Math.asin(l),t.w=H.normalize(M*(h-f)),t.N=H.normalize(M*f),t.M=H.normalize(M*(p-h)),t},corr:function(t,n){var e=H.normalize(n.M+Math.PI),r=H.normalize(n.w+Math.PI),a=t.M+t.w,i=a+t.N-e-r,o=-.022234*Math.sin(t.M-2*i)+.011494*Math.sin(2*i)+-.003246*Math.sin(e)+-.001029*Math.sin(2*t.M-2*i)+-994838e-9*Math.sin(t.M-2*i+e)+925025e-9*Math.sin(t.M+2*i)+802851e-9*Math.sin(2*i-e)+715585e-9*Math.sin(t.M-e)+-610865e-9*Math.sin(i)+-541052e-9*Math.sin(t.M+e)+-261799e-9*Math.sin(2*a-2*i)+191986e-9*Math.sin(t.M-4*i);t.ra+=o;var u=-.003019*Math.sin(a-2*i)+-959931e-9*Math.sin(t.M-a-2*i)+-802851e-9*Math.sin(t.M+a-2*i)+575958e-9*Math.sin(a+2*i)+296706e-9*Math.sin(2*t.M+a);return t.dec+=u,t.age=H.normalize(t.l-n.l+Math.PI),t.phase=.5*(1-Math.cos(t.age)),t}},it=function(n,e){var r,a,i,o=new Date,u=(t.time.format("%Z"),[{"−12:00":720},{"−11:00":660},{"−10:00":600},{"−09:30":570},{"−09:00":540},{"−08:00":480},{"−07:00":420},{"−06:00":360},{"−05:00":300},{"−04:30":270},{"−04:00":240},{"−03:30":210},{"−03:00":180},{"−02:00":120},{"−01:00":60},{"±00:00":0},{"+01:00":-60},{"+02:00":-120},{"+03:00":-180},{"+03:30":-210},{"+04:00":-240},{"+04:30":-270},{"+05:00":-300},{"+05:30":-330},{"+05:45":-345},{"+06:00":-360},{"+06:30":-390},{"+07:00":-420},{"+08:00":-480},{"+08:30":-510},{"+08:45":-525},{"+09:00":-540},{"+09:30":-570},{"+10:00":-600},{"+10:30":-630},{"+11:00":-660},{"+12:00":-720},{"+12:45":-765},{"+13:00":-780},{"+14:00":-840}]),s=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Su","M","Tu","W","Th","F","Sa"],l=(v(o),t.time.format("%Y-%m-%d")),h=n.daterange||[],f=t.select("#celestial-form").append("div").attr("id","celestial-date");g("left"),r=f.append("select").attr("title","Month").attr("id","mon").on("change",p),a=0,i=o.getMonth(),r.selectAll("option").data(s).enter().append("option").attr("value",function(t,n){return n===i&&(a=n),n}).text(function(t){return t}),r.property("selectedIndex",a),f.append("select").attr("title","Year").attr("id","yr").on("change",p),d(),g("right");f.append("div").attr("id","cal");function p(){var n=C("mon").value,e=C("yr").value,r=new Date(e,n,1),a=t.select("#cal"),i=new Date;e=parseInt(e),n=parseInt(n),r.setDate(r.getDate()-r.getDay());for(var u=a.node();u.firstChild;)u.removeChild(u.firstChild);for(var s=0;s<7;s++)a.append("div").classed({date:!0,weekday:!0}).html(c[s]);for(s=0;s<42;s++){var h=r.getMonth(),f=r.getDay(),p=l(r);a.append("div").classed({date:!0,grey:h!==n,weekend:h===n&&(0===f||6===f),today:0===F(r,i),selected:0===F(r,o)}).attr("id",p).on("click",b).html(r.getDate().toString()),r.setDate(r.getDate()+1)}}function d(){var n=t.select("select#yr"),e=o.getFullYear(),r=0,a=v(o);n.selectAll("*").remove(),n.selectAll("option").data(a).enter().append("option").text(function(t,n){return t===e&&(r=n),t.toString()}),n.property("selectedIndex",r)}function g(t){f.append("div").attr("id",t).on("click",function(){var n=C("mon"),e=C("yr");"left"===t?0===n.selectedIndex?(n.selectedIndex=11,e.selectedIndex--):n.selectedIndex--:11===n.selectedIndex?(n.selectedIndex=0,e.selectedIndex++):n.selectedIndex++,p()})}function v(t){for(var n=function(t){if(!h||h.length<1)return[t-10,t+10];if(1===h.length&&R(h[0]))return h[0]>=100?[h[0]-10,h[0]+10]:[t-h[0],t+h[0]];if(2===h.length&&R(h[0])&&R(h[1]))return h[1]>=100?[h[0],h[1]]:[h[0]-h[1],h[0]+h[1]];return[t-10,t+10]}(t.getFullYear()),e=[],r=n[0];r<=n[1];r++)e.push(r);return e}function M(t,n){for(var e=C(t),r=0;r<e.childNodes.length;r++)if(e.childNodes[r].value==n){e.selectedIndex=r;break}}function m(t){t&&o.setTime(t.valueOf()),M("yr",o.getFullYear()),M("mon",o.getMonth()),p(),C("hr").value=o.getHours(),C("min").value=o.getMinutes(),C("sec").value=o.getSeconds()}function y(){t.select("#celestial-date").style("opacity",0),t.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),t.select("#datepick").classed("active",!1),setTimeout(function(){C("celestial-date").style.top=j(-9999)},600)}function b(){var t=C("hr").value,n=C("min").value,r=C("sec").value,a=C("tz").value;this.id&&-1!==this.id.search(/^\d/)&&(o=l.parse(this.id)),d(),o.setHours(t,n,r),m(),e(o,a)}p(),f.append("input").attr("type","number").attr("id","hr").attr("title","Hours").attr("max","24").attr("min","-1").attr("step","1").attr("value",o.getHours()).on("change",function(){!0===W(this)&&b()}),f.append("input").attr("type","number").attr("id","min").attr("title","Minutes").attr("max","60").attr("min","-1").attr("step","1").attr("value",o.getMinutes()).on("change",function(){!0===W(this)&&b()}),f.append("input").attr("type","number").attr("id","sec").attr("title","Seconds").attr("max","60").attr("min","-1").attr("step","1").attr("value",o.getSeconds()).on("change",function(){!0===W(this)&&b()}),function(){var t=f.append("select").attr("title","Time zone offset from UTC").attr("id","tz").on("change",b),n=15,e=o.getTimezoneOffset();t.selectAll("option").data(u).enter().append("option").attr("value",function(t,r){var a=Object.keys(t)[0];return t[a]===e&&(n=r),t[a]}).text(function(t){return Object.keys(t)[0]}),t.property("selectedIndex",n)}(),this.show=function(n){var e=C("celestial-date"),r=C("datepick"),a=r.offsetLeft+r.offsetWidth-e.offsetWidth,i=r.offsetTop-e.offsetHeight-1;-9999===e.offsetTop?(o.setTime(n.valueOf()),m(),t.select("#celestial-date").style({top:j(i),left:j(a),opacity:1}),t.select("#datepick").classed("active",!0)):y()},this.isVisible=function(){return-9999!==C("celestial-date").offsetTop},this.hide=function(){y()}};return function(){var n=Math.PI/180,e=180/Math.PI;function r(t,n){var e=t.invert(n);return e&&isFinite(e[0])&&isFinite(e[1])&&s(e)}function a(t){var e=.5*t[0]*n,r=.5*t[1]*n,a=.5*t[2]*n,i=Math.sin(e),o=Math.cos(e),u=Math.sin(r),s=Math.cos(r),c=Math.sin(a),l=Math.cos(a);return[o*s*l+i*u*c,i*s*l-o*u*c,o*u*l+i*s*c,o*s*c-i*u*l]}function i(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],o=n[0],u=n[1],s=n[2],c=n[3];return[e*o-r*u-a*s-i*c,e*u+r*o+a*c-i*s,e*s-r*c+a*o+i*u,e*c+r*s-a*u+i*o]}function o(t,n){if(t&&n){var e=function(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}(t,n),r=Math.sqrt(c(e,e)),a=.5*Math.acos(Math.max(-1,Math.min(1,c(t,n)))),i=Math.sin(a)/r;return r&&[Math.cos(a),e[2]*i,-e[1]*i,e[0]*i]}}function u(t){return[Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(t[0]*t[2]-t[3]*t[1]))))*e,Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*e]}function s(t){var e=t[0]*n,r=t[1]*n,a=Math.cos(r);return[a*Math.cos(e),a*Math.sin(e),Math.sin(r)]}function c(t,n){for(var e=0,r=t.length,a=0;e<r;++e)a+=t[e]*n[e];return a}t.geo.zoom=function(){var n,e,l,h=0,f=function(n){var e=0,r=arguments.length,a=[];for(;++e<r;)a.push(arguments[e]);var i=t.dispatch.apply(null,a);return i.of=function(e,r){return function(a){try{var o=a.sourceEvent=t.event;a.target=n,t.event=a,i[a.type].apply(e,r)}finally{t.event=o}}},i}(p,"zoomstart","zoom","zoomend"),p=t.behavior.zoom().on("zoomstart",function(){var e=t.mouse(this),s=a(n.rotate()),c=r(n,e);c&&(l=c),d.call(p,"zoom",function(){n.scale(g.k=t.event.scale);var a=t.mouse(this),c=o(l,r(n,a));n.rotate(g.r=u(s=c?i(s,c):i(function(t,n,e){var r=t.translate(),a=Math.atan2(n[1]-r[1],n[0]-r[0])-Math.atan2(e[1]-r[1],e[0]-r[0]);return[Math.cos(a/2),0,0,Math.sin(a/2)]}(n,e,a),s))),e=a,M(f.of(this,arguments))}),v(f.of(this,arguments))}).on("zoomend",function(){d.call(p,"zoom",null),m(f.of(this,arguments))}),d=p.on,g={r:[0,0,0],k:1};function v(t){h++||t({type:"zoomstart"})}function M(t){t({type:"zoom"})}function m(t){--h||t({type:"zoomend"})}return p.rotateTo=function(t){var n=o(s(t),s([-g.r[0],-g.r[1]]));return u(i(a(g.r),n))},p.projection=function(t){return arguments.length?(g={r:(n=t).rotate(),k:n.scale()},p.scale(g.k)):n},p.duration=function(t){return arguments.length?(e=t,p):e},p.event=function(r){r.each(function(){var r=t.select(this),i=f.of(this,arguments),o=g,s=t.transition(r);if(s!==r){s.each("start.zoom",function(){this.__chart__&&((g=this.__chart__).hasOwnProperty("r")||(g.r=n.rotate())),n.rotate(g.r).scale(g.k),v(i)}).tween("zoom:zoom",function(){var r=p.size()[0],l=function(t,n){var e=Math.max(-1,Math.min(1,c(t,n))),r=e<0?-1:1,a=Math.acos(r*e),i=Math.sin(a);return i?function(e){var o=r*Math.sin((1-e)*a)/i,u=Math.sin(e*a)/i;return[t[0]*o+n[0]*u,t[1]*o+n[1]*u,t[2]*o+n[2]*u,t[3]*o+n[3]*u]}:function(){return t}}(a(g.r),a(o.r)),h=t.geo.distance(g.r,o.r),f=t.interpolateZoom([0,0,r/g.k],[h,0,r/o.k]);return e&&s.duration(e(.001*f.duration)),function(t){var e=f(t);this.__chart__=g={r:u(l(e[0]/h)),k:r/e[2]},n.rotate(g.r).scale(g.k),p.scale(g.k),M(i)}}).each("end.zoom",function(){m(i)});try{s.each("interrupt.zoom",function(){m(i)})}catch(t){console.log(t)}}else this.__chart__=g,v(i),M(i),m(i)})},t.rebind(p,f,"on")}}(),o};function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}function c(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function l(t,n){return!n||"object"!==u(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&p(t,n)}function p(t,n){return(p=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}e.d(n,"hour2CelestialDegree",function(){return d}),e.d(n,"Celestial",function(){return g}),e(2);var d=function(t){return t>12?15*(t-24):15*t},g=function(t){function n(t){var e;return c(this,n),(e=l(this,h(n).call(this,t))).addFeaturesCollection=function(t){return e.featuresCollections.push(t)},e.componentDidMount=function(){e.containerMounted=(new Date).getTime(),e.featuresCollections.forEach(function(t){return t(e.celestial)});var t=e.props,n=t.config,r=t.zoom;e.celestial.display(n),r>0&&e.zoom(r)},e.zoom=function(t){return e.celestial.zoomBy(t)},e.updateConfig=function(){},e.componentDidUpdate=function(t){var n=e.props,r=n.config,a=n.zoom;t.config!==r&&e.updateConfig(),t.zoom!==a&&e.zoom(a)},e.render=function(){return a.a.createElement("div",null,a.a.Children.map(e.props.children,function(t){return a.a.cloneElement(t,{addFeaturesCollection:e.addFeaturesCollection})}),a.a.createElement("div",{id:"celestial-map"}))},e.celestial=o(i),e.featuresCollections=[],e}return f(n,a.a.Component),n}(),v=function(t){function n(t){var e;return c(this,n),(e=l(this,h(n).call(this,t))).addFeature=function(t){return e.features.push(t)},e.componentDidMount=function(){e.props.addFeaturesCollection(e.addToCelestial)},e.addToCelestial=function(t){return t.add({type:"json",callback:function(){return e.celCallback(t)},redraw:function(){return e.celRedraw(t)}})},e.celCallback=function(t){var n={type:"FeatureCollection",features:e.features};t.container.selectAll(".".concat(e.props.objectsClass)).data(n.features).enter().append("path").attr("class",e.props.objectsClass),t.redraw()},e.celRedraw=function(t){t.container.selectAll(".".concat(e.props.objectsClass)).each(function(n){if(t.clip(n.geometry.coordinates)){var r=t.mapProjection(n.geometry.coordinates),a=e.props.absoluteSize?n.properties.size:Math.pow(.25*parseInt(n.properties.size),.5);t.setStyle(e.props.symbolStyle),t.context.beginPath(),t.context.arc(r[0],r[1],a,0,2*Math.PI),t.context.closePath(),t.context.stroke(),t.context.fill(),t.setTextStyle(e.props.textStyle),t.context.fillText(n.properties.name,r[0]+a,r[1]+a)}})},e.render=function(){return a.a.Children.map(e.props.children,function(t){return a.a.cloneElement(t,{addFeature:e.addFeature})})},e.features=[],e}return f(n,a.a.Component),n}(),M=function(t){function n(){var t,e,r;c(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return l(r,(e=r=l(this,(t=h(n)).call.apply(t,[this].concat(i))),r.componentDidMount=function(){var t=r.props,n=t.ra,e=t.dec,a=t.id,i=s(t,["ra","dec","id"]);r.props.addFeature({type:"Feature",id:a,properties:i,geometry:{type:"Point",coordinates:[d(n),e]}})},r.render=function(){return null},e))}return f(n,a.a.Component),n}();g.FeaturesCollection=v,g.Point=M}]));